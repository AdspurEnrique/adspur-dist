(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"1M8x":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("qCKp"),r=a("Xk39");i.Observable.prototype.catch=r._catch,i.Observable.prototype._catch=r._catch},LM6Q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kU1M");t.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.startWith.apply(void 0,e)(this)}},MSNS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a("gSmF")},S7rW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a("1M8x")},Xk39:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("kU1M");t._catch=function(e){return i.catchError(e)(this)}},"g+tZ":function(e,t,a){"use strict";a.r(t),a.d(t,"WorkModule",(function(){return Bo}));var i=a("u47x"),r=a("5+WD"),n=a("ofXK"),o=a("3Pt+"),c=a("tyNb"),p=a("g8kl"),l=a("627d"),s=a("smUe"),m=a("Zmgn"),d=a("jAig"),u=a("RTH9"),b=a("Hm14"),f=a("cp0P"),g=a("LRne"),h=a("fXoL"),y=a("EY2u"),v=a("9Ku7"),C=a("BI15"),S=a("Q0oM"),k=a("9VoG"),I=a("nS8h"),w=a("8t76"),T=a("gFiL"),x=a("npzR"),D=a("9BiM"),P=a("YdDH"),_=a("yDRh"),F=a("LJ+s"),N=a("jhN1"),O=a("0IaG"),A=a("dNgK"),W=a("Xa2L"),L=a("znSr"),R=a("XiUz"),U=a("bTqV"),E=a("NFeN"),M=function(){function e(e){this.tpl=e}return e.\u0275fac=function(t){return new(t||e)(h.Nb(h.N))},e.\u0275dir=h.Ib({type:e,selectors:[["","appCarouselItem",""]]}),e}(),j=a("R0Ic"),G=["carousel"],z=function(e){return{"current-slide":e}};function Q(e,t){if(1&e&&(h.Tb(0,"li",5),h.Pb(1,6),h.Sb()),2&e){var a=t.$implicit,i=t.index,r=h.fc();h.mc("ngClass",h.sc(2,z,r.currentSlide==i)),h.Cb(1),h.mc("ngTemplateOutlet",a.tpl)}}function B(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",7),h.Tb(1,"button",8),h.bc("click",(function(){return h.Cc(a),h.fc().prev()})),h.Tb(2,"mat-icon",9),h.Pc(3,"keyboard_arrow_left"),h.Sb(),h.Sb(),h.Tb(4,"button",10),h.bc("click",(function(){return h.Cc(a),h.fc().next()})),h.Tb(5,"mat-icon",9),h.Pc(6,"keyboard_arrow_right"),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc();h.Cb(1),h.mc("disabled",i.isPrev()),h.Cb(3),h.mc("disabled",i.isNext())}}var $=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=h.Ib({type:e,selectors:[["",8,"carousel-item"]]}),e}(),V=function(){function e(e){this.builder=e,this.timing="250ms ease-in",this.numberOfItems=1,this.showControls=!0,this.currentSlide=0,this.carouselWrapperStyle={}}return e.prototype.buildAnimation=function(e){return this.builder.build([Object(j.e)(this.timing,Object(j.m)({transform:"translateX(-"+e+"px)"}))])},e.prototype.isNext=function(){return!(this.currentSlide+1<this.items.length/this.numberOfItems)},e.prototype.next=function(){if(!this.isNext()){this.currentSlide=(this.currentSlide+1)%this.items.length;var e=this.buildAnimation(this.currentSlide*this.itemWidth);this.player=e.create(this.carousel.nativeElement),this.player.play()}},e.prototype.isPrev=function(){return 0===this.currentSlide},e.prototype.prev=function(){if(!this.isPrev()){this.currentSlide=(this.currentSlide-1+this.items.length)%this.items.length;var e=this.buildAnimation(this.currentSlide*this.itemWidth);this.player=e.create(this.carousel.nativeElement),this.player.play()}},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){if(e.itemWidth=0,1===e.itemsElements.toArray().length)e.itemWidth=e.itemsElements.first.nativeElement.getBoundingClientRect().width;else for(var t=0;t<(e.itemsElements.toArray().length>=e.numberOfItems?e.numberOfItems:e.itemsElements.toArray().length);t++)e.itemWidth=e.itemWidth+e.itemsElements.toArray()[t].nativeElement.getBoundingClientRect().width;e.carouselWrapperStyle={width:e.itemWidth+"px"}}))},e.\u0275fac=function(t){return new(t||e)(h.Nb(j.b))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-carousel"]],contentQueries:function(e,t,a){var i;1&e&&h.Gb(a,M,!1),2&e&&h.yc(i=h.cc())&&(t.items=i)},viewQuery:function(e,t){var a;1&e&&(h.Uc(G,!0),h.Uc($,!0,h.l)),2&e&&(h.yc(a=h.cc())&&(t.carousel=a.first),h.yc(a=h.cc())&&(t.itemsElements=a))},inputs:{timing:"timing",numberOfItems:"numberOfItems",showControls:"showControls"},exportAs:["app-carousel"],decls:5,vars:3,consts:[[1,"carousel-wrapper",3,"ngStyle"],[1,"carousel-inner"],["carousel",""],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["class","carousel-controls",4,"ngIf"],[1,"carousel-item",3,"ngClass"],[3,"ngTemplateOutlet"],[1,"carousel-controls"],["mat-mini-fab","",1,"carousel-button","carousel-button-prev",3,"disabled","click"],["aria-label","Previous item in campaing"],["mat-mini-fab","",1,"carousel-button","carousel-button-next",3,"disabled","click"]],template:function(e,t){1&e&&(h.Tb(0,"section",0),h.Tb(1,"ul",1,2),h.Nc(3,Q,2,4,"li",3),h.Sb(),h.Sb(),h.Nc(4,B,7,2,"div",4)),2&e&&(h.mc("ngStyle",t.carouselWrapperStyle),h.Cb(3),h.mc("ngForOf",t.items),h.Cb(1),h.mc("ngIf",t.showControls))},directives:[n.o,n.m,n.n,$,n.l,n.s,U.b,E.a],styles:["app-carousel{display:block;position:relative}app-carousel .carousel-wrapper{overflow:hidden}app-carousel .carousel-inner{list-style:none;margin:0;padding:0;width:6000px;display:-webkit-box;display:flex}app-carousel .carousel-item{float:left}app-carousel .carousel-controls{position:absolute;top:50%;width:100%;margin-top:-20px;pointer-events:none}app-carousel .carousel-button.mat-mini-fab{background-color:#fff;color:rgba(0,0,0,.87);pointer-events:auto;position:absolute}app-carousel .carousel-button-prev{left:-48px}app-carousel .carousel-button-next{right:-48px}"],encapsulation:2}),e}(),H=a("5hZf"),q=a("c3Os"),K=a("MutI"),Y=a("Wp6s"),J=a("bJXX"),X=a("TA5z"),Z=a("D4rx"),ee=a("nJag"),te=["commentPanelComp"];function ae(e,t){if(1&e&&h.Ob(0,"mat-spinner",2),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function ie(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",13),h.bc("click",(function(){h.Cc(a);var e=h.fc(3);return e.routeHistoryService.goBackTo(e.returnUrl,e.defaultReturnUrl)})),h.Tb(1,"mat-icon",14),h.Pc(2,"arrow_back"),h.Sb(),h.Sb()}}function re(e,t){1&e&&(h.Tb(0,"span"),h.Pc(1,"s"),h.Sb())}function ne(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",18),h.bc("click",(function(){return h.Cc(a),h.fc(4).toggleViewCampaignItems()})),h.Pc(1),h.Nc(2,re,2,0,"span",19),h.Sb()}if(2&e){var i=h.fc(4);h.Cb(1),h.Rc(" ",i.aItems.length," Item"),h.Cb(1),h.mc("ngIf",1!==i.aItems.length)}}function oe(e,t){if(1&e&&(h.Tb(0,"h1",15),h.Pc(1),h.Tb(2,"span",16),h.Pc(3,"\xa0|\xa0"),h.Sb(),h.Nc(4,ne,3,2,"a",17),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.Rc(" ",a.theWork.campaignName," "),h.Cb(3),h.mc("ngIf",a.aItems&&a.aItems.length)}}function ce(e,t){if(1&e&&h.Ob(0,"img",32),2&e){var a=h.fc(2).$implicit;h.oc("src","",a.thumbImage,"&fit=crop&h=142",h.Fc)}}function pe(e,t){1&e&&h.Ob(0,"img",33)}function le(e,t){1&e&&(h.Tb(0,"mat-icon",34),h.Pc(1,"remove_red_eye"),h.Sb())}function se(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"div",23),h.Tb(2,"a",24,25),h.Tb(4,"div",26),h.Nc(5,ce,1,1,"img",27),h.Nc(6,pe,1,0,"img",28),h.Nc(7,le,2,0,"mat-icon",29),h.Sb(),h.Tb(8,"h3",30),h.Tb(9,"span",31),h.Pc(10),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Qb()),2&e){var a=h.zc(3),i=h.fc().$implicit,r=h.fc(4);h.Cb(2),h.pc("routerLink","/work/",r.theWork.campaignID,"/",i.campaignID,""),h.Cb(2),h.Fb("active",a.isActive),h.Cb(1),h.mc("ngIf",i.thumbImage),h.Cb(1),h.mc("ngIf",!i.thumbImage),h.Cb(1),h.mc("ngIf",a.isActive),h.Cb(1),h.Fb("active",a.isActive),h.Cb(2),h.Qc(i.campaignName)}}function me(e,t){1&e&&(h.Rb(0),h.Nc(1,se,11,10,"ng-container",22),h.Qb())}function de(e,t){if(1&e&&(h.Tb(0,"app-carousel",20),h.Nc(1,me,2,0,"ng-container",21),h.Sb()),2&e){var a=h.fc(3);h.mc("numberOfItems",4),h.Cb(1),h.mc("ngForOf",a.aItems)}}function ue(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"div",37),h.Ob(2,"app-thework-card",38),h.Sb(),h.Qb()),2&e){var a=t.$implicit,i=h.fc(4);h.Cb(2),h.pc("routerLinkTarget","/work/",i.theWork.campaignID,"/",a.campaignID,""),h.mc("theWork",a)}}var be=function(){return{"padding-bottom":"24px"}};function fe(e,t){if(1&e&&(h.Tb(0,"div",35),h.Tb(1,"section",36),h.Nc(2,ue,3,3,"ng-container",21),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.mc("ngStyle",h.rc(2,be)),h.Cb(2),h.mc("ngForOf",a.aItems)}}var ge=function(e){return{"work_campaign-header--expanded":e}};function he(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"section",4),h.Tb(2,"div",5),h.Tb(3,"div",6),h.Nc(4,ie,3,0,"a",7),h.Nc(5,oe,5,2,"h1",8),h.Ob(6,"span",9),h.Tb(7,"a",10),h.Pc(8,"Edit Campaign"),h.Sb(),h.Sb(),h.Nc(9,de,2,2,"app-carousel",11),h.Nc(10,fe,3,3,"div",12),h.Sb(),h.Sb(),h.Ob(11,"router-outlet"),h.Qb()),2&e){var a=h.fc(2);h.Cb(1),h.mc("ngClass",h.sc(5,ge,"viewCampaignItems"==a.action)),h.Cb(3),h.mc("ngIf","index"==a.action),h.Cb(1),h.mc("ngIf","index"==a.action||"viewCampaignItems"==a.action),h.Cb(4),h.mc("ngIf",a.aItems&&a.aItems.length&&"index"==a.action),h.Cb(1),h.mc("ngIf","viewCampaignItems"==a.action)}}function ye(e,t){if(1&e&&(h.Rb(0),h.Pc(1),h.Qb()),2&e){var a=h.fc(3);h.Cb(1),h.Rc(" ",a.theWork.advertiserClientName," ")}}function ve(e,t){1&e&&(h.Tb(0,"small",75),h.Pc(1,"No client set"),h.Sb())}function Ce(e,t){if(1&e&&(h.Rb(0),h.Pc(1),h.Qb()),2&e){var a=h.fc(3);h.Cb(1),h.Rc(" ",a.theWork.productServiceName," ")}}function Se(e,t){1&e&&(h.Tb(0,"small",75),h.Pc(1,"No product set"),h.Sb())}function ke(e,t){if(1&e&&(h.Tb(0,"span",78),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.Cb(1),h.Qc(a.agencyName)}}function Ie(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"mat-icon",76),h.Pc(2,"location_on"),h.Sb(),h.Nc(3,ke,2,1,"span",77),h.Qb()),2&e){var a=h.fc(3);h.Cb(3),h.mc("ngForOf",a.theWork.aAgency)}}function we(e,t){1&e&&(h.Rb(0),h.Tb(1,"small",75),h.Tb(2,"mat-icon",79),h.Pc(3,"location_on"),h.Sb(),h.Pc(4," No agency set "),h.Sb(),h.Qb())}function Te(e,t){if(1&e&&(h.Tb(0,"li",52),h.Pc(1," First aired: "),h.Tb(2,"strong"),h.Tb(3,"time",53),h.gc(4,"date"),h.Pc(5),h.gc(6,"date"),h.Sb(),h.Sb(),h.Pc(7," in "),h.Tb(8,"strong"),h.Pc(9),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(3),h.mc("dateTime",h.ic(4,3,a.theWork.firstAppearedAtCal,"yyyy-MM-dd")),h.Cb(2),h.Qc(h.ic(6,6,a.theWork.firstAppearedAtCal,"EEE, MMMM d, yyyy")),h.Cb(4),h.Qc(a.theWork.firstAppearedCountryName)}}function xe(e,t){if(1&e&&(h.Tb(0,"li",52),h.Pc(1," Sector: "),h.Tb(2,"strong"),h.Pc(3),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(3),h.Qc(a.theWork.businessSectorName)}}function De(e,t){if(1&e&&(h.Rb(0),h.Pc(1," by "),h.Tb(2,"strong"),h.Pc(3),h.Sb(),h.Qb()),2&e){var a=h.fc(3);h.Cb(3),h.Qc(a.theWork.ownerFullName)}}function Pe(e,t){if(1&e&&(h.Tb(0,"li",82),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.Cb(1),h.Rc(" ",a.mediumName," ")}}function _e(e,t){if(1&e&&(h.Tb(0,"ul",80),h.Nc(1,Pe,2,1,"li",81),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("ngForOf",a.mediumsFilterBy("mediumName"))}}function Fe(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",87),h.bc("click",(function(){return h.Cc(a),h.fc(4).toggleShow=!0})),h.Pc(1,"\xa0\xa0 \u2026 more\xa0"),h.Sb()}}function Ne(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",87),h.bc("click",(function(){return h.Cc(a),h.fc(4).toggleShow=!1})),h.Pc(1,"\xa0Hide\xa0"),h.Sb()}}var Oe=function(e){return{"expand-more":e}},Ae=function(e){return{"is-collapsed":e}};function We(e,t){if(1&e&&(h.Tb(0,"section",83),h.Tb(1,"div",84),h.Tb(2,"p",85),h.Pc(3),h.Nc(4,Fe,2,0,"a",86),h.Nc(5,Ne,2,0,"a",86),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("ngClass",h.sc(5,Oe,a.theWork.campaignDescription.length>350)),h.Cb(1),h.mc("ngClass",h.sc(7,Ae,!a.toggleShow)),h.Cb(1),h.Rc(" ",a.theWork.campaignDescription," "),h.Cb(1),h.mc("ngIf",!a.toggleShow&&a.theWork.campaignDescription.length>350),h.Cb(1),h.mc("ngIf",a.toggleShow&&a.theWork.campaignDescription.length>350)}}function Le(e,t){1&e&&(h.Tb(0,"a",88),h.Pc(1,"Manage Files"),h.Sb())}function Re(e,t){1&e&&(h.Tb(0,"li"),h.Tb(1,"div",89),h.Tb(2,"h2",90),h.Pc(3,"No files associated with work"),h.Sb(),h.Tb(4,"button",91),h.Tb(5,"mat-icon",92),h.Pc(6,"cloud_upload"),h.Sb(),h.Tb(7,"span"),h.Pc(8,"\xa0 Upload File"),h.Sb(),h.Sb(),h.Sb(),h.Sb())}function Ue(e,t){1&e&&(h.Tb(0,"mat-icon",101),h.Pc(1,"image"),h.Sb())}function Ee(e,t){1&e&&(h.Tb(0,"mat-icon",101),h.Pc(1,"videocam"),h.Sb())}function Me(e,t){1&e&&(h.Tb(0,"mat-icon",101),h.Pc(1,"volume_up"),h.Sb())}function je(e,t){1&e&&(h.Tb(0,"mat-icon",101),h.Pc(1,"insert_drive_file"),h.Sb())}function Ge(e,t){1&e&&(h.Tb(0,"mat-icon",101),h.Pc(1,"insert_drive_file"),h.Sb())}function ze(e,t){1&e&&(h.Tb(0,"mat-icon",101),h.Pc(1,"link"),h.Sb())}function Qe(e,t){if(1&e&&(h.Tb(0,"li"),h.Tb(1,"mat-card"),h.Ob(2,"app-shared-file",94),h.Sb(),h.Tb(3,"div",95),h.Tb(4,"small",96),h.Pc(5),h.Sb(),h.Tb(6,"a",97),h.Tb(7,"mat-icon",98),h.Pc(8,"save_alt"),h.Sb(),h.Pc(9," Download "),h.Sb(),h.Tb(10,"a",99),h.Nc(11,Ue,2,0,"mat-icon",100),h.Nc(12,Ee,2,0,"mat-icon",100),h.Nc(13,Me,2,0,"mat-icon",100),h.Nc(14,je,2,0,"mat-icon",100),h.Nc(15,Ge,2,0,"mat-icon",100),h.Nc(16,ze,2,0,"mat-icon",100),h.Pc(17," Details "),h.Sb(),h.Sb(),h.Sb()),2&e){var a=t.$implicit;h.Eb("work_item-file text-right work_item--type-",a.media_file_type,""),h.Cb(2),h.mc("file",a),h.Cb(3),h.Qc(a.originalFileName),h.Cb(1),h.mc("href",a.originalFileSignedAsAttachment,h.Fc),h.Cb(4),h.oc("routerLink","./file/",a.assetUploadID,""),h.Cb(1),h.mc("ngIf","image"==a.media_file_type),h.Cb(1),h.mc("ngIf","video"==a.media_file_type),h.Cb(1),h.mc("ngIf","audio"==a.media_file_type),h.Cb(1),h.mc("ngIf","document"==a.media_file_type),h.Cb(1),h.mc("ngIf","pdf"==a.media_file_type),h.Cb(1),h.mc("ngIf","url"==a.media_file_type)}}function Be(e,t){if(1&e&&(h.Rb(0),h.Nc(1,Qe,18,13,"li",93),h.gc(2,"async"),h.Qb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("ngForOf",h.hc(2,1,a.getFilteredFiles()))}}function $e(e,t){1&e&&(h.Rb(0),h.Pc(1,"Loading"),h.Qb())}function Ve(e,t){if(1&e&&h.Pc(0),2&e){var a=h.fc(3);h.Qc(a.totalWorkEntries())}}function He(e,t){if(1&e&&(h.Tb(0,"h4",113),h.Pc(1),h.Ob(2,"br"),h.Tb(3,"span",114),h.Pc(4),h.Sb(),h.Sb()),2&e){var a=h.fc(3).$implicit,i=h.fc().$implicit;h.Cb(1),h.Rc(" ",i.keyObject.eventParentName,""),h.Cb(3),h.Qc(a.eventName)}}function qe(e,t){if(1&e&&(h.Tb(0,"a",109),h.Tb(1,"div",110),h.Tb(2,"div"),h.Ob(3,"img",111),h.Sb(),h.Nc(4,He,5,2,"h4",112),h.Sb(),h.Sb()),2&e){var a=h.fc(2).$implicit,i=h.fc().$implicit;h.pc("routerLink","/awards/p/",i.keyObject.urlSlug,"/e/",a.eventName,"/overview"),h.Cb(3),h.oc("src","",i.keyObject.imageFile,"&w=100&h=100",h.Fc),h.Cb(1),h.mc("ngIf",i.keyObject&&i.keyObject.eventParentName)}}function Ke(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-entry-row",116),h.bc("toggleEnteredOut",(function(e){return h.Cc(a),h.fc(7).toggleEntered(e)}))("deleteEntryOut",(function(e){return h.Cc(a),h.fc(7).deleteEntry(e)})),h.Sb()}if(2&e){var i=t.$implicit;h.mc("bExpansionPanel",!1)("bIncludeThumbnail",!1)("bIncludeClient",!1)("bIncludeLeagueTableTitle",!0)("bIncludeFee",!1)("bIncludeWorkType",!0)("bIncludeEntryFile",!1)("bIncludeMenu",!0)("bIncludeGoToLink",!0)("bIncludeAncestor",!0)("bIncludeAncestorAlt",!0)("view","entriesInWork")("data",i)}}function Ye(e,t){if(1&e&&(h.Rb(0),h.Nc(1,Ke,1,13,"app-entry-row",115),h.gc(2,"limitTo"),h.Qb()),2&e){var a=h.fc(2).$implicit;h.Cb(1),h.mc("ngForOf",h.ic(2,1,a.aEntry,5))}}function Je(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-entry-row",116),h.bc("toggleEnteredOut",(function(e){return h.Cc(a),h.fc(7).toggleEntered(e)}))("deleteEntryOut",(function(e){return h.Cc(a),h.fc(7).deleteEntry(e)})),h.Sb()}if(2&e){var i=t.$implicit;h.mc("bExpansionPanel",!1)("bIncludeThumbnail",!1)("bIncludeClient",!1)("bIncludeLeagueTableTitle",!0)("bIncludeFee",!1)("bIncludeWorkType",!0)("bIncludeEntryFile",!1)("bIncludeMenu",!0)("bIncludeGoToLink",!0)("bIncludeAncestor",!0)("bIncludeAncestorAlt",!0)("view","entriesInWork")("data",i)}}function Xe(e,t){if(1&e&&h.Nc(0,Je,1,13,"app-entry-row",115),2&e){var a=h.fc(2).$implicit;h.mc("ngForOf",a.aEntry)}}function Ze(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",117),h.bc("click",(function(){h.Cc(a);var e=h.fc(3).$implicit;return e.bShowMore=!e.bShowMore})),h.Tb(1,"div",118),h.Tb(2,"button",119),h.Tb(3,"mat-icon",120),h.Pc(4,"expand_more"),h.Sb(),h.Sb(),h.Sb(),h.Tb(5,"div",121),h.Tb(6,"h5",122),h.Tb(7,"strong",123),h.Pc(8),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(2).$implicit;h.Cb(8),h.Rc("Show ",i.aEntry.length-5," more")}}function et(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",117),h.bc("click",(function(){h.Cc(a);var e=h.fc(3).$implicit;return e.bShowMore=!e.bShowMore})),h.Tb(1,"div",118),h.Tb(2,"button",119),h.Tb(3,"mat-icon",120),h.Pc(4,"expand_less"),h.Sb(),h.Sb(),h.Sb(),h.Tb(5,"div",121),h.Tb(6,"h5",122),h.Tb(7,"strong",123),h.Pc(8),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(2).$implicit;h.Cb(8),h.Rc("Hide ",i.aEntry.length-5,"")}}var tt=function(){return{"margin-left":"-16px","margin-right":"-16px"}};function at(e,t){if(1&e&&(h.Tb(0,"div",103),h.Nc(1,qe,5,4,"a",104),h.Tb(2,"div",105),h.Nc(3,Ye,3,4,"ng-container",1),h.Nc(4,Xe,1,1,"ng-template",null,106,h.Oc),h.Tb(6,"div",107),h.Nc(7,Ze,9,1,"a",108),h.Nc(8,et,9,1,"a",108),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.zc(5),i=h.fc().$implicit,r=h.fc().$implicit;h.Cb(1),h.mc("ngIf",r.keyObject&&r.keyObject.eventParentName),h.Cb(1),h.mc("ngStyle.lt-md",h.rc(7,tt)),h.Cb(1),h.mc("ngIf",i.aEntry.length>5&&!r.bShowMore)("ngIfElse",a),h.Cb(3),h.mc("hidden",!(i.aEntry.length>5)),h.Cb(1),h.mc("ngIf",!r.bShowMore),h.Cb(1),h.mc("ngIf",r.bShowMore)}}function it(e,t){if(1&e&&(h.Rb(0),h.Nc(1,at,9,8,"div",102),h.Qb()),2&e){var a=t.$implicit;h.Cb(1),h.mc("ngIf",a.aEntry&&a.aEntry.length)}}function rt(e,t){if(1&e&&(h.Rb(0),h.Nc(1,it,2,1,"ng-container",21),h.Qb()),2&e){var a=t.$implicit;h.Cb(1),h.mc("ngForOf",a.keyObject.aEventObj)}}function nt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"section",124),h.Tb(1,"app-shared-comment-panel",125,126),h.bc("addCommentOut",(function(e){return h.Cc(a),h.fc(3).addComment(e)}))("removeCommentOut",(function(e){return h.Cc(a),h.fc(3).openRemoveCommentDialog(e)})),h.Sb(),h.Sb()}if(2&e){var i=h.fc(3);h.Cb(1),h.mc("aComment",i.aComment)("user",i.user)}}function ot(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"div",37),h.Ob(2,"app-thework-card",38),h.Sb(),h.Qb()),2&e){var a=t.$implicit,i=h.fc(4);h.Cb(2),h.pc("routerLinkTarget","/work/",a.campaignID,"/",i.theWork.campaignID,""),h.mc("theWork",a)}}var ct=function(){return{"padding-top":"24px"}};function pt(e,t){if(1&e&&(h.Tb(0,"section",127),h.Tb(1,"div",128),h.Tb(2,"h3",129),h.Tb(3,"span"),h.Pc(4,"Campaigns "),h.Sb(),h.Tb(5,"span",56),h.Pc(6),h.Sb(),h.Sb(),h.Tb(7,"p",130),h.Pc(8),h.Sb(),h.Tb(9,"div",131),h.Nc(10,ot,3,3,"ng-container",21),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(6),h.Qc(null!=a.aParentCampaign&&a.aParentCampaign.length?a.aParentCampaign.length:"0"),h.Cb(2),h.Rc("This Work is also associated with the following Campaign",1===(null==a.aParentCampaign?null:a.aParentCampaign.length)?"":"s",""),h.Cb(1),h.mc("ngStyle",h.rc(4,ct)),h.Cb(1),h.mc("ngForOf",a.aParentCampaign)}}var lt=function(){return{"padding-top":"16px"}};function st(e,t){if(1&e){var a=h.Ub();h.Tb(0,"section",39),h.Tb(1,"div",40),h.Tb(2,"a",41),h.bc("click",(function(){h.Cc(a);var e=h.fc(2);return e.routeHistoryService.goBackTo(e.returnUrl,e.defaultReturnUrl)})),h.Tb(3,"mat-icon",14),h.Pc(4,"arrow_back"),h.Sb(),h.Sb(),h.Ob(5,"span",9),h.Tb(6,"button",42),h.bc("click",(function(){h.Cc(a);var e=h.fc(2);return e.openConfirmDeleteWork(e.theWork)})),h.Pc(7,"Delete"),h.Sb(),h.Tb(8,"a",43),h.Pc(9,"Edit"),h.Sb(),h.Sb(),h.Tb(10,"h1",44),h.Pc(11),h.Sb(),h.Tb(12,"h2",45),h.Nc(13,ye,2,1,"ng-container",19),h.Nc(14,ve,2,0,"small",46),h.Sb(),h.Tb(15,"div",47),h.Tb(16,"ul",48),h.Tb(17,"li",49),h.Nc(18,Ce,2,1,"ng-container",19),h.Nc(19,Se,2,0,"small",46),h.Sb(),h.Tb(20,"li",49),h.Nc(21,Ie,4,1,"ng-container",19),h.Nc(22,we,5,0,"ng-container",19),h.Sb(),h.Sb(),h.Tb(23,"ul",50),h.Nc(24,Te,10,9,"li",51),h.Nc(25,xe,4,1,"li",51),h.Tb(26,"li",52),h.Pc(27," Created: "),h.Tb(28,"time",53),h.gc(29,"date"),h.Tb(30,"strong"),h.Pc(31),h.gc(32,"date"),h.Sb(),h.Sb(),h.Nc(33,De,4,1,"ng-container",19),h.Sb(),h.Sb(),h.Tb(34,"div",54),h.Tb(35,"a",55),h.Tb(36,"span"),h.Pc(37,"Files "),h.Sb(),h.Tb(38,"span",56),h.Pc(39),h.gc(40,"async"),h.Sb(),h.Sb(),h.Tb(41,"a",57),h.Tb(42,"span"),h.Pc(43),h.Sb(),h.Tb(44,"span",56),h.Pc(45),h.Sb(),h.Sb(),h.Tb(46,"a",58),h.Tb(47,"span"),h.Pc(48,"Comments "),h.Sb(),h.Tb(49,"span",56),h.Pc(50),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Nc(51,_e,2,1,"ul",59),h.Sb(),h.Nc(52,We,6,9,"section",60),h.Tb(53,"section",61),h.Tb(54,"div",62),h.Tb(55,"h3",63),h.Pc(56," Files "),h.Tb(57,"span",56),h.Pc(58),h.gc(59,"async"),h.Sb(),h.Sb(),h.Nc(60,Le,2,0,"a",64),h.Tb(61,"ul",65),h.Nc(62,Re,9,0,"li",19),h.Nc(63,Be,3,3,"ng-container",19),h.Sb(),h.Sb(),h.Sb(),h.Tb(64,"section",66),h.Tb(65,"div",67),h.Tb(66,"h3",63),h.Pc(67," Entries "),h.Tb(68,"span",56),h.Nc(69,$e,2,0,"ng-container",1),h.Nc(70,Ve,1,1,"ng-template",null,68,h.Oc),h.Sb(),h.Sb(),h.Tb(72,"a",69),h.Pc(73,"Create Entry"),h.Sb(),h.Tb(74,"div",70),h.Nc(75,rt,2,1,"ng-container",21),h.Sb(),h.Sb(),h.Sb(),h.Tb(76,"section",71),h.Ob(77,"app-credit-view",72),h.Sb(),h.Nc(78,nt,3,2,"section",73),h.Nc(79,pt,11,5,"section",74)}if(2&e){var i=h.zc(71),r=h.fc(2);h.Cb(11),h.Rc(" ",r.theWork.campaignName," "),h.Cb(2),h.mc("ngIf",r.theWork.advertiserClientName),h.Cb(1),h.mc("ngIf",!r.theWork.advertiserClientName),h.Cb(4),h.mc("ngIf",r.theWork.productServiceName),h.Cb(1),h.mc("ngIf",!r.theWork.productServiceName),h.Cb(2),h.mc("ngIf",r.theWork.primaryAgencyName),h.Cb(1),h.mc("ngIf",!r.theWork.primaryAgencyName),h.Cb(1),h.mc("ngStyle.lt-sm",h.rc(42,lt)),h.Cb(1),h.mc("ngIf",r.theWork.firstAppearedCountryName),h.Cb(1),h.mc("ngIf",r.theWork.businessSectorName),h.Cb(3),h.mc("dateTime",h.ic(29,32,r.theWork.createdAt,"yyyy-MM-dd HH:mm")),h.Cb(3),h.Qc(h.ic(32,35,r.theWork.createdAt,"EEE, MMMM d, yyyy")),h.Cb(2),h.mc("ngIf",r.theWork.ownerFullName),h.Cb(6),h.Qc(h.hc(40,38,r.getFilteredFiles()).length),h.Cb(4),h.Rc("",r.aEntry&&r.aEntry.length?1!==r.aEntry[r.aEntry.length-1].nEventParentCount?"Entries":"Entry":"Entries"," "),h.Cb(2),h.Qc(r.aEntry&&r.aEntry.length?r.aEntry[r.aEntry.length-1].nEventParentCount:"0"),h.Cb(5),h.Qc(null!=r.aComment&&r.aComment.length?r.aComment.length:"0"),h.Cb(1),h.mc("ngIf",0!==(null==r.theWork.aMediums?null:r.theWork.aMediums.length)),h.Cb(1),h.mc("ngIf",r.theWork.campaignDescription),h.Cb(6),h.Qc(h.hc(59,40,r.getFilteredFiles()).length),h.Cb(2),h.mc("ngIf",(null==r.aFilesDisplay?null:r.aFilesDisplay.length)>0),h.Cb(2),h.mc("ngIf",!(null!=r.aFilesDisplay&&r.aFilesDisplay.length)>0),h.Cb(1),h.mc("ngIf",(null==r.aFilesDisplay?null:r.aFilesDisplay.length)>0),h.Cb(6),h.mc("ngIf",r.bEntriesLoading)("ngIfElse",i),h.Cb(3),h.oc("routerLink","/entries/work/",r.parentCampaignID?r.parentCampaignID:r.theWork.campaignID,"/create-entry"),h.Cb(3),h.mc("ngForOf",r.aEntry),h.Cb(2),h.pc("routerLinkURL","/work/",r.parentCampaignID?r.parentCampaignID+"/":"","",r.theWork.campaignID,"/credits"),h.mc("assetID",r.theWork.assetID),h.Cb(1),h.mc("ngIf",r.user),h.Cb(1),h.mc("ngIf",r.aParentCampaign)}}function mt(e,t){if(1&e&&(h.Rb(0),h.Nc(1,he,12,7,"ng-container",1),h.Nc(2,st,80,43,"ng-template",null,3,h.Oc),h.Qb()),2&e){var a=h.zc(3),i=h.fc();h.Cb(1),h.mc("ngIf",!i.theWork.isSingle)("ngIfElse",a)}}var dt,ut=function(){function e(e,t,a,i,r,n,o,c,p,l,s,m,d,u,b,f,g){this.authenticationService=e,this.categoryService=t,this.entryService=a,this.eventParentService=i,this.eventChildService=r,this.fileService=n,this.groupByPipe=o,this.mergeArrayPipe=c,this.route=p,this.title=l,this.theworkService=s,this.userAlertService=m,this.location=d,this.dialog=u,this.router=b,this.routeHistoryService=f,this.snackBar=g,this.action="index",this.bEntriesLoading=!1,this.bShowWork=!1,this.defaultReturnUrl="/work",this.isEntered=!1,this.toggleShow=!1,this.title.setTitle("Work - Adspur")}return Object.defineProperty(e.prototype,"campaignid",{set:function(e){this.campaignID!==e&&(this.campaignID=e,this.init())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentcampaignid",{set:function(e){this.parentCampaignID!==e&&(this.parentCampaignID=e,this.init())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"categoryid",{set:function(e){this.categoryID=e,this.init()},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.returnUrl=this.parentCampaignID?"/work/"+this.parentCampaignID+"/"+this.campaignID:this.route.snapshot.children.length&&this.route.snapshot.children[0].params.singleCampaignID?"/work/"+this.campaignID+"/"+this.route.snapshot.children[0].params.singleCampaignID:"/work/"+this.campaignID,this.init()},e.prototype.init=function(){var e=this;void 0!==this.campaignID&&(this.loadData(this.campaignID,this.parentCampaignID,this.categoryID).subscribe((function(){e.bShowWork=!0})),this.loadEntryData(this.campaignID,this.parentCampaignID).subscribe())},e.prototype.loadData=function(e,t,a){var i=this;return Object(f.a)([this.theworkService.getWork(e).map((function(e){return i.theWork=e,e})).switchMap((function(t){return t.isSingle?i.fileService.getFiles(e).map((function(e){return i.aFiles=e})).switchMap((function(){return t.aParentCampaignID&&t.aParentCampaignID.length?i.theworkService.getWorkMany(t.aParentCampaignID).map((function(e){return i.aParentCampaign=e})):Object(g.a)(void 0)})).switchMap((function(){return i.theworkService.getWorkComments(e).map((function(e){return i.aComment=e}))})):i.theworkService.getWorkItems(e).map((function(e){return i.aItems=e}))})).switchMap((function(){return a?i.categoryService.getCategoryByID(a).map((function(e){return i.category=e,e})).flatMap((function(t){return Object(f.a)([i.eventParentService.getEventParentByID(t.eventParentID).map((function(e){return i.eventParent=e})),i.eventChildService.getEventChildByID(t.eventID).map((function(e){return i.eventChild=e})),i.entryService.getEntry(a,e).map((function(e){i.entry=e,i.aFilesDisplay=i.entry&&i.entry.aFiles&&i.entry.aFiles.length?i.entry.aFiles.map((function(e){var t=this.aFiles.find((function(t){return t.assetUploadID===e.assetUploadID}));return t.removedAt=e.removedAt,t.displayOrder=e.displayOrder,t})):i.aFiles}))])})):Object(g.a)(void 0).map((function(){return i.aFilesDisplay=i.aFiles}))})).map((function(){return void 0===i.parentCampaignID&&!i.theWork.isSingle&&i.theWork.aItems&&i.theWork.aItems.length&&i.router.url.split("/").length<4?i.router.navigate(["./"+i.theWork.aItems[0].campaignID],{relativeTo:i.route}):void 0})),t&&0!==t?this.theworkService.getWork(t).map((function(e){return i.theWorkParent=e})):Object(g.a)(void 0),this.authenticationService.isLoggedIn()?Object(g.a)(this.authenticationService.currentUserValue).map((function(e){return i.user=e})):Object(g.a)(void 0)])},e.prototype.loadEntryData=function(e,t){var a=this;return this.bEntriesLoading=!0,Object(f.a)([this.entryService.getEntryByCampaignID(e).map((function(e){return a.aEntrySingleCampaign=e})),t?this.entryService.getEntryByCampaignID(t).map((function(e){return a.aEntryCampaign=e})):Object(g.a)([]),this.eventParentService.getEventParents().map((function(e){return a.aEventParent=e}))]).map((function(e){return a.aEntry=a.buildEventParentEntryArray(e[0],e[1],e[2])})).map((function(){return a.bEntriesLoading=!1}))},e.prototype.getFilteredFiles=function(e,t,a,i){return this.aFiles&&this.aFiles.length?this.fileService.getFilteredFiles(this.aFiles,"removedAt","",!0,!1):Object(g.a)([])},e.prototype.mediumsFilterBy=function(e){return this.theWork.aMediums.sort((function(t,a){return t[e]>a[e]?1:t[e]===a[e]?0:-1}))},e.prototype.toggleViewCampaignItems=function(){this.action="viewCampaignItems"===this.action?"index":"viewCampaignItems"},e.prototype.toggleEntered=function(e){var t=this;this.entryService.toggleEntered(e.categoryID,e.campaignID,!e.isEntered).map((function(a){t.aEntryCampaign&&t.aEntryCampaign.length&&t.aEntryCampaign.filter((function(t){return t===e})).length?t.aEntryCampaign.filter((function(t){return t===e}))[0].isEntered=a:Object(g.a)(void 0),t.aEntrySingleCampaign&&t.aEntrySingleCampaign.length&&t.aEntrySingleCampaign.filter((function(t){return t===e})).length?t.aEntrySingleCampaign.filter((function(t){return t===e}))[0].isEntered=a:Object(g.a)(void 0)})).flatMap((function(a){return Object(f.a)([t.entryService.setEntryLocal(e.categoryID,e.campaignID,e),t.parentCampaignID&&t.aEntryCampaign&&t.aEntryCampaign.length?t.entryService.setEntryArrayLocal(t.parentCampaignID,t.aEntryCampaign):Object(g.a)(void 0),t.campaignID&&t.aEntrySingleCampaign&&t.aEntrySingleCampaign.length?t.entryService.setEntryArrayLocal(t.campaignID,t.aEntrySingleCampaign):Object(g.a)(void 0)])})).subscribe()},e.prototype.deleteEntry=function(e){var t=this;this.entryService.createRemoveEntry(e.categoryID,e.campaignID).switchMap((function(){return t.entryService.deleteLocalEntry(e)})).switchMap((function(){return t.loadEntryData(t.campaignID,t.parentCampaignID)})).subscribe()},e.prototype.buildEventParentEntryArray=function(e,t,a){var i=[];if(e||t){i=this.groupByPipe.transform(this.mergeArrayPipe.transform(e||[],t||[]),"eventParentID");var r=0;i.filter((function(e){e.keyObject=a.filter((function(t){return parseInt(e.key)===t.eventParentID}))[0],e.keyObject&&e.keyObject.aEventObj.filter((function(t){t.aEntry=e.value.filter((function(e){return e.eventID===t.eventID})),r+=t.aEntry.length})),e.bShowMore=!1,e.nEventParentCount=r}))}return i},e.prototype.addComment=function(e){var t=this;e.campaignID=this.theWork.campaignID,this.theworkService.addWorkComments(e).switchMap((function(e){return e.hasOwnProperty("commentID")&&0!==e.commentID?t.resetComments().switchMap((function(){return t.userAlertService.alertUser("Comment added",_.c,_.b)})):y.a})).subscribe()},e.prototype.removeComment=function(e){var t=this;return e.campaignID=this.theWork.campaignID,this.theworkService.removeWorkComments(e).switchMap((function(e){return e?t.resetComments().switchMap((function(){return t.userAlertService.alertUser("Comment removed",_.c,_.b)})):y.a}))},e.prototype.resetComments=function(){var e=this;return this.theworkService.removeWorkCommentsLocal(this.theWork.campaignID).map((function(){e.aComment=void 0,e.commentPanelComp.clearComment()})).switchMap((function(){return e.theworkService.getWorkComments(e.theWork.campaignID)})).map((function(t){return e.aComment=t}))},e.prototype.openRemoveCommentDialog=function(e){var t=this;this.dialog.open(S.a,{minWidth:"300px",width:"450px",data:{title:"Delete Comment?",content:"",confirm:"Yes, Delete Comment"}}).afterClosed().switchMap((function(){return t.removeComment(e)})).switchMap((function(){return t.userAlertService.alertUser("Comment deleted",_.c,_.b)})).subscribe()},e.prototype.drop=function(e){var t=this,a=this.aItems[e.previousIndex].campaignID,i=e.currentIndex+1;Object(r.e)(this.aItems,e.previousIndex,e.currentIndex),this.theworkService.reorderItem(this.campaignID,a,i).switchMap((function(e){return e?t.theworkService.removeLocalWork(t.campaignID):Object(g.a)(void 0)})).switchMap((function(){return t.userAlertService.alertUser("Campaign Items Updated",_.c,_.b)})).switchMap((function(e){return e?t.loadData(t.campaignID,t.parentCampaignID,t.categoryID):Object(g.a)(void 0)})).subscribe()},e.prototype.openConfirmDeleteWork=function(e){var t=this;this.dialog.open(S.a,{minWidth:"300px",width:"450px",data:{title:"Delete Work?",icon:!0,content:"Please confirm permanently deleting <strong>"+e.campaignName+"</strong>",confirm:"Yes, Delete Work"}}).afterClosed().switchMap((function(a){return a?t.theworkService.removeWork(e.campaignID).flatMap((function(a){return Object(f.a)([t.theworkService.removeLocalWork(e.campaignID),t.theworkService.removeWorkCommentsLocal(e.campaignID),e.isSingle&&e.aParentCampaignID&&e.aParentCampaignID.length?Object(g.a)(e.aParentCampaignID).flatMap((function(e){return Object(f.a)([Object(g.a)(e).map((function(e){return e.map((function(e){return t.theworkService.removeLocalWork(e)}))})).flatMap((function(e){return Object(f.a)(e)}))])})):Object(g.a)(void 0)])})):Object(g.a)(void 0)})).subscribe((function(e){e?t.router.navigate(["."],{relativeTo:t.route.parent}):Object(g.a)(void 0)}))},e.prototype.openSnackBar=function(){this.snackBar.open("Credits coppied to clipboard","",{duration:2e3})},e.prototype.totalWorkEntries=function(){var e=0;return this.aEntry.forEach((function(t){e+=t.value.length})),e},e.\u0275fac=function(t){return new(t||e)(h.Nb(v.a),h.Nb(C.b),h.Nb(k.a),h.Nb(w.a),h.Nb(I.a),h.Nb(T.a),h.Nb(x.a),h.Nb(D.a),h.Nb(c.a),h.Nb(N.e),h.Nb(P.b),h.Nb(_.a),h.Nb(n.i),h.Nb(O.b),h.Nb(c.c),h.Nb(F.a),h.Nb(A.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-shared-thework-campaign"]],viewQuery:function(e,t){var a;1&e&&h.Uc(te,!0),2&e&&h.yc(a=h.cc())&&(t.commentPanelComp=a.first)},inputs:{campaignid:"campaignid",parentcampaignid:"parentcampaignid",categoryid:"categoryid"},decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"color","strokeWidth","diameter"],["single",""],[1,"work_campaign-header",3,"ngClass"],[1,"g-page-width","mat-typography"],["fxLayout","","fxLayoutGap","8px","fxLayoutAlign","start center",1,"work_campaign-header_details"],["mat-icon-button","","class","animate-card-waterfall",3,"click",4,"ngIf"],["class","work_campaign-header_title",4,"ngIf"],["fxFlex",""],["mat-flat-button","","routerLink","./edit-campaign"],[3,"numberOfItems",4,"ngIf"],[3,"ngStyle",4,"ngIf"],["mat-icon-button","",1,"animate-card-waterfall",3,"click"],["aria-label","Back to work listing"],[1,"work_campaign-header_title"],[1,"text-op-25","light"],["class","text-teal light","style","white-space: pre;",3,"click",4,"ngIf"],[1,"text-teal","light",2,"white-space","pre",3,"click"],[4,"ngIf"],[3,"numberOfItems"],[4,"ngFor","ngForOf"],[4,"appCarouselItem"],[1,"item","animate-card-waterfall"],["mat-button","","routerLinkActive","","active","rla.isActive",3,"routerLink"],["rla","routerLinkActive"],[1,"carousel-item_thumbnail"],["class","g-img-bg g-resp-img","alt","","loading","lazy",3,"src",4,"ngIf"],["class","g-img-bg g-resp-img","src","assets/img/no-thumbnail.png","alt","No thumbnail set","loading","lazy",4,"ngIf"],["class","carousel-item_thumbnail--active-icon","aria-label","Viewing",4,"ngIf"],[1,"carousel-item_title"],[1,"line-clamp--2"],["alt","","loading","lazy",1,"g-img-bg","g-resp-img",3,"src"],["src","assets/img/no-thumbnail.png","alt","No thumbnail set","loading","lazy",1,"g-img-bg","g-resp-img"],["aria-label","Viewing",1,"carousel-item_thumbnail--active-icon"],[3,"ngStyle"],["fxLayoutAlign","start stretch","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutGap.gt-xs","16px grid"],["fxFlex","100","fxFlex.sm","33.33","fxFlex.gt-sm","25",1,"animate-card-waterfall"],[3,"routerLinkTarget","theWork"],[1,"g-section","campaign-header","g-page-width"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["mat-icon-button","",1,"campaign-header_back",3,"click"],["mat-button","","color","warn",3,"click"],["mat-button","","routerLink","./edit"],[1,"mat-headline"],[1,"mat-title","text-al-54"],["class","em text-op-50",4,"ngIf"],["fxLayout","row wrap","fxLayout.gt-xs","row","fxLayoutGap.gt-xs","16px"],["fxFlex","50","fxFlexOrder.lt-sm","1","fxFlex.gt-xs","40","fxFlexOrder.gt-xs","1",1,"campaign-header_titles","blank-list"],[1,"mat-body-2","text-al-54"],["fxFlex","100","fxFlexOrder.lt-sm","3","fxFlex.gt-xs","1 1","fxFlexOrder.gt-xs","2",1,"campaign-header_details","blank-list",3,"ngStyle.lt-sm"],["class","mat-caption text-al-54",4,"ngIf"],[1,"mat-caption","text-al-54"],[3,"dateTime"],["fxFlex","50","fxFlexOrder.lt-sm","2","fxFlex.gt-xs","150px","fxFlexOrder.gt-xs","3","fxLayout","column","fxLayoutGap","4px","fxLayoutAlign","start end",1,"campaign-header_jump-links",2,"margin-right","0"],["mat-button","","routerLink",".","fragment","files","aria-label","Jump to the work"],[1,"text-teal","number"],["mat-button","","routerLink",".","fragment","entries","aria-label","Jump to entries"],["mat-button","","routerLink",".","fragment","comments","aria-label","Jump to comments"],["class","text-label-row mat-type",4,"ngIf"],["class","work_item-description",4,"ngIf"],[1,"work_item-files"],["id","files",1,"g-page-width","g-section"],[1,"g-section_title","mat-title","g-fl-l"],["mat-button","","class","g-fl-r","routerLink","./file-manager",4,"ngIf"],[1,"blank-list","g-clear"],[1,"work_item-entries"],["id","entries",1,"g-page-width","g-section"],["entriesLoaded",""],["mat-raised-button","","color","accent",1,"g-fl-r",3,"routerLink"],[1,"g-clear"],[1,"work_item-credits"],[3,"assetID","routerLinkURL"],["class","work_item-comments",4,"ngIf"],["class","work_item-campaigns",4,"ngIf"],[1,"em","text-op-50"],["mat-list-icon","","aria-hidden","true",1,"text-highlight"],["class","comma-item",4,"ngFor","ngForOf"],[1,"comma-item"],["mat-list-icon","","aria-hidden","true"],[1,"text-label-row","mat-type"],["class","text-label bg-info",4,"ngFor","ngForOf"],[1,"text-label","bg-info"],[1,"work_item-description"],["id","description",1,"g-page-width","g-section","g-description",3,"ngClass"],[1,"mat-body-1","expand-more_panel",3,"ngClass"],["class","expand-button text-link","aria-hidden","true",3,"click",4,"ngIf"],["aria-hidden","true",1,"expand-button","text-link",3,"click"],["mat-button","","routerLink","./file-manager",1,"g-fl-r"],[1,"text-center"],[1,"mat-display-1"],["mat-flat-button","","color","accent","routerLink","./file-upload"],["aria-hidden","true"],[3,"class",4,"ngFor","ngForOf"],[3,"file"],[2,"height","36px"],[1,"work_item-file-name","mat-caption","text-al-54","truncate"],["mat-button","","download","","target","_blank",3,"href"],["aria-hidden","true","aria-hidden","true",1,"text-al-54"],["mat-button","",3,"routerLink"],["class","text-al-54","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"text-al-54"],["class","joined-card-list work_item-entry_award-group",4,"ngIf"],[1,"joined-card-list","work_item-entry_award-group"],["mat-button","","class","work_item-entry_award-group-header",3,"routerLink",4,"ngIf"],[3,"ngStyle.lt-md"],["showMore",""],[3,"hidden"],["mat-list-item","","class","mat-elevation-z2 mat-list-item_load-more","fxLayout","",3,"click",4,"ngIf"],["mat-button","",1,"work_item-entry_award-group-header",3,"routerLink"],["fxLayout","",1,"g-clearfix","text-left"],["alt","","loading","lazy","width","50","height","50",1,"mat-elevation-z2","g-img-bg",3,"src"],["class","mat-subheading-1 truncate",4,"ngIf"],[1,"mat-subheading-1","truncate"],[1,"text-al-40"],[3,"bExpansionPanel","bIncludeThumbnail","bIncludeClient","bIncludeLeagueTableTitle","bIncludeFee","bIncludeWorkType","bIncludeEntryFile","bIncludeMenu","bIncludeGoToLink","bIncludeAncestor","bIncludeAncestorAlt","view","data","toggleEnteredOut","deleteEntryOut",4,"ngFor","ngForOf"],[3,"bExpansionPanel","bIncludeThumbnail","bIncludeClient","bIncludeLeagueTableTitle","bIncludeFee","bIncludeWorkType","bIncludeEntryFile","bIncludeMenu","bIncludeGoToLink","bIncludeAncestor","bIncludeAncestorAlt","view","data","toggleEnteredOut","deleteEntryOut"],["mat-list-item","","fxLayout","",1,"mat-elevation-z2","mat-list-item_load-more",3,"click"],["fxFlex","75px",1,"load-more_image"],["mat-icon-button",""],["aria-label","Show more winners"],["fxFlex","1 1",1,"winner-row_details"],[1,"mat-caption","truncate"],[1,"winner-row_title"],[1,"work_item-comments"],[3,"aComment","user","addCommentOut","removeCommentOut"],["commentPanelComp",""],[1,"work_item-campaigns"],["id","campaign",1,"g-page-width","g-section"],[1,"g-section_title","mat-title"],[1,"mat-caption"],["fxLayoutAlign","start stretch","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutGap.gt-xs","16px grid",3,"ngStyle"]],template:function(e,t){if(1&e&&(h.Nc(0,ae,1,3,"ng-template",null,0,h.Oc),h.Nc(2,mt,4,2,"ng-container",1)),2&e){var a=h.zc(1);h.Cb(2),h.mc("ngIf",t.bShowWork&&t.theWork)("ngIfElse",a)}},directives:[n.n,W.c,n.l,L.a,R.e,R.f,R.d,R.b,U.a,c.f,c.h,E.a,V,n.m,M,c.e,n.o,L.c,H.a,U.b,R.c,q.a,K.b,c.d,Y.a,J.a,X.a,K.c,Z.a],pipes:[n.e,n.b,ee.a],styles:['app-shared-thework-campaign{display:block;padding-bottom:112px}app-shared-thework-campaign .work_campaign-header{background:#2a3940;padding:24px 16px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:all .3s cubic-bezier(.35,0,.25,1);transition:all .3s cubic-bezier(.35,0,.25,1);min-height:228px}app-shared-thework-campaign .work_campaign-header.work_campaign-header--expanded{padding-top:56px;min-height:calc(100vh - 56px)}app-shared-thework-campaign .work_campaign-header.work_campaign-header--expanded .work_campaign-header_details{margin-bottom:24px}app-shared-thework-campaign .work_campaign-header .g-page-width{padding:0}app-shared-thework-campaign .work_campaign-header .mat-icon-button{margin-left:-12px}app-shared-thework-campaign .work_campaign-header .work_campaign-header_details{color:#fff;margin-bottom:16px}app-shared-thework-campaign .work_campaign-header_title{-webkit-transition:margin .3s cubic-bezier(.35,0,.25,1);transition:margin .3s cubic-bezier(.35,0,.25,1);margin-bottom:0;padding-right:8px}app-shared-thework-campaign .work_campaign-header_title a{cursor:pointer}app-shared-thework-campaign app-carousel .carousel-item{width:270px}app-shared-thework-campaign app-carousel .carousel-item .item{padding-right:16px;-webkit-box-sizing:border-box;box-sizing:border-box}app-shared-thework-campaign app-carousel .carousel-item:last-child .item{margin-right:0}app-shared-thework-campaign app-carousel .carousel-item .mat-button{padding:0;width:100%;-moz-text-align-last:left;text-align-last:left}app-shared-thework-campaign app-carousel .carousel-item_thumbnail{position:relative;line-height:normal}app-shared-thework-campaign app-carousel .carousel-item_thumbnail img{height:142px;width:100%}app-shared-thework-campaign app-carousel .carousel-item_thumbnail.active:after{content:"";display:block;position:absolute;z-index:1;top:0;height:100%;left:0;width:100%;background:#fff;opacity:.5}app-shared-thework-campaign app-carousel .carousel-item_thumbnail .carousel-item_thumbnail--active-icon{position:absolute;z-index:2;top:50%;left:50%;margin:-12px 0 0 -12px;color:#ff3d00}app-shared-thework-campaign app-carousel .carousel-item_title{display:inline-block;line-height:1.2;font-weight:500;color:#fff;white-space:normal;padding-top:8px;padding-bottom:4px;margin-bottom:0;border-bottom:2px solid transparent}app-shared-thework-campaign app-carousel .carousel-item_title.active{border-bottom-color:#ff3d00}app-shared-thework-campaign app-carousel .carousel-controls{top:72px}app-shared-thework-campaign app-carousel .carousel-button-next{right:-20px}app-shared-thework-campaign app-carousel .carousel-button-prev{left:-20px}app-shared-thework-campaign app-shared-thework-campaign .campaign-header_back{display:none}app-shared-thework-campaign .campaign-header .mat-headline{margin-top:8px;margin-bottom:8px;line-height:1.25;font-size:38px;max-width:700px}app-shared-thework-campaign .campaign-header .mat-title{font-family:Open Sans,sans-serif;font-weight:800;margin-bottom:8px}app-shared-thework-campaign .campaign-header .text-label-row{margin-top:0}app-shared-thework-campaign .campaign-header_titles{margin-top:-4px}app-shared-thework-campaign .campaign-header_titles li{margin-bottom:8px;vertical-align:middle}app-shared-thework-campaign .campaign-header_titles .mat-icon{width:16px;height:16px;font-size:16px;vertical-align:middle}app-shared-thework-campaign .campaign-header_details li{margin-bottom:8px;vertical-align:middle}app-shared-thework-campaign .campaign-header_jump-links .mat-button{line-height:24px}app-shared-thework-campaign .campaign-header,app-shared-thework-campaign .work_item-comments,app-shared-thework-campaign .work_item-credits,app-shared-thework-campaign .work_item-description,app-shared-thework-campaign .work_item-entries,app-shared-thework-campaign .work_item-files{padding:0 16px}app-shared-thework-campaign .campaign-header .g-section,app-shared-thework-campaign .work_item-comments .g-section,app-shared-thework-campaign .work_item-credits .g-section,app-shared-thework-campaign .work_item-description .g-section,app-shared-thework-campaign .work_item-entries .g-section,app-shared-thework-campaign .work_item-files .g-section{padding-left:0;padding-right:0;-webkit-box-sizing:border-box;box-sizing:border-box}app-shared-thework-campaign .campaign-header .g-section_title,app-shared-thework-campaign .work_item-comments .g-section_title,app-shared-thework-campaign .work_item-credits .g-section_title,app-shared-thework-campaign .work_item-description .g-section_title,app-shared-thework-campaign .work_item-entries .g-section_title,app-shared-thework-campaign .work_item-files .g-section_title{padding-left:0}app-shared-thework-campaign .campaign-header{margin-top:0;padding-top:24px}app-shared-thework-campaign .work_item-description .g-section{margin-top:0;margin-bottom:0;padding:0}app-shared-thework-campaign .work_item-files li{margin:0 auto 32px}app-shared-thework-campaign .work_item-file{max-width:80vh;position:relative}app-shared-thework-campaign .work_item-file .mat-card{margin:0 auto 8px;padding:0;overflow:hidden}app-shared-thework-campaign .work_item-file.work_item--type-image .mat-card{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}app-shared-thework-campaign .work_item-file .work_item-file-name{position:absolute;bottom:8px;left:16px;right:103px;text-align:left;opacity:0;-webkit-transition:opacity .2s cubic-bezier(.35,0,.25,1);transition:opacity .2s cubic-bezier(.35,0,.25,1)}app-shared-thework-campaign .work_item-file:hover .work_item-file-name{opacity:1}app-shared-thework-campaign .work_item--type-video{max-width:120vh}app-shared-thework-campaign .work_item--type-document,app-shared-thework-campaign .work_item--type-image,app-shared-thework-campaign .work_item--type-pdf,app-shared-thework-campaign .work_item--type-url{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}app-shared-thework-campaign .work_item-entry_award-group{margin-bottom:32px}app-shared-thework-campaign .work_item-entry_award-group-header{line-height:normal;padding:0;margin-bottom:8px;width:100%}app-shared-thework-campaign .work_item-entry_award-group-header .mat-button-wrapper{display:block}app-shared-thework-campaign .work_item-entry_award-group-header img{border-radius:4px}app-shared-thework-campaign .work_item-entry_award-group-header .mat-subheading-1{padding:2px 16px;margin-bottom:0}app-shared-thework-campaign .mat-list-item_load-more{background:#fff;display:block;position:relative;height:auto;clear:both;margin-top:-2px;border-bottom-left-radius:4px;border-bottom-right-radius:4px}app-shared-thework-campaign .mat-list-item_load-more .load-more_image{text-align:center;margin-right:12px}app-shared-thework-campaign .mat-list-item_load-more .mat-caption{margin:12px 0 8px}'],encapsulation:2}),e}(),bt=function(){function e(e,t){this.route=e,this.router=t}return e.prototype.ngOnInit=function(){var e=this;this.route.params.switchMap((function(t){return e.getUrlSlugs()})).subscribe((function(t){e.params=t||void 0}))},e.prototype.getUrlSlugs=function(){return Object(f.a)([this.route.children.length?Object(g.a)(this.route.children[0].params):Object(g.a)(void 0),Object(g.a)(this.route.params),Object(g.a)(this.route.parent.params)]).map((function(e){var t={campaignID:void 0,parentCampaignID:void 0};return e[0]?(t.parentCampaignID=void 0,t.campaignID=parseInt(e[1].value.campaignID)):(t.parentCampaignID=e[2].value.campaignID?parseInt(e[2].value.campaignID):void 0,t.campaignID=e[1].value.singleCampaignID?parseInt(e[1].value.singleCampaignID):parseInt(e[1].value.campaignID)),t}))},e.\u0275fac=function(t){return new(t||e)(h.Nb(c.a),h.Nb(c.c))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-campaign"]],decls:1,vars:2,consts:[[3,"campaignid","parentcampaignid"]],template:function(e,t){1&e&&h.Ob(0,"app-shared-thework-campaign",0),2&e&&h.mc("campaignid",t.params.campaignID)("parentcampaignid",t.params.parentCampaignID)},directives:[ut],styles:["app-campaign{display:block}"],encapsulation:2}),e}(),ft=a("f3AP"),gt=a("pjp9"),ht=a("q6Au"),yt=a("8DvX"),vt=a("i/6y"),Ct=a("Qu3c"),St=a("kmnG"),kt=a("qFsG"),It=(dt=function(e,t){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}dt(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),wt=["theWorkComponent"];function Tt(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Tb(1,"section",5),h.Tb(2,"div",6),h.Tb(3,"a",7),h.Tb(4,"mat-icon",2),h.Pc(5,"arrow_back"),h.Sb(),h.Sb(),h.Tb(6,"h1",8),h.Pc(7,"Create Campaign"),h.Sb(),h.Sb(),h.Tb(8,"div",9),h.Tb(9,"form",10),h.bc("ngSubmit",(function(){return h.Cc(a),h.fc(2).onSubmit()})),h.Tb(10,"mat-form-field",11),h.Tb(11,"mat-label"),h.Pc(12,"Campaign Name"),h.Sb(),h.Ob(13,"input",12),h.Sb(),h.Tb(14,"div",13),h.Tb(15,"button",14),h.Pc(16," Create Campaign "),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Qb()}if(2&e){var i=h.fc(2);h.Cb(9),h.mc("formGroup",i.campaignFormGroup),h.Cb(6),h.mc("disabled",!i.campaignFormGroup.controls.campaignTitleFormControl.value.length)}}function xt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",21),h.bc("click",(function(){return h.Cc(a),h.fc(3).createCampaign()})),h.Pc(1," Save Campaign "),h.Sb()}}function Dt(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"div",24),h.Ob(2,"app-thework-card",25),h.Sb(),h.Qb()),2&e){var a=t.$implicit;h.Cb(2),h.mc("theWork",a)}}var Pt=function(){return{"padding-top":"24px"}};function _t(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"section",22),h.Nc(2,Dt,3,1,"ng-container",23),h.Sb(),h.Qb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("ngStyle",h.rc(2,Pt)),h.Cb(1),h.mc("ngForOf",a.theWork.aItems)}}var Ft=function(e){return{theWork:e}},Nt=function(e){return{data:e}};function Ot(e,t){if(1&e&&(h.Tb(0,"div"),h.Tb(1,"section",26),h.Tb(2,"h1",27),h.Pc(3,"Upload"),h.Sb(),h.Tb(4,"a",28),h.Tb(5,"mat-icon",2),h.Pc(6,"add"),h.Sb(),h.Tb(7,"span"),h.Pc(8,"Add New"),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.mc("@slide-in-out",void 0),h.Cb(4),h.mc("state",h.sc(4,Nt,h.sc(2,Ft,a.theWork)))}}function At(e,t){1&e&&(h.Tb(0,"div"),h.Tb(1,"section",29),h.Tb(2,"h4",30),h.Pc(3,"or"),h.Sb(),h.Sb(),h.Sb()),2&e&&h.mc("@slide-in-out",void 0)}function Wt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",35),h.bc("click",(function(){return h.Cc(a),h.fc(4).resetSearch()})),h.Tb(1,"mat-icon",2),h.Pc(2,"keyboard_arrow_left"),h.Sb(),h.Sb()}}function Lt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div"),h.Tb(1,"section",31),h.Tb(2,"h1",27),h.Pc(3,"Browse"),h.Sb(),h.Nc(4,Wt,3,0,"a",32),h.Tb(5,"app-thework",33,34),h.bc("workSelected",(function(e){return h.Cc(a),h.fc(3).selectWork(e)}))("onFocus",(function(e){return h.Cc(a),h.fc(3).onWorkSearchFocus(e)})),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(3);h.mc("@slide-in-out",void 0),h.Cb(4),h.mc("ngIf","search-work"==i.addItemAction),h.Cb(1),h.mc("bshowfilters",!1)("bshowaddwork",!1)("bshowdefault",!1)("issingle",!0)("aselectedworkid",i.getSelectedWorkIDArray())}}function Rt(e,t){if(1&e&&(h.Tb(0,"div",38),h.Ob(1,"mat-spinner",39),h.Sb()),2&e){var a=h.fc(4);h.Cb(1),h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function Ut(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Tb(1,"div",46),h.Tb(2,"app-thework-card",47),h.bc("workSelected",(function(e){return h.Cc(a),h.fc(5).selectWork(e)})),h.Sb(),h.Sb(),h.Qb()}if(2&e){var i=t.$implicit,r=h.fc(5);h.Cb(2),h.mc("theWork",i)("isSelected",r.isWorkSelected(i.campaignID))}}function Et(e,t){if(1&e&&(h.Tb(0,"section",40),h.Tb(1,"h3",41),h.Pc(2,"Recent"),h.Sb(),h.Tb(3,"div",42),h.Tb(4,"div",43),h.Tb(5,"div",44),h.Tb(6,"div",45),h.Nc(7,Ut,3,2,"ng-container",23),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(4);h.Cb(7),h.mc("ngForOf",a.aWorkRecent)}}function Mt(e,t){if(1&e&&(h.Rb(0),h.Nc(1,Rt,2,3,"ng-template",null,36,h.Oc),h.Tb(3,"div",16),h.Nc(4,Et,8,1,"section",37),h.Sb(),h.Qb()),2&e){var a=h.zc(2),i=h.fc(3);h.Cb(4),h.mc("ngIf",i.aWorkRecent&&i.bWorkRecentLoaded)("ngIfElse",a)}}function jt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"section",15),h.Tb(1,"div",16),h.Tb(2,"div",17),h.Tb(3,"a",18),h.bc("click",(function(){return h.Cc(a),h.fc(2).clearCampaignName()})),h.Tb(4,"mat-icon",2),h.Pc(5,"edit"),h.Sb(),h.Sb(),h.Tb(6,"h1",19),h.Pc(7),h.Sb(),h.Nc(8,xt,2,0,"button",20),h.Sb(),h.Nc(9,_t,3,3,"ng-container",0),h.Sb(),h.Sb(),h.Nc(10,Ot,9,6,"div",0),h.Nc(11,At,4,1,"div",0),h.Nc(12,Lt,7,7,"div",0),h.Nc(13,Mt,5,2,"ng-container",0)}if(2&e){var i=h.fc(2);h.Cb(7),h.Qc(i.theWork.campaignName),h.Cb(1),h.mc("ngIf",i.theWork.aItems.length),h.Cb(1),h.mc("ngIf",i.theWork.aItems.length),h.Cb(1),h.mc("ngIf",!i.addItemAction.length),h.Cb(1),h.mc("ngIf",!i.addItemAction.length),h.Cb(1),h.mc("ngIf",!i.addItemAction.length||"search-work"==i.addItemAction),h.Cb(1),h.mc("ngIf",!i.addItemAction.length)}}function Gt(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"button",1),h.Tb(2,"mat-icon",2),h.Pc(3,"close"),h.Sb(),h.Sb(),h.Nc(4,Tt,17,2,"ng-container",3),h.Nc(5,jt,14,7,"ng-template",null,4,h.Oc),h.Qb()),2&e){var a=h.zc(6),i=h.fc();h.Cb(1),h.nc("routerLink",-1!==i.router.url.indexOf("item-manager")?"../edit-campaign":"/work"),h.Cb(3),h.mc("ngIf",!i.theWork.campaignName)("ngIfElse",a)}}var zt=function(e){function t(t,a,i,r,n,o,c){var p=e.call(this,c)||this;return p.fb=t,p.location=a,p.route=i,p.router=r,p.title=n,p.theworkService=o,p.fullpageService=c,p.addItemAction="",p.bShow=!1,p.bWorkRecentLoaded=!1,p.paginatedData=new vt.a(0,0,0,1,0,4,[],[],0,0),p}return It(t,e),t.prototype.ngOnInit=function(){history.state.data&&history.state.data.theWork?(this.theWork=history.state.data.theWork,history.state.data.bSave?this.createCampaign(!1):(this.loadRecentWork(),this.bShow=!0),this.title.setTitle("Create Campaign - Adspur")):(this.theWork=new P.a(0,"","","",void 0,0,0,"",!1,0,"",0,"",0,"",0,"","",new Date,void 0,0,"",[],[],0,0,0,0,[],[],[],0),this.bShow=!0,this.title.setTitle("Create Campaign - Adspur")),this.campaignFormGroup=this.fb.group({campaignTitleFormControl:new o.g("",[o.x.required])}),this.campaignSearchFormGroup=this.fb.group({campaignTitleSearchFormControl:new o.g("",[o.x.required])})},t.prototype.onSubmit=function(){this.theWork.campaignName=this.campaignFormGroup.controls.campaignTitleFormControl.value,this.loadRecentWork()},t.prototype.clearCampaignName=function(){this.theWork.campaignName=""},t.prototype.loadRecentWork=function(){var e=this;this.theworkService.getWorks(this.paginatedData,{isSingle:!0}).subscribe((function(t){e.aWorkRecent=t&&t.dataset?t.dataset:void 0,e.bWorkRecentLoaded=!0}))},t.prototype.onWorkSearchFocus=function(e){this.addItemAction="search-work"},t.prototype.selectWork=function(e){this.theWork.aItems.push(e),this.resetSearch()},t.prototype.isWorkSelected=function(e){return!!this.theWork.aItems.filter((function(t){return t.campaignID===e})).length},t.prototype.createCampaign=function(e){var t=this;void 0===e&&(e=!0),this.theworkService.saveCampaign(this.theWork.campaignID,this.theWork.campaignName).switchMap((function(e){return t.theWork.campaignID=e.data.campaignID,t.theWork.campaignID?t.theworkService.saveCampaignItems(t.theWork.campaignID,t.getSelectedWorkIDArray()):Object(g.a)(void 0)})).switchMap((function(e){return t.theworkService.removeLocalWork(t.theWork.campaignID)})).switchMap((function(e){return t.theworkService.getWork(t.theWork.campaignID)})).subscribe((function(a){t.theWork=a,e?-1===t.router.url.indexOf("item-manager")?t.router.navigate(["./"+t.theWork.campaignID+"/success/"],{relativeTo:t.route,state:{data:{theWork:t.theWork}}}):t.router.navigate(["/work/"+t.theWork.campaignID+"/edit-campaign"]):t.router.navigate(["/work/"+t.theWork.campaignID])}))},t.prototype.getSelectedWorkIDArray=function(){return Array.from(new Set(this.theWork.aItems.map((function(e){return e.campaignID}))))},t.prototype.resetSearch=function(){this.TheworkComponent.ngOnInit(),this.location.go(this.router.url.split("?")[0]),this.addItemAction=""},t.\u0275fac=function(e){return new(e||t)(h.Nb(o.f),h.Nb(n.i),h.Nb(c.a),h.Nb(c.c),h.Nb(N.e),h.Nb(P.b),h.Nb(gt.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-campaign"]],viewQuery:function(e,t){var a;1&e&&h.Uc(wt,!0),2&e&&h.yc(a=h.cc())&&(t.TheworkComponent=a.first)},hostVars:1,hostBindings:function(e,t){2&e&&h.Mc("@cascade-in-out",void 0)},features:[h.zb],decls:1,vars:1,consts:[[4,"ngIf"],["mat-icon-button","","aria-label","Cancel and return to the work","matTooltip","Cancel",1,"fullscreen_close",3,"routerLink"],["aria-hidden","true"],[4,"ngIf","ngIfElse"],["add",""],[1,"edit-campaign_step-1","text-center"],[1,"g-page-width","g-page-width"],["mat-icon-button","","routerLink","../","aria-label","Back","matTooltip","Back",1,"edit-campaign_back"],[1,"mat-display-0","mat-type"],[1,"g-page-width","g-page-width","g-page-width--narrow"],["fxLayout","column",1,"dark-theme",3,"formGroup","ngSubmit"],[1,"animate-cascade-block"],["matInput","","aria-label","Campaign Name","autocomplete","off","formControlName","campaignTitleFormControl"],["fxLayout","row-reverse",1,"animate-cascade-block"],["mat-flat-button","","color","accent",3,"disabled"],[1,"edit-campaign_step-2"],[1,"g-page-width"],["fxLayout","","fxLayoutAlign","center","fxLayoutGap","16px"],["mat-icon-button","","aria-label","Edit","matTooltip","Edit",3,"click"],["fxFlex","",1,"mat-h1"],["color","accent","mat-flat-button","",3,"click",4,"ngIf"],["color","accent","mat-flat-button","",3,"click"],["fxLayoutAlign","start stretch","fxLayout","row wrap","fxLayoutGap","8px grid","fxLayoutGap.gt-xs","16px grid",3,"ngStyle"],[4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.sm","33.33","fxFlex.gt-sm","25",1,"animate-card-waterfall"],[3,"theWork"],[1,"edit-campaign_step-3","text-center"],[1,"mat-display-1"],["mat-flat-button","","color","accent","routerLink","./create/single",3,"state"],[1,"edit-campaign_step-4","text-center"],[1,"mat-caption","text-uppercase","text-al-40"],[1,"edit-campaign_step-5","text-center"],["mat-icon-button","","class","edit-campaign_step-5_back","aria-label","Close","matTooltip","Close",3,"click",4,"ngIf"],[3,"bshowfilters","bshowaddwork","bshowdefault","issingle","aselectedworkid","workSelected","onFocus"],["theWorkComponent",""],["mat-icon-button","","aria-label","Close","matTooltip","Close",1,"edit-campaign_step-5_back",3,"click"],["loading",""],["class","edit-campaign_step-6 g-section",4,"ngIf","ngIfElse"],[1,"g-flexbox-centering",2,"min-height","300px"],[3,"color","strokeWidth","diameter"],[1,"edit-campaign_step-6","g-section"],[1,"g-section_title","mat-title","g-fl-l"],[1,"g-h-slider-wrapper","g-clear"],[1,"g-h-slider"],[1,"g-h-slider_item"],["fxLayout","row","fxLayoutAlign","start stretch","fxLayoutGap","8px","fxLayoutGap.gt-xs","16px",1,"g-clear"],["fxFlex","254px",1,"animate-card-waterfall"],[3,"theWork","isSelected","workSelected"]],template:function(e,t){1&e&&h.Nc(0,Gt,7,3,"ng-container",0),2&e&&h.mc("ngIf",t.bShow)},directives:[n.n,U.b,Ct.b,c.d,E.a,U.a,c.f,o.y,o.r,R.e,o.j,St.c,St.g,kt.b,o.c,o.q,o.i,R.d,R.f,R.b,n.o,L.c,n.m,H.a,yt.a,W.c],styles:["app-campaign{display:block;position:relative;height:inherit}app-campaign .edit-campaign_back{position:absolute;left:4px;top:0;z-index:1;color:#fff}app-campaign>.fullscreen_close{color:#fff}app-campaign .mat-form-field-appearance-legacy{margin-bottom:24px}app-campaign .g-page-width{padding-left:16px;padding-right:16px}app-campaign .edit-campaign_step-1{background-color:#37474f;color:#fff;height:100vh;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:scroll;padding-top:110px}app-campaign .edit-campaign_step-1 form{margin-top:80px;padding-bottom:112px}@media (min-width:960px){app-campaign .edit-campaign_step-1 form{margin-top:120px}}app-campaign .edit-campaign_step-2{background-color:#37474f;color:#fff;padding-top:110px;padding-bottom:54px;margin-bottom:54px}app-campaign .edit-campaign_step-2 .mat-h1{padding-top:4px;margin-bottom:0}app-campaign .edit-campaign_step-2 .g-h-slider-wrapper{margin-top:24px}app-campaign .edit-campaign_step-2 .g-h-slider-wrapper:after{background:-webkit-gradient(linear,right top,left top,from(#37474f),to(hsla(0,0%,100%,0)));background:linear-gradient(270deg,#37474f 0,hsla(0,0%,100%,0))}app-campaign .edit-campaign_step-3 .mat-display-1{margin-bottom:16px}app-campaign .edit-campaign_step-4{padding:40px 16px}app-campaign .edit-campaign_step-4 .mat-caption{margin:0}app-campaign .edit-campaign_step-5{position:relative}app-campaign .edit-campaign_step-5 .mat-display-1{margin-bottom:16px}app-campaign .edit-campaign_step-5 .edit-campaign_step-5_back{position:absolute;top:0;left:50%;margin-left:-150px}app-campaign .edit-campaign_step-5 .work_search-wrapper{position:static!important;max-width:300px;margin:0 auto}app-campaign .edit-campaign_step-5 .work_header-wrapper{padding-bottom:16px;margin-bottom:0}app-campaign .edit-campaign_step-6{margin-top:0;margin-bottom:56px;min-height:300px;-webkit-box-sizing:border-box;box-sizing:border-box}app-campaign .mat-headline{color:inherit}"],encapsulation:2,data:{animation:[ft.a,ft.c]}}),t}(ht.a),Qt=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),Bt=function(e){function t(t,a,i){var r=e.call(this,i)||this;return r.router=t,r.title=a,r.fullpageService=i,r.title.setTitle("Create - Adspur"),r}return Qt(t,e),t.prototype.onKeydownHandler=function(e){this.router.navigate(["/work"])},t.prototype.ngOnInit=function(){history.state.data&&history.state.data.theWork&&(this.theWork=history.state.data.theWork)},t.\u0275fac=function(e){return new(e||t)(h.Nb(c.c),h.Nb(N.e),h.Nb(gt.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-create"]],hostBindings:function(e,t){1&e&&h.bc("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,h.Bc)},features:[h.zb],decls:30,vars:0,consts:[["mat-icon-button","","routerLink","/work","aria-label","Cancel and return to the work","matTooltip","Cancel",1,"fullscreen_close"],["aria-hidden","true"],["fxLayout","column","fxLayoutAlign","none none","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start start"],["fxFlex","","mat-button","","routerLink","./single",1,"page-half"],[1,"mat-display-0","mat-type"],[1,"mat-caption"],["fxLayout","row-reverse","fxLayoutGap","8px","fxLayoutAlign","center center","fxLayoutAlign.gt-sm","start center",1,"dummy-directory"],["color","accent","aria-hidden","true"],["fxHide.lt-md","","aria-hidden","true",1,"dummy-directory--hidden"],[1,"page-join","mat-type","bg-teal","text-uppercase"],["fxFlex","","mat-button","","routerLink","./campaign",1,"page-half","bg-primary"],["fxLayout","","fxLayoutGap","8px","fxLayoutAlign","center center","fxLayoutAlign.gt-sm","start center",1,"dummy-directory"]],template:function(e,t){1&e&&(h.Tb(0,"button",0),h.Tb(1,"mat-icon",1),h.Pc(2,"close"),h.Sb(),h.Sb(),h.Tb(3,"section",2),h.Tb(4,"a",3),h.Tb(5,"h1",4),h.Pc(6," Create Single "),h.Sb(),h.Tb(7,"p",5),h.Pc(8,"One work item used in isolation, can have multiple files"),h.Sb(),h.Tb(9,"div",6),h.Tb(10,"mat-icon",7),h.Pc(11,"folder"),h.Sb(),h.Tb(12,"mat-icon",8),h.Pc(13,"folder"),h.Sb(),h.Tb(14,"mat-icon",8),h.Pc(15,"folder"),h.Sb(),h.Sb(),h.Sb(),h.Tb(16,"strong",9),h.Pc(17,"or"),h.Sb(),h.Tb(18,"a",10),h.Tb(19,"h1",4),h.Pc(20," Create Campaign "),h.Sb(),h.Tb(21,"p",5),h.Pc(22,"Multiple work items which formed a creative campaign"),h.Sb(),h.Tb(23,"div",11),h.Tb(24,"mat-icon",7),h.Pc(25,"folder"),h.Sb(),h.Tb(26,"mat-icon",7),h.Pc(27,"folder"),h.Sb(),h.Tb(28,"mat-icon",7),h.Pc(29,"folder"),h.Sb(),h.Sb(),h.Sb(),h.Sb())},directives:[U.b,c.d,Ct.b,E.a,R.e,R.d,U.a,c.f,R.b,R.f,L.b],styles:["app-create{display:block;height:inherit}@media (min-width:960px){app-create>.mat-icon-button{color:#fff}}app-create section{height:100vh}app-create .page-half{height:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;text-decoration:none;text-align:center;border-radius:0;padding:56px 16px 16px}@media (min-width:960px){app-create .page-half{padding:110px 54px 54px}}app-create .page-half:not(.bg-primary){padding-top:16px;padding-bottom:8px}@media (min-width:960px){app-create .page-half:not(.bg-primary){text-align:right;padding-top:110px;padding-bottom:54px;padding-left:16px}}app-create .page-half.bg-primary{padding-top:48px;padding-bottom:16px}@media (min-width:960px){app-create .page-half.bg-primary{text-align:left;padding-top:110px;padding-bottom:54px;padding-right:16px}}app-create .page-half:hover .mat-icon{-webkit-transform:scale(1.1);transform:scale(1.1)}app-create .page-join{z-index:1;line-height:60px;width:60px;font-size:18px;margin:-30px auto;border-radius:120px;text-align:center;font-weight:400}@media (min-width:960px){app-create .page-join{margin:103px -30px 0}}app-create .dummy-directory .dummy-directory--hidden{color:transparent}app-create .dummy-directory .mat-icon{height:60px;width:60px;font-size:60px}app-create .dummy-directory .mat-icon:not(.dummy-directory--hidden){-webkit-transition:-webkit-transform .25s cubic-bezier(.33,.66,.66,1);transition:-webkit-transform .25s cubic-bezier(.33,.66,.66,1);transition:transform .25s cubic-bezier(.33,.66,.66,1);transition:transform .25s cubic-bezier(.33,.66,.66,1),-webkit-transform .25s cubic-bezier(.33,.66,.66,1)}app-create .dummy-directory .mat-icon:not(.dummy-directory--hidden):nth-child(2){-webkit-transition-delay:75ms;transition-delay:75ms}app-create .dummy-directory .mat-icon:not(.dummy-directory--hidden):nth-child(3){-webkit-transition-delay:.15s;transition-delay:.15s}@media (min-width:960px){app-create .dummy-directory .mat-icon{height:10vw;width:10vw;font-size:10vw}}"],encapsulation:2}),t}(ht.a),$t=a("kvHC"),Vt=a("/1cH"),Ht=(a("MSNS"),a("4XzM"),a("S7rW"),a("A5z7")),qt=a("FKr1"),Kt=["focusMe"],Yt=["searchterminput"];function Jt(e,t){1&e&&(h.Tb(0,"mat-icon",13),h.Pc(1,"cancel"),h.Sb())}function Xt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"mat-chip",11),h.bc("removed",(function(){h.Cc(a);var e=t.$implicit;return h.fc().removeSelectedChip(e)})),h.Pc(1),h.Nc(2,Jt,2,0,"mat-icon",12),h.Sb()}if(2&e){var i=t.$implicit,r=h.fc();h.mc("selectable",r.selectable)("removable",r.removable),h.Cb(1),h.Rc(" ",i[r.itemNameProperty]," "),h.Cb(1),h.mc("ngIf",r.removable)}}function Zt(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",14),h.bc("click",(function(){return h.Cc(a),h.fc().clearSearchTerm()})),h.Tb(1,"mat-icon",15),h.Pc(2,"close"),h.Sb(),h.Sb()}}function ea(e,t){1&e&&(h.Tb(0,"mat-icon",19),h.Pc(1,"add"),h.Sb())}var ta=function(){return{"align-self":"center","margin-right":0}};function aa(e,t){1&e&&(h.Rb(0),h.Ob(1,"span",20),h.Tb(2,"mat-icon",21),h.Pc(3,"check"),h.Sb(),h.Qb()),2&e&&(h.Cb(2),h.mc("ngStyle",h.rc(1,ta)))}function ia(e,t){if(1&e&&(h.Tb(0,"mat-option",16),h.Nc(1,ea,2,0,"mat-icon",17),h.Pc(2),h.Nc(3,aa,4,2,"ng-container",18),h.Sb()),2&e){var a=t.$implicit,i=h.fc();h.mc("value",a)("ngClass",0===a[i.itemIdProperty]?"custom_autocomplete-highlight":""),h.Cb(1),h.mc("ngIf",0===a[i.itemIdProperty]),h.Cb(1),h.Rc(" ",a[i.itemNameProperty]," "),h.Cb(1),h.mc("ngIf",null==a?null:a.added)}}var ra=function(){function e(e){this.fb=e,this.addOnBlur=!0,this.removable=!0,this.selectable=!0,this.aFilteredItem=[],this.aSelectedItem=[],this.clearSelectedAction=new h.o,this.searchAction=new h.o,this.selectAction=new h.o,this.removeSelectedAction=new h.o,this.createCreditSearchForm()}return Object.defineProperty(e.prototype,"searchTerm",{set:function(e){e&&this.setSearchTerm(e)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this.subscription=this.panelClosingActions()},e.prototype._subscribeAgain=function(){this.subscription&&this.subscription.unsubscribe(),this.subscription=this.panelClosingActions(!0)},e.prototype.panelClosingActions=function(e){var t=this;return void 0===e&&(e=!1),this.trigger.panelClosingActions.map((function(a){a||(t.setSearchTerm(null),t._subscribeAgain(),e?t.focusSearchTermInput():Object(g.a)(void 0))}),(function(e){return console.log("error",e)}))},e.prototype.createCreditSearchForm=function(){var e=this;this.creditSearchFormGroup=this.fb.group({creditSearchTermFormControl:new o.g({value:"",disabled:!1},[o.x.required])}),this.creditSearchFormGroup.get("creditSearchTermFormControl").valueChanges.map((function(t){return t.hasOwnProperty(e.itemIdProperty)||(e.creditSearchTerm=t),t})).debounceTime(500).startWith(null).map((function(t){return e.searchAction.emit(t)})).subscribe()},e.prototype.clearSearchTerm=function(){this.aFilteredItem=[],this.setSearchTerm(""),this.resetSearchTermInput(),this.focusSearchTermInput(),this.clearSelectedAction.emit()},e.prototype.setSearchTerm=function(e){this.searchterminput.nativeElement.value=e,this.creditSearchFormGroup.get("creditSearchTermFormControl").setValue(e),this.creditSearchFormGroup.get("creditSearchTermFormControl").updateValueAndValidity({onlySelf:!0})},e.prototype.resetSearchTermInput=function(){this.creditSearchFormGroup.get("creditSearchTermFormControl").reset("")},e.prototype.focusSearchTermInput=function(){var e=this;setTimeout((function(){e.searchterminput.nativeElement.focus()}),0)},e.prototype.selectItem=function(e){if(this.aFilteredItem=void 0,e.option&&e.option.value&&0!==e.option.value[this.itemIdProperty])this.selectAction.emit(e.option.value);else{var t={};t[this.itemIdProperty]=0,t[this.itemNameProperty]=this.creditSearchTerm,this.selectAction.emit(t)}},e.prototype.onKeyDown=function(e){if(null!==this.trigger.activeOption&&this.trigger.activeOption.value)this.selectItem({option:{value:this.trigger.activeOption.value}});else if(this.creditSearchTerm&&this.creditSearchTerm.length){var t={};t[this.itemIdProperty]=0,t[this.itemNameProperty]="",this.selectItem({option:{value:t}})}},e.prototype.removeSelectedChip=function(e){this.removeSelectedAction.emit(e)},e.\u0275fac=function(t){return new(t||e)(h.Nb(o.f))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-manage-credits-search"]],viewQuery:function(e,t){var a;1&e&&(h.Uc(Vt.c,!0),h.Uc(Kt,!0),h.Uc(Yt,!0)),2&e&&(h.yc(a=h.cc())&&(t.trigger=a.first),h.yc(a=h.cc())&&(t._focusMe=a.first),h.yc(a=h.cc())&&(t.searchterminput=a.first))},inputs:{fieldLabel:"fieldLabel",chipListLabel:"chipListLabel",aFilteredItem:"aFilteredItem",displayFnItem:"displayFnItem",itemIdProperty:"itemIdProperty",itemNameProperty:"itemNameProperty",aSelectedItem:"aSelectedItem",searchTerm:"searchTerm"},outputs:{clearSelectedAction:"clearSelectedAction",searchAction:"searchAction",selectAction:"selectAction",removeSelectedAction:"removeSelectedAction"},decls:14,vars:9,consts:[["fxFlex","","tabindex","-1",3,"formGroup"],["focusMe",""],["aria-label","{chipListLabel}"],["itemChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","tabIndex","0","aria-label","{fieldLabel}","autocomplete","off","formControlName","creditSearchTermFormControl",3,"matAutocomplete","matChipInputFor","matChipInputAddOnBlur","keydown.enter","keydown.tab"],["searchterminput",""],["mat-icon-button","","matSuffix","","tabIndex","-1",3,"click",4,"ngIf"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value","ngClass",4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["mat-icon-button","","matSuffix","","tabIndex","-1",3,"click"],["aria-label","Clear search"],[3,"value","ngClass"],["aria-hidden","true",4,"ngIf"],[4,"ngIf"],["aria-hidden","true"],["fxFlex",""],["aria-label","added",1,"text-success",3,"ngStyle"]],template:function(e,t){if(1&e&&(h.Tb(0,"form",0,1),h.Tb(2,"mat-form-field"),h.Tb(3,"mat-label"),h.Pc(4),h.Sb(),h.Tb(5,"mat-chip-list",2,3),h.Nc(7,Xt,3,4,"mat-chip",4),h.Tb(8,"input",5,6),h.bc("keydown.enter",(function(e){return t.onKeyDown(e)}))("keydown.tab",(function(e){return t.onKeyDown(e)})),h.Sb(),h.Sb(),h.Nc(10,Zt,3,0,"button",7),h.Sb(),h.Tb(11,"mat-autocomplete",8,9),h.bc("optionSelected",(function(e){return t.selectItem(e)})),h.Nc(13,ia,4,5,"mat-option",10),h.Sb(),h.Sb()),2&e){var a=h.zc(6),i=h.zc(12);h.mc("formGroup",t.creditSearchFormGroup),h.Cb(4),h.Qc(t.fieldLabel),h.Cb(3),h.mc("ngForOf",t.aSelectedItem),h.Cb(1),h.mc("matAutocomplete",i)("matChipInputFor",a)("matChipInputAddOnBlur",t.addOnBlur),h.Cb(2),h.mc("ngIf",(null==t.creditSearchFormGroup.get("creditSearchTermFormControl").value?null:t.creditSearchFormGroup.get("creditSearchTermFormControl").value.length)||t.aSelectedItem.length),h.Cb(1),h.mc("displayWith",t.displayFnItem.bind(t)),h.Cb(2),h.mc("ngForOf",t.aFilteredItem)}},directives:[o.y,o.r,R.b,o.j,St.c,St.g,Ht.c,n.m,kt.b,o.c,Vt.c,Ht.b,o.q,o.i,n.n,Vt.a,Ht.a,E.a,Ht.d,U.b,St.i,qt.p,n.l,L.a,n.o,L.c],styles:[""]}),e}(),na=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),oa=["manageCreditCompanySearch"],ca=["creditcompanynameinput"];function pa(e,t){1&e&&h.Pb(0)}function la(e,t){}function sa(e,t){1&e&&h.Nc(0,la,0,0,"ng-template")}function ma(e,t){if(1&e&&h.Ob(0,"mat-spinner",10),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function da(e,t){if(1&e&&(h.Rb(0),h.Pc(1),h.Qb()),2&e){var a=t.$implicit;h.Cb(1),h.Rc(", ",a.creditCompanyTypeName,"")}}function ua(e,t){if(1&e&&(h.Tb(0,"span",30),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.Cb(1),h.Qc(a.creditPersonName)}}function ba(e,t){if(1&e&&(h.Tb(0,"li",26),h.Tb(1,"h5",27),h.Pc(2),h.Sb(),h.Tb(3,"div",28),h.Nc(4,ua,2,1,"span",29),h.Sb(),h.Sb()),2&e){var a=t.$implicit;h.Cb(2),h.Qc(a.creditRoleName),h.Cb(2),h.mc("ngForOf",a.aCreditPerson)}}function fa(e,t){if(1&e&&(h.Tb(0,"ol",24),h.Nc(1,ba,5,2,"li",25),h.Sb()),2&e){var a=h.fc().$implicit;h.Cb(1),h.mc("ngForOf",a.aCreditRole)}}function ga(e,t){if(1&e&&(h.Tb(0,"div",24),h.Tb(1,"a",31),h.Tb(2,"mat-icon",3),h.Pc(3,"add"),h.Sb(),h.Tb(4,"span"),h.Pc(5,"Add Credits"),h.Sb(),h.Sb(),h.Ob(6,"br"),h.Ob(7,"br"),h.Sb()),2&e){var a=h.fc().$implicit;h.Cb(1),h.mc("routerLink","./manage/"+a.creditCompanyID)}}function ha(e,t){if(1&e&&(h.Tb(0,"div",15),h.Tb(1,"div",16),h.Tb(2,"mat-icon",17),h.Pc(3,"drag_handle"),h.Sb(),h.Tb(4,"h2",18),h.Pc(5),h.Tb(6,"span",19),h.Nc(7,da,2,1,"ng-container",20),h.Sb(),h.Sb(),h.Tb(8,"a",21),h.Tb(9,"mat-icon",3),h.Pc(10,"keyboard_arrow_right"),h.Sb(),h.Sb(),h.Sb(),h.Nc(11,fa,2,1,"ol",22),h.Nc(12,ga,8,1,"ng-template",null,23,h.Oc),h.Sb()),2&e){var a=t.$implicit,i=h.zc(13);h.Cb(5),h.Rc(" ",a.creditCompanyName,""),h.Cb(2),h.mc("ngForOf",a.aCreditCompanyType),h.Cb(1),h.mc("routerLink","./manage/"+a.creditCompanyID),h.Cb(3),h.mc("ngIf",a.aCreditRole.length>0)("ngIfElse",i)}}function ya(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Tb(1,"section",12),h.bc("cdkDropListDropped",(function(e){return h.Cc(a),h.fc(2).dropCompany(e)})),h.Tb(2,"div",13),h.Nc(3,ha,14,5,"div",14),h.Sb(),h.Sb(),h.Qb()}if(2&e){var i=h.fc(2);h.Cb(3),h.mc("ngForOf",i.aCredit)}}function va(e,t){if(1&e&&h.Nc(0,ya,4,1,"ng-container",11),2&e){var a=h.fc();h.mc("ngIf",a.aCredit.length>0)}}function Ca(e,t){1&e&&(h.Rb(0),h.Tb(1,"section",36),h.Tb(2,"div",37),h.Tb(3,"h4",38),h.Pc(4,"Get Started"),h.Sb(),h.Tb(5,"p",39),h.Pc(6,"First add a company, then you can add credits to it"),h.Sb(),h.Sb(),h.Sb(),h.Qb())}function Sa(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Tb(1,"div",41),h.Tb(2,"h4",38),h.Pc(3,"Suggested Company"),h.Sb(),h.Tb(4,"div",42),h.Tb(5,"p",43),h.Tb(6,"strong"),h.Pc(7),h.Sb(),h.Pc(8,", Agency"),h.Sb(),h.Tb(9,"button",44),h.bc("click",(function(){h.Cc(a);var e=t.$implicit;return h.fc(3).setCreditCompany(e)})),h.Tb(10,"mat-icon",3),h.Pc(11,"add"),h.Sb(),h.Tb(12,"span"),h.Pc(13,"Add Company"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Qb()}if(2&e){var i=t.$implicit;h.Cb(7),h.Qc(i.agencyName)}}function ka(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"section",40),h.Nc(2,Sa,14,1,"ng-container",20),h.Sb(),h.Qb()),2&e){var a=h.fc(2);h.Cb(2),h.mc("ngForOf",a.aAgency)}}var Ia=function(){return[]};function wa(e,t){if(1&e){var a=h.Ub();h.Nc(0,Ca,7,0,"ng-container",11),h.Tb(1,"div",32),h.Tb(2,"label",33),h.Pc(3,"Add Company"),h.Sb(),h.Tb(4,"app-manage-credits-search",34,35),h.bc("clearSelectedAction",(function(e){return h.Cc(a),h.fc().clearSelectedActionCompany(e)}))("removeSelectedAction",(function(e){return h.Cc(a),h.fc().removeSelectedActionCompany(e)}))("searchAction",(function(e){return h.Cc(a),h.fc().searchActionCompany(e)}))("selectAction",(function(e){return h.Cc(a),h.fc().selectActionCompany(e)})),h.Sb(),h.Sb(),h.Nc(6,ka,3,1,"ng-container",11)}if(2&e){var i=h.fc();h.mc("ngIf",i.aCredit&&0===i.aCredit.length),h.Cb(4),h.mc("searchTerm",null==i.creditCompany?null:i.creditCompany.creditCompanyName)("aFilteredItem",i.aCreditCompany)("aSelectedItem",h.rc(10,Ia))("chipListLabel","Company Selection")("displayFnItem",i.displayFnCompanyName)("fieldLabel","New Company Name")("itemNameProperty","creditCompanyName")("itemIdProperty","creditCompanyID"),h.Cb(2),h.mc("ngIf",i.theWork&&i.theWork.aAgency&&i.theWork.aAgency.length)}}var Ta=function(e){function t(t,a,i,r,n,o){var c=e.call(this,r)||this;return c.creditService=t,c.route=a,c.theworkService=i,c.fullpageService=r,c.router=n,c.userAlertService=o,c}return na(t,e),t.prototype.ngOnInit=function(){var e=this;this.theworkService.getWork(this.route.snapshot.paramMap.get("singleCampaignID")?parseInt(this.route.snapshot.paramMap.get("singleCampaignID")):parseInt(this.route.snapshot.paramMap.get("campaignID"))).map((function(t){return e.theWork=t,t})).switchMap((function(t){return e.creditService.getcreditbyassetid(t.assetID)})).map((function(t){e.aCredit=t})).switchMap((function(){return e.creditService.indexcreditcompanytype()})).map((function(t){return e.aCreditCompanyType=t})).map((function(){return e.aAgency=e.aCredit&&e.aCredit.length?e.theWork.aAgency.filter((function(t){return!e.aCredit.find((function(e){return e.creditCompanyName===t.agencyName}))})):e.theWork.aAgency})).subscribe()},t.prototype.setCreditCompanyAndRedirect=function(e){var t=this;return this.creditCompany=e,this.creditCompany.hasOwnProperty("aCreditCompanyTypeID")?this.creditService.saveassetcreditcompany(this.theWork.assetID,this.creditCompany.creditCompanyID,this.creditCompany.aCreditCompanyTypeID).map((function(e){return t.router.navigate(["./manage/"+t.creditCompany.creditCompanyID],{relativeTo:t.route})})):Object(g.a)(void 0).map((function(){return t.router.navigate(["./manage-company/"+t.creditCompany.creditCompanyID],{relativeTo:t.route})}))},t.prototype.dropCompany=function(e){var t=this,a=this.aCredit[e.previousIndex].creditCompanyID;Object(r.e)(this.aCredit,e.previousIndex,e.currentIndex),this.creditService.reordercreditcompany(this.theWork.assetID,a,e.currentIndex+1).switchMap((function(a){return a?t.userAlertService.alertUser("Companies reordered",_.c,_.b).map((function(){t.aCredit.forEach((function(e,t){e.displayOrder=t+1}))})):t.userAlertService.alertUser("Failed to reorder companies",_.c,_.b).map((function(){Object(r.e)(t.aCredit,e.currentIndex,e.previousIndex)}))})).subscribe()},t.prototype.displayFnCompanyName=function(e){return e&&"string"==typeof e?e:e&&e.creditCompanyName?e.creditCompanyName:void 0},t.prototype.setCreditCompany=function(e){this.creditCompanyName=e.agencyName,this.selectActionCompany({creditCompanyID:0,creditCompanyName:e.agencyName,aCreditCompanyTypeID:[this.aCreditCompanyType.find((function(e){return"Agency"===e.creditCompanyTypeName})).creditCompanyTypeID]})},t.prototype.clearSelectedActionCompany=function(){this.creditCompany=void 0,this.aCreditCompany=void 0,this.manageCreditCompanySearch.clearSearchTerm(),this.manageCreditCompanySearch.resetSearchTermInput(),this.manageCreditCompanySearch.focusSearchTermInput()},t.prototype.searchActionCompany=function(e){var t=this;e&&e.length&&!this.creditCompany?this.creditService.searchcreditcompany(e).map((function(e){t.aCreditCompany=e?e.filter((function(e){return!t.aCredit.find((function(t){return t.creditCompanyID===e.creditCompanyID}))})):[],t.aCreditCompany.find((function(e){return e.creditCompanyName===t.creditCompanyName}))||t.aCreditCompany.push({creditCompanyName:"Add New Company",creditCompanyID:0})})).subscribe():this.aCreditCompany=[]},t.prototype.selectActionCompany=function(e){var t=this;this.aCreditCompany=void 0,e&&(0===e.creditCompanyID?this.creditService.createcreditcompany(e.creditCompanyName).switchMap((function(a){return e&&e.hasOwnProperty("aCreditCompanyTypeID")&&(a.aCreditCompanyTypeID=e.aCreditCompanyTypeID),a?t.userAlertService.alertUser("Company created",_.c,_.b).switchMap((function(){return t.setCreditCompanyAndRedirect(a)})):t.userAlertService.alertUser("Failed to create company",_.c,_.b).map((function(){t.manageCreditCompanySearch.clearSearchTerm(),t.manageCreditCompanySearch.resetSearchTermInput(),t.manageCreditCompanySearch.focusSearchTermInput()}))})).subscribe():this.setCreditCompanyAndRedirect(e).subscribe())},t.\u0275fac=function(e){return new(e||t)(h.Nb($t.a),h.Nb(c.a),h.Nb(P.b),h.Nb(gt.a),h.Nb(c.c),h.Nb(_.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-credits"]],viewQuery:function(e,t){var a;1&e&&(h.Uc(oa,!0),h.Uc(ca,!0)),2&e&&(h.yc(a=h.cc())&&(t.manageCreditCompanySearch=a.first),h.yc(a=h.cc())&&(t.creditcompanynameinput=a.first))},features:[h.zb],decls:17,vars:3,consts:[[1,"fullscreen_header","g-page-width","text-center"],[1,"mat-display-0","mat-type"],["mat-icon-button","","aria-label","Back","MatTooltip","Back",3,"routerLink"],["aria-hidden","true"],[4,"ngTemplateOutlet"],["loading",""],["fxLayout","row","fxLayoutAlign","end start",1,"g-page-width","g-page-width--narrow"],["mat-flat-button","","color","accent","routerLink","../"],["creditViewAll",""],["creditCompanyForm",""],[3,"color","strokeWidth","diameter"],[4,"ngIf"],["cdkDropList","",1,"g-page-width","g-page-width--narrow","g-section",3,"cdkDropListDropped"],[2,"margin-left","-42px"],["cdkDrag","","class","credit-block",4,"ngFor","ngForOf"],["cdkDrag","",1,"credit-block"],["fxLayout","","fxLayoutAlign","start start","fxLayoutGap","16px"],["cdkDragHandle","","aria-hidden","true",1,"credit-block_drag-handle","text-al-40"],["fxFlex","",1,"mat-title"],[1,"light"],[4,"ngFor","ngForOf"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["style","padding-left: 42px;",4,"ngIf","ngIfElse"],["noCredits",""],[2,"padding-left","42px"],["class","credit-block_role mat-type","fxLayout","row wrap","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"credit-block_role","mat-type"],["fxFlex","100","fxFlex.gt-xs","30",1,"credit-block_role-title"],["fxFlex","100","fxFlex.gt-xs","70",1,"credit-block_person-list"],["class","comma-item",4,"ngFor","ngForOf"],[1,"comma-item"],["mat-flat-button","",3,"routerLink"],[1,"g-page-width","g-page-width--narrow","g-section","credits_company-form"],["for","mat-input-1",1,"mat-subheading-1"],["fxLayout","column",3,"searchTerm","aFilteredItem","aSelectedItem","chipListLabel","displayFnItem","fieldLabel","itemNameProperty","itemIdProperty","clearSelectedAction","removeSelectedAction","searchAction","selectAction"],["manageCreditCompanySearch",""],[1,"g-page-width","g-page-width--narrow","g-section","credits_empty-state"],[1,"alert","is-issue"],[1,"mat-caption"],[1,"mat-subheading-2"],[1,"g-page-width","g-page-width--narrow","g-section","credits_suggested"],[1,"alert","is-info"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","16px"],["fxFlex","",1,"mat-subheading-2"],["mat-stroked-button","",1,"g-fl-r",3,"click"]],template:function(e,t){if(1&e&&(h.Tb(0,"header",0),h.Tb(1,"h1",1),h.Pc(2,"Manage Credits"),h.Sb(),h.Tb(3,"a",2),h.Tb(4,"mat-icon",3),h.Pc(5,"arrow_back"),h.Sb(),h.Sb(),h.Sb(),h.Nc(6,pa,1,0,"ng-container",4),h.Nc(7,sa,1,0,void 0,4),h.Nc(8,ma,1,3,"ng-template",null,5,h.Oc),h.Tb(10,"div",6),h.Tb(11,"a",7),h.Pc(12," Done "),h.Sb(),h.Sb(),h.Nc(13,va,1,1,"ng-template",null,8,h.Oc),h.Nc(15,wa,7,11,"ng-template",null,9,h.Oc)),2&e){var a=h.zc(9),i=h.zc(14),r=h.zc(16);h.Cb(3),h.mc("routerLink","../"),h.Cb(3),h.mc("ngTemplateOutlet",r),h.Cb(1),h.mc("ngTemplateOutlet",t.aCredit?i:a)}},directives:[U.a,c.f,E.a,n.s,R.e,R.d,W.c,n.n,r.c,n.m,r.a,R.f,r.b,R.b,ra,U.b],styles:["app-credits{display:block;padding-top:56px;padding-bottom:112px}app-credits .g-section{padding:0 16px}app-credits header{position:relative}app-credits header .mat-icon-button{position:absolute;left:0;top:6px}app-credits .credit-block .mat-title{font-size:18px;margin-bottom:6px}app-credits .credits_company-form{-webkit-box-sizing:border-box;box-sizing:border-box}app-credits label.mat-subheading-1{margin-bottom:-12px;display:block;font-weight:700}app-credits form{margin:24px 0}app-credits mat-form-field{width:100%}app-credits .mat-checkbox{margin:12px 0;display:block}app-credits .credits_empty-state,app-credits .credits_suggested{-webkit-box-sizing:border-box;box-sizing:border-box;padding-top:0}app-credits .credits_empty-state .alert,app-credits .credits_suggested .alert{margin-top:0}app-credits .credits_empty-state .alert .mat-caption,app-credits .credits_suggested .alert .mat-caption{margin-bottom:-8px}app-credits .credits_empty-state .alert .mat-subheading-2,app-credits .credits_suggested .alert .mat-subheading-2{margin-bottom:0}"],encapsulation:2}),t}(ht.a),xa=a("eIep"),Da=a("lJxs"),Pa=(a("DlyV"),a("iadO")),_a=a("f0Wu"),Fa=a("Vzee"),Na=a("oHz9"),Oa=a("aorJ"),Aa=a("kj27"),Wa=a("VgEc"),La=a("d3UM"),Ra=a("f0Cb"),Ua=a("bSwM");function Ea(e,t){1&e&&(h.Rb(0),h.Pc(1,"Edit"),h.Qb())}function Ma(e,t){1&e&&(h.Rb(0),h.Pc(1,"Create"),h.Qb())}var ja=function(e){return{theWork:e}},Ga=function(e){return{data:e}};function za(e,t){if(1&e&&(h.Tb(0,"a",22),h.Tb(1,"mat-icon",23),h.Pc(2,"close"),h.Sb(),h.Sb()),2&e){var a=h.fc(2);h.mc("state",h.sc(3,Ga,h.sc(1,ja,a.parentTheWork)))}}function Qa(e,t){1&e&&(h.Tb(0,"a",24),h.Tb(1,"mat-icon",23),h.Pc(2,"close"),h.Sb(),h.Sb())}function Ba(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Tb(1,"button",25),h.bc("click",(function(){return h.Cc(a),h.fc(2).saveTheWork()})),h.Pc(2," Update Work "),h.Sb(),h.Qb()}if(2&e){var i=h.fc(2);h.Cb(1),h.mc("disabled",i.isDisabled())}}function $a(e,t){if(1&e&&(h.Tb(0,"mat-option",26),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.mc("value",a.agencyID),h.Cb(1),h.Rc(" ",a.agencyName," ")}}function Va(e,t){if(1&e&&(h.Tb(0,"mat-option",26),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.mc("value",a.agencyID),h.Cb(1),h.Rc(" ",a.agencyName," ")}}function Ha(e,t){1&e&&(h.Rb(0),h.Tb(1,"h5",28),h.Pc(2,"Checking for duplicates\u2026"),h.Sb(),h.Qb())}function qa(e,t){if(1&e&&h.Ob(0,"app-thework-card",38),2&e){var a=h.fc().$implicit;h.mc("routerLinkTarget","../../"+a.campaignID+(!a.isSingle&&a.aAssets&&a.aAssets.length&&a.aAssets.length>0?"/"+a.aAssets[0].campaignID:""))("theWork",a)}}function Ka(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-thework-card",39),h.bc("workSelected",(function(e){return h.Cc(a),h.fc(5).selectExistingWork(e)})),h.Sb()}if(2&e){var i=h.fc().$implicit;h.mc("theWork",i)}}function Ya(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"div",35),h.Nc(2,qa,1,2,"app-thework-card",36),h.Nc(3,Ka,1,1,"app-thework-card",37),h.Sb(),h.Qb()),2&e){var a=h.fc(4);h.Cb(2),h.mc("ngIf",!a.parentTheWork),h.Cb(1),h.mc("ngIf",a.parentTheWork)}}var Ja=function(){return{"padding-bottom":"24px"}};function Xa(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",29),h.Tb(1,"div",30),h.Tb(2,"h4",3),h.Pc(3,"Did you mean one of the following?"),h.Sb(),h.Tb(4,"section",31),h.Nc(5,Ya,4,2,"ng-container",32),h.Sb(),h.Tb(6,"div",33),h.Tb(7,"button",34),h.bc("click",(function(){return h.Cc(a),h.fc(3).hideExistingWork()})),h.Pc(8," Nope, It's New "),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(3);h.mc("@slide-in-out",void 0),h.Cb(4),h.mc("ngStyle",h.rc(3,Ja)),h.Cb(1),h.mc("ngForOf",i.aExistingWork)}}function Za(e,t){if(1&e&&(h.Tb(0,"div"),h.Nc(1,Ha,3,0,"ng-container",4),h.Nc(2,Xa,9,4,"div",27),h.Sb()),2&e){var a=h.fc(2);h.mc("@slide-in-out",void 0),h.Cb(1),h.mc("ngIf",a.isSearching),h.Cb(1),h.mc("ngIf",!a.isSearching&&a.aExistingWork)}}function ei(e,t){if(1&e&&(h.Tb(0,"mat-option",26),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.mc("value",a.agencyID),h.Cb(1),h.Rc(" ",a.agencyName," ")}}function ti(e,t){if(1&e&&(h.Rb(0,61),h.Tb(1,"mat-form-field",62),h.Tb(2,"mat-label"),h.Pc(3,"Additional Agency"),h.Sb(),h.Tb(4,"mat-select",63),h.Nc(5,ei,2,2,"mat-option",15),h.Sb(),h.Sb(),h.Qb()),2&e){var a=t.index,i=h.fc(3);h.Cb(1),h.mc("formGroupName",a),h.Cb(4),h.mc("ngForOf",i.getAgencyArray(i.getExistingAgencyIDArray()[a]))}}function ai(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"mat-option",26),h.Pc(2),h.Sb(),h.Ob(3,"mat-divider"),h.Qb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("value",a.user.countryID),h.Cb(1),h.Rc(" ",a.user.countryName," ")}}function ii(e,t){if(1&e&&(h.Tb(0,"mat-option",26),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.mc("value",a.countryID),h.Cb(1),h.Rc(" ",a.countryName," ")}}function ri(e,t){if(1&e&&(h.Tb(0,"mat-option",26),h.Pc(1),h.Sb()),2&e){var a=t.$implicit;h.mc("value",a.businessSectorID),h.Cb(1),h.Rc(" ",a.businessSectorName," ")}}function ni(e,t){if(1&e&&(h.Tb(0,"div",64),h.Rb(1,65),h.Tb(2,"mat-checkbox",66),h.Pc(3),h.Sb(),h.Qb(),h.Sb()),2&e){var a=t.$implicit,i=t.index;h.Cb(1),h.mc("formGroupName",i),h.Cb(1),h.mc("value",a.value.mediumID),h.Cb(1),h.Rc(" ",a.value.mediumName," ")}}function oi(e,t){if(1&e){var a=h.Ub();h.Nc(0,ti,6,2,"ng-container",40),h.Tb(1,"div",41),h.Tb(2,"button",42),h.bc("click",(function(){return h.Cc(a),h.fc(2).addAgency()})),h.Pc(3," Add Another Agency "),h.Sb(),h.Sb(),h.Tb(4,"legend",43),h.Pc(5,"First Aired"),h.Sb(),h.Tb(6,"div",44),h.Tb(7,"mat-form-field",45),h.Tb(8,"mat-label"),h.Pc(9,"Date"),h.Sb(),h.Tb(10,"input",46),h.bc("focus",(function(){return h.Cc(a),h.zc(14).open()})),h.Sb(),h.Tb(11,"div",47),h.bc("click",(function(){return h.Cc(a),h.zc(14).open()})),h.Sb(),h.Ob(12,"mat-datepicker-toggle",48),h.Ob(13,"mat-datepicker",49,50),h.Sb(),h.Tb(15,"mat-form-field",45),h.Tb(16,"mat-label"),h.Pc(17,"Country"),h.Sb(),h.Tb(18,"mat-select",51),h.Nc(19,ai,4,2,"ng-container",4),h.Nc(20,ii,2,2,"mat-option",15),h.Sb(),h.Sb(),h.Sb(),h.Tb(21,"mat-form-field",9),h.Tb(22,"mat-label"),h.Pc(23,"Business Sector"),h.Sb(),h.Tb(24,"mat-select",52),h.Nc(25,ri,2,2,"mat-option",15),h.Sb(),h.Sb(),h.Tb(26,"mat-form-field",53),h.Tb(27,"mat-label"),h.Pc(28,"Description (optional)"),h.Sb(),h.Tb(29,"textarea",54),h.Pc(30,"\t\t\t\t\t"),h.Sb(),h.Tb(31,"mat-hint",55),h.Tb(32,"strong"),h.Pc(33,"Outline the work and its goals"),h.Sb(),h.Sb(),h.Sb(),h.Tb(34,"legend",43),h.Pc(35,"Medium"),h.Sb(),h.Tb(36,"mat-form-field",56),h.Tb(37,"div",57),h.Ob(38,"input",58),h.Nc(39,ni,4,3,"div",59),h.Sb(),h.Tb(40,"label",60),h.Pc(41,"Please select one medium"),h.Sb(),h.Sb()}if(2&e){var i=h.zc(14),r=h.fc(2);h.mc("ngForOf",r.editFormGroup.get("agencies").controls),h.Cb(10),h.mc("matDatepicker",i),h.Cb(2),h.mc("for",i),h.Cb(7),h.mc("ngIf",null==r.user?null:r.user.countryID),h.Cb(1),h.mc("ngForOf",r.aCountry),h.Cb(5),h.mc("ngForOf",r.aBusinessSector),h.Cb(6),h.mc("align",r.start),h.Cb(8),h.mc("ngForOf",r.editFormGroup.get("mediums").controls),h.Cb(1),h.Kc("visibility",r.editFormGroup.controls.mediums.valid?"hidden":"initial")}}function ci(e,t){1&e&&(h.Rb(0),h.Pc(1,"Update Work"),h.Qb())}function pi(e,t){1&e&&(h.Rb(0),h.Pc(1,"Next"),h.Qb())}function li(e,t){if(1&e&&(h.Tb(0,"a",67),h.Pc(1," Cancel "),h.Sb()),2&e){var a=h.fc(2);h.mc("state",h.sc(3,Ga,h.sc(1,ja,a.parentTheWork)))}}function si(e,t){1&e&&(h.Tb(0,"a",68),h.Pc(1," Cancel "),h.Sb())}function mi(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div"),h.Tb(1,"header",2),h.Tb(2,"h1",3),h.Nc(3,Ea,2,0,"ng-container",4),h.Nc(4,Ma,2,0,"ng-container",4),h.Sb(),h.Sb(),h.Nc(5,za,3,5,"a",5),h.Nc(6,Qa,3,0,"a",6),h.Nc(7,Ba,3,1,"ng-container",4),h.Tb(8,"section",7),h.Tb(9,"form",8),h.Tb(10,"mat-form-field",9),h.Tb(11,"mat-label"),h.Pc(12,"Title"),h.Sb(),h.Ob(13,"input",10),h.Sb(),h.Tb(14,"mat-form-field",9),h.Tb(15,"mat-label"),h.Pc(16,"Client"),h.Sb(),h.Ob(17,"input",11),h.Sb(),h.Tb(18,"mat-form-field",9),h.Tb(19,"mat-label"),h.Pc(20,"Product"),h.Sb(),h.Ob(21,"input",12),h.Sb(),h.Tb(22,"mat-form-field",9),h.Tb(23,"mat-label"),h.Pc(24,"Agency"),h.Sb(),h.Tb(25,"mat-select",13),h.Tb(26,"mat-optgroup",14),h.Nc(27,$a,2,2,"mat-option",15),h.Sb(),h.Tb(28,"mat-optgroup",16),h.Nc(29,Va,2,2,"mat-option",15),h.Sb(),h.Sb(),h.Sb(),h.Nc(30,Za,3,3,"div",0),h.Nc(31,oi,42,10,"ng-template",null,17,h.Oc),h.Tb(33,"div",18),h.Tb(34,"button",19),h.bc("click",(function(){return h.Cc(a),h.fc().saveTheWork()})),h.Nc(35,ci,2,0,"ng-container",4),h.Nc(36,pi,2,0,"ng-container",4),h.Sb(),h.Nc(37,li,2,5,"a",20),h.Nc(38,si,2,0,"a",21),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.zc(32),r=h.fc();h.mc("@cascade-in-out",void 0),h.Cb(3),h.mc("ngIf",r.theWork.campaignID),h.Cb(1),h.mc("ngIf",!r.theWork.campaignID),h.Cb(1),h.mc("ngIf",r.parentTheWork),h.Cb(1),h.mc("ngIf",!r.parentTheWork),h.Cb(1),h.mc("ngIf",r.isChecked&&r.theWork.campaignID),h.Cb(2),h.mc("formGroup",r.editFormGroup),h.Cb(18),h.mc("ngForOf",r.getPrimaryUsersAgencyArray()),h.Cb(2),h.mc("ngForOf",r.getPrimaryAllOtherAgencyArray()),h.Cb(1),h.mc("ngIf",!r.isChecked)("ngIfElse",i),h.Cb(4),h.mc("disabled",r.isDisabled()),h.Cb(1),h.mc("ngIf",r.theWork.campaignID),h.Cb(1),h.mc("ngIf",!r.theWork.campaignID),h.Cb(1),h.mc("ngIf",r.parentTheWork),h.Cb(1),h.mc("ngIf",!r.parentTheWork)}}function di(e,t){if(1&e&&h.Ob(0,"mat-spinner",69),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}var ui=function(){function e(e,t,a,i,r,n,c,p,l,s,m,d){this.location=e,this.fb=t,this.authenticationService=a,this.agencyService=i,this.countryService=r,this.businessSectorService=n,this.mediumService=c,this.theworkService=p,this.mergeArrayPipe=l,this.orderByPipe=s,this.router=m,this.route=d,this.isLoaded=!1,this.isChecked=!1,this.isSearching=!1,this.aOmnicomMediaAgency=["None","OMD","PHD"],this.bAddAgency=!1,this.aWorkType=[{id:1,name:"[DEV DEMO]"},{id:2,name:"Branded Content and Entertainment"},{id:3,name:"Collateral"},{id:4,name:"Design"},{id:5,name:"Digital"},{id:6,name:"Digital Craft"},{id:7,name:"Direct"},{id:8,name:"Innovation"},{id:9,name:"Integrated"},{id:10,name:"Design"},{id:10,name:"Ect.."}],this.paginatedData=new vt.a(0,0,0,1,0,15,[],[],0,0);var u=this.aWorkType.map((function(e){return new o.g(!1)}));this.editFormGroup=this.fb.group({titleCtrl:["",o.x.required],clientCtrl:["",o.x.required],productCtrl:["",o.x.required],agencyCtrl:["",o.x.required],airedDateCtrl:["",o.x.required],airedCountryCtrl:["",o.x.required],businessSectorCtrl:["",o.x.required],descriptionCtrl:[""],typeOfWorkCtrl:new o.d(u,this.minSelectedCheckboxes(1)),agencies:this.fb.array([]),mediums:this.fb.array([],this.minSelectedCheckboxes(1))})}return Object.defineProperty(e.prototype,"campaignid",{set:function(e){this.campaignID=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentcampaignid",{set:function(e){this.parentCampaignID=e},enumerable:!1,configurable:!0}),e.prototype.onKeydownHandler=function(e){this.router.navigate(["../"],{relativeTo:this.route})},e.prototype.ngOnInit=function(){var e=this;history&&history.state&&history.state.data&&history.state.data.theWork&&(this.parentTheWork=history.state.data.theWork),this.loadData(this.campaignID).subscribe((function(t){if(e.aAgency=t&&t[0]?t[0]:void 0,e.aBusinessSector=t&&t[1]?t[1]:void 0,e.aCountry=t&&t[2]?t[2]:void 0,e.aMedium=t&&t[3]?t[3]:void 0,e.aMedium=e.aMedium.sort((function(e,t){return e.mediumName>t.mediumName?1:e.mediumName===t.mediumName?0:-1})),e.theWork=t&&t[4]?t[4]:new P.a(0,"","","",void 0,0,void 0,"",!0,void 0,"",void 0,"",void 0,"",0,"",void 0,new Date,void 0,0,"",[],[],0,0,0,0,[],[],[],0),e.user=t&&t[5]?t[5]:void 0,0!==e.theWork.campaignID){if(e.isChecked=!0,e.editFormGroup.controls.titleCtrl.setValue(e.theWork.campaignName),e.editFormGroup.controls.clientCtrl.setValue(e.theWork.advertiserClientName),e.editFormGroup.controls.productCtrl.setValue(e.theWork.productServiceName),e.editFormGroup.controls.agencyCtrl.setValue(e.theWork.primaryAgencyID),e.editFormGroup.controls.airedDateCtrl.setValue(_a(e.theWork.firstAppearedAtCal)._d),e.editFormGroup.controls.airedCountryCtrl.setValue(e.theWork.firstAppearedCountryID),e.editFormGroup.controls.businessSectorCtrl.setValue(e.theWork.businessSectorID),e.editFormGroup.controls.descriptionCtrl.setValue(e.theWork.campaignDescription),e.theWork.aAgency&&e.theWork.aAgency.length)for(var a=0,i=e.theWork.aAgency;a<i.length;a++){var r=i[a];r.agencyID!==e.theWork.primaryAgencyID?e.addAgency(r.agencyID):Array()}if(e.aMedium&&e.aMedium.length)for(var n=function(t){e.addMedium(t,-1!==e.theWork.aMediums.findIndex((function(e){return e.mediumID===t.mediumID})))},o=0,c=e.aMedium;o<c.length;o++)n(c[o])}else{e.editFormGroup.get("titleCtrl").valueChanges.debounceTime(500).switchMap((function(t){return t&&t.length?e.checkExistingWork({inputAssetSearchTerm:t}):Object(g.a)(void 0)})).switchMap((function(t){return t?e.displayExistingWork(t):Object(g.a)(void 0)})).subscribe(),e.editFormGroup.get("clientCtrl").valueChanges.debounceTime(500).switchMap((function(t){return t&&t.length?e.checkExistingWork({advertiserClientName:t}):Object(g.a)(void 0)})).switchMap((function(t){return t?e.displayExistingWork(t):Object(g.a)(void 0)})).subscribe(),e.editFormGroup.get("productCtrl").valueChanges.debounceTime(500).switchMap((function(t){return t&&t.length?e.checkExistingWork({productServiceName:t}):Object(g.a)(void 0)})).switchMap((function(t){return t?e.displayExistingWork(t):Object(g.a)(void 0)})).subscribe(),e.editFormGroup.get("agencyCtrl").valueChanges.debounceTime(500).switchMap((function(t){return t?e.checkExistingWork({agencyID:t}):Object(g.a)(void 0)})).switchMap((function(t){return t?e.displayExistingWork(t):Object(g.a)(void 0)})).subscribe();for(var p=0,l=e.aMedium;p<l.length;p++)e.addMedium(l[p])}e.isLoaded=!0}))},e.prototype.checkExistingWork=function(e){return this.isChecked=!1,this.isSearching=!0,this.editFormGroup.controls.titleCtrl.value.length&&this.editFormGroup.controls.clientCtrl.value.length&&this.editFormGroup.controls.productCtrl.value.length&&this.editFormGroup.controls.agencyCtrl.value?this.theworkService.getWorks(this.paginatedData,{inputAssetSearchTerm:this.editFormGroup.controls.titleCtrl.value,advertiserClientName:this.editFormGroup.controls.clientCtrl.value,productServiceName:this.editFormGroup.controls.productCtrl.value,agencyID:this.editFormGroup.controls.agencyCtrl.value,isSingle:!0}):Object(g.a)(void 0)},e.prototype.displayExistingWork=function(e){return this.isSearching=!1,void 0!==e&&e.dataset&&(e.dataset.length?this.aExistingWork=e.dataset:this.isChecked=!0),Object(g.a)(void 0)},e.prototype.selectExistingWork=function(e){console.log("Do something with: ",e.campaignID)},e.prototype.hideExistingWork=function(){this.isChecked=!0},e.prototype.createAgency=function(e){return this.fb.group({agencyID:e||""})},e.prototype.addAgency=function(e){this.agencies=this.editFormGroup.get("agencies"),this.agencies.push(this.createAgency(e))},e.prototype.addMedium=function(e,t){void 0===t&&(t=!1),this.mediums=this.editFormGroup.get("mediums"),this.mediums.push(this.createMedium(e,t))},e.prototype.createMedium=function(e,t){return void 0===t&&(t=!1),this.fb.group({mediumID:e.mediumID,mediumName:e.mediumName,checked:t})},e.prototype.loadData=function(e,t){var a=this;return Object(f.a)([this.agencyService.getAgencies(),this.businessSectorService.getBusinessSectors(),this.countryService.getCountries(),this.mediumService.getMediums(),e?this.theworkService.getWork(e):Object(g.a)(void 0),Object(g.a)(this.authenticationService.isLoggedIn()).map((function(e){return e?a.user=a.authenticationService.currentUserValue:a.router.navigate(["/home"],{relativeTo:a.route})}))])},e.prototype.getPrimaryUsersAgencyArray=function(e){var t=this;return this.user.agencies&&this.user.agencies.length&&this.agencies&&this.agencies.value&&this.agencies.value.length?this.user.agencies.filter((function(e){return!t.agencies.value.filter((function(t){return t.agencyID===e.agencyID})).length})):this.user.agencies},e.prototype.getPrimaryAllOtherAgencyArray=function(e){var t=this;return this.aAgency&&this.aAgency.length&&this.user.agencies&&this.user.agencies.length&&(this.aUserFilteredAgency=this.aAgency.filter((function(e){return!t.user.agencies.filter((function(t){return t.agencyID===e.agencyID})).length}))),this.aUserFilteredAgency&&this.aUserFilteredAgency.length&&this.agencies&&this.agencies.value&&this.agencies.value.length?this.aUserFilteredAgency.filter((function(e){return!t.agencies.value.filter((function(t){return t.agencyID===e.agencyID})).length})):this.aUserFilteredAgency},e.prototype.getAgencyArray=function(e){var t=this;return this.aAgency&&this.aAgency.length&&this.agencies&&this.agencies.value&&this.agencies.value.length?this.orderByPipe.transform(this.mergeArrayPipe.transform(this.aAgency.filter((function(e){return e.agencyID!==t.editFormGroup.controls.agencyCtrl.value&&!t.agencies.value.filter((function(t){return t.agencyID===e.agencyID})).length})),this.aAgency.filter((function(t){return t.agencyID===e}))),"agencyName"):this.aAgency},e.prototype.getExistingAgencyIDArray=function(){return this.agencies&&this.agencies.value&&this.agencies.value.length?this.agencies.value.map((function(e){return e.agencyID})):[]},e.prototype.saveTheWork=function(){var e=this;this.theWork.campaignID=this.campaignID&&0!==this.campaignID?this.campaignID:0,this.theWork.campaignName=this.editFormGroup.controls.titleCtrl.value,this.theWork.advertiserClientName=this.editFormGroup.controls.clientCtrl.value,this.theWork.productServiceName=this.editFormGroup.controls.productCtrl.value,this.theWork.primaryAgencyID=this.editFormGroup.controls.agencyCtrl.value,this.theWork.firstAppearedAt=_a(this.editFormGroup.get("airedDateCtrl").value).format("YYYY-MM-DD"),this.theWork.firstAppearedCountryID=this.editFormGroup.controls.airedCountryCtrl.value,this.theWork.businessSectorID=this.editFormGroup.controls.businessSectorCtrl.value,this.theWork.campaignDescription=this.editFormGroup.controls.descriptionCtrl.value,this.theWork.aAgency=this.editFormGroup.controls.agencies.value&&this.editFormGroup.controls.agencies.value.length?this.editFormGroup.controls.agencies.value.map((function(e){return e})):[],this.theWork.aMediums=this.editFormGroup.controls.mediums.controls.filter((function(e){return!!e.value.checked})).map((function(e){return e.value.mediumID})),this.theworkService.saveWork(this.theWork).map((function(t){return e.parentTheWork&&e.parentTheWork.aItems.push(t.data),e.theWork.campaignID=t.data.campaignID,t})).flatMap((function(t){return Object(f.a)([e.theworkService.removeLocalWork(e.theWork.campaignID),e.theWork.aParentCampaignID&&e.theWork.aParentCampaignID.length?Object(g.a)(e.theWork.aParentCampaignID).flatMap((function(t){var a=t.map((function(t){return e.theworkService.removeLocalWork(t)}));return Object(f.a)(a)})):Object(g.a)(!0)])})).subscribe((function(t){e.parentTheWork?e.router.navigate(["./"+e.theWork.campaignID+"/file-upload"],{relativeTo:e.route,state:{data:{theWork:e.parentTheWork}}}):-1===e.router.url.indexOf("edit")?e.router.navigate(["./"+e.theWork.campaignID+"/file-upload"],{relativeTo:e.route}):e.router.navigate(["../"],{relativeTo:e.route})}))},e.prototype.onChangeMedium=function(e){if(this.mediums=this.editFormGroup.get("mediums"),e.checked)this.mediums.push(new o.g(e.source.value));else{var t=this.mediums.controls.findIndex((function(t){return t.value===e.source.value}));this.mediums.removeAt(t)}},e.prototype.isDisabled=function(){return"VALID"!==this.editFormGroup.get("titleCtrl").status||"VALID"!==this.editFormGroup.get("clientCtrl").status||"VALID"!==this.editFormGroup.get("productCtrl").status||"VALID"!==this.editFormGroup.get("agencyCtrl").status||"VALID"!==this.editFormGroup.get("airedDateCtrl").status||"VALID"!==this.editFormGroup.get("airedCountryCtrl").status||"VALID"!==this.editFormGroup.get("businessSectorCtrl").status||"VALID"!==this.editFormGroup.get("mediums").status},e.prototype.minSelectedCheckboxes=function(e){return void 0===e&&(e=1),function(t){return t.controls.map((function(e){return void 0!==e.value.checked?e.value.checked:e.value})).reduce((function(e,t){return t?e+t:e}),0)>=e?null:{notSelected:!0}}},e.\u0275fac=function(t){return new(t||e)(h.Nb(n.i),h.Nb(o.f),h.Nb(v.a),h.Nb(Fa.a),h.Nb(Oa.a),h.Nb(Na.a),h.Nb(Aa.a),h.Nb(P.b),h.Nb(D.a),h.Nb(Wa.a),h.Nb(c.c),h.Nb(c.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-shared-thework-edit"]],viewQuery:function(e,t){var a;1&e&&h.Uc(Pa.a,!0),2&e&&h.yc(a=h.cc())&&(t.picker=a.first)},hostVars:1,hostBindings:function(e,t){1&e&&h.bc("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,h.Bc),2&e&&h.Mc("@cascade-in-out",void 0)},inputs:{campaignid:"campaignid",parentcampaignid:"parentcampaignid"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"fullscreen_header","text-center"],[1,"mat-display-0","mat-type"],[4,"ngIf"],["mat-icon-button","","routerLink","../../","class","fullscreen_close","aria-label","Cancel and return to the work","matTooltip","Cancel",3,"state",4,"ngIf"],["mat-icon-button","","routerLink","../","class","fullscreen_close","aria-label","Cancel and return to the work","matTooltip","Cancel",4,"ngIf"],[1,"work-edit_main","g-page-width","g-page-width--narrow"],["fxLayout","column",3,"formGroup"],[1,"animate-cascade-block"],["matInput","","aria-label","Work title","autocomplete","off","formControlName","titleCtrl"],["matInput","","aria-label","Client","autocomplete","off","formControlName","clientCtrl"],["matInput","","aria-label","Product","autocomplete","off","formControlName","productCtrl"],["placeholder","Primary agency","formControlName","agencyCtrl"],["label","Your Agencies"],[3,"value",4,"ngFor","ngForOf"],["label","All Other Agencies"],["ischecked",""],["fxLayout","row-reverse","fxLayoutGap","8px",1,"animate-cascade-block"],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-button","","routerLink","../../",3,"state",4,"ngIf"],["mat-button","","routerLink","../",4,"ngIf"],["mat-icon-button","","routerLink","../../","aria-label","Cancel and return to the work","matTooltip","Cancel",1,"fullscreen_close",3,"state"],["aria-hidden","true"],["mat-icon-button","","routerLink","../","aria-label","Cancel and return to the work","matTooltip","Cancel",1,"fullscreen_close"],["mat-flat-button","","color","accent","fxHide.lt-md","",1,"fullscreen_close",3,"disabled","click"],[3,"value"],["class","g-full-width bg-light-grey",4,"ngIf"],[1,"text-center","mat-caption","text-op-50"],[1,"g-full-width","bg-light-grey"],[1,"g-page-width","g-page-width--narrow"],["fxLayout","row wrap","fxLayoutAlign","start stretch","fxLayoutGap","8px grid","fxLayoutGap.gt-xs","16px grid",3,"ngStyle"],[4,"ngFor","ngForOf"],["fxLayout","row-reverse"],["mat-flat-button","","color","accent",3,"click"],["fxFlex","50","fxFlex.gt-xs","33.33",1,"animate-card-waterfall"],[3,"routerLinkTarget","theWork",4,"ngIf"],[3,"theWork","workSelected",4,"ngIf"],[3,"routerLinkTarget","theWork"],[3,"theWork","workSelected"],["formArrayName","agencies",4,"ngFor","ngForOf"],[1,"animate-cascade-block","another-agency-button"],["mat-button","",3,"click"],[1,"animate-cascade-block","mat-body-1"],["fxLayout","column","fxLayout.gt-xs","row","fxLayoutGap","24px",1,"animate-cascade-block"],["fxFlex","100"],["matInput","","aria-label","Set the date it was first aired","autocomplete","off","formControlName","airedDateCtrl",3,"matDatepicker","focus"],[1,"mat-datepicker-toggle_dummy",3,"click"],["matSuffix","",3,"for"],["touchUi","","disabled","false"],["picker",""],["placeholder","Country first aired in","formControlName","airedCountryCtrl"],["placeholder","Business Sector","formControlName","businessSectorCtrl"],[1,"animate-cascade-block","mat-form-field--with-hint"],["matInput","","matTextareaAutosize","","cdkAutosizeMinRows","4","aria-label","Description outlining the work and goals","autocomplete","off","formControlName","descriptionCtrl"],[3,"align"],[1,"animate-cascade-block","work-edit_checkbox-list"],["fxLayout","row wrap"],["matInput","",2,"display","none"],["formArrayName","mediums","fxFlex","100","fxFlex.gt-xs","50","style","padding-right: 8px;",4,"ngFor","ngForOf"],[1,"mat-caption","strong","text-warn"],["formArrayName","agencies"],[1,"animate-cascade-block",3,"formGroupName"],["placeholder","Additional agency","formControlName","agencyID"],["formArrayName","mediums","fxFlex","100","fxFlex.gt-xs","50",2,"padding-right","8px"],[3,"formGroupName"],["formControlName","checked",3,"value"],["mat-button","","routerLink","../../",3,"state"],["mat-button","","routerLink","../"],[3,"color","strokeWidth","diameter"]],template:function(e,t){if(1&e&&(h.Nc(0,mi,39,16,"div",0),h.Nc(1,di,1,3,"ng-template",null,1,h.Oc)),2&e){var a=h.zc(2);h.mc("ngIf",t.theWork&&t.isLoaded)("ngIfElse",a)}},directives:[n.n,o.y,o.r,R.e,o.j,St.c,St.g,kt.b,o.c,o.q,o.i,La.a,qt.o,n.m,R.f,U.b,U.a,c.f,Ct.b,E.a,L.b,qt.p,R.d,n.o,L.c,R.b,H.a,Pa.b,Pa.d,St.i,Pa.a,kt.d,St.f,o.e,o.k,Ra.a,Ua.a,W.c],styles:["app-shared-thework-edit{display:block;padding-top:56px;padding-bottom:112px}app-shared-thework-edit .mat-flat-button.fullscreen_close{top:10px;right:72px}app-shared-thework-edit .work-edit_main{padding:0 16px}app-shared-thework-edit .work-edit_main legend{margin-top:16px;padding:0;font-weight:700}app-shared-thework-edit .work-edit_main .another-agency-button,app-shared-thework-edit .work-edit_main .mat-form-field{margin-bottom:24px}app-shared-thework-edit .work-edit_main .another-agency-button{margin-top:-28px}app-shared-thework-edit .work-edit_main .g-full-width.bg-light-grey{padding:32px 0;margin-bottom:32px}app-shared-thework-edit .work-edit_main .g-full-width.bg-light-grey .g-page-width--narrow{padding:0 16px}app-shared-thework-edit .work-edit_main .mat-form-field--with-hint .mat-form-field-wrapper{margin-bottom:2em}app-shared-thework-edit .work-edit_main .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-color:rgba(0,0,0,.42);background-image:none}app-shared-thework-edit .work-edit_main .mat-input-element:disabled{color:currentColor}app-shared-thework-edit .work-edit_main .mat-datepicker-toggle_dummy{position:absolute;top:0;left:0;right:0;bottom:0;cursor:pointer}app-shared-thework-edit .work-edit_main .work-edit_checkbox-list{margin-bottom:32px}app-shared-thework-edit .work-edit_main .work-edit_checkbox-list .mat-form-field-label-wrapper,app-shared-thework-edit .work-edit_main .work-edit_checkbox-list .mat-form-field-subscript-wrapper,app-shared-thework-edit .work-edit_main .work-edit_checkbox-list .mat-form-field-underline,app-shared-thework-edit .work-edit_main .work-edit_checkbox-list .mat-input-element{display:none}app-shared-thework-edit .work-edit_main .work-edit_checkbox-list .mat-checkbox-layout .mat-checkbox-label{padding:6px 16px 6px 6px}"],encapsulation:2,data:{animation:[ft.a,ft.c]}}),e}(),bi=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),fi=function(e){function t(t,a,i){var r=e.call(this,t)||this;return r.fullpageService=t,r.route=a,r.router=i,r}return bi(t,e),t.prototype.ngOnInit=function(){var e=this;this.route.params.pipe(Object(xa.a)((function(t){return e.getUrlSlugs()}))).subscribe((function(t){e.params=t||void 0}))},t.prototype.getUrlSlugs=function(){return Object(g.a)(this.route.params).pipe(Object(Da.a)((function(e){var t={campaignID:void 0,parentCampaignID:void 0};return t.campaignID=e.value.singleCampaignID?parseInt(e.value.singleCampaignID):parseInt(e.value.campaignID),t.parentCampaignID=e.value.singleCampaignID?parseInt(e.value.campaignID):void 0,t})))},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a),h.Nb(c.a),h.Nb(c.c))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-edit"]],features:[h.zb],decls:1,vars:2,consts:[[3,"campaignid","parentcampaignid"]],template:function(e,t){1&e&&h.Ob(0,"app-shared-thework-edit",0),2&e&&h.mc("campaignid",t.params.campaignID)("parentcampaignid",t.params.parentCampaignID)},directives:[ui],styles:[""]}),t}(ht.a),gi=a("STbY");function hi(e,t){if(1&e&&(h.Tb(0,"p",17),h.Pc(1),h.Sb()),2&e){var a=h.fc(2);h.Cb(1),h.Rc(" ",a.theWork.displayOrder," ")}}function yi(e,t){if(1&e&&h.Ob(0,"img",18),2&e){var a=h.fc(2);h.oc("src","",a.theWork.thumbImage,"&h=100&w=170&fit=crop",h.Fc)}}function vi(e,t){if(1&e&&(h.Tb(0,"li",19),h.Pc(1),h.Sb()),2&e){var a=h.fc(2);h.Cb(1),h.Rc(" ",a.theWork.advertiserClientName," ")}}function Ci(e,t){if(1&e&&(h.Tb(0,"li",19),h.Pc(1),h.Sb()),2&e){var a=h.fc(2);h.Cb(1),h.Rc(" ",a.theWork.primaryAgencyName," ")}}function Si(e,t){if(1&e){var a=h.Ub();h.Tb(0,"mat-card",1),h.Tb(1,"mat-card-content",2),h.Nc(2,hi,2,1,"p",3),h.Tb(3,"mat-icon",4),h.Pc(4,"drag_handle"),h.Sb(),h.Sb(),h.Tb(5,"mat-card-header",5),h.Tb(6,"div",6),h.Nc(7,yi,1,1,"img",7),h.Sb(),h.Tb(8,"mat-card-title"),h.Pc(9),h.Sb(),h.Tb(10,"mat-card-subtitle"),h.Tb(11,"ul",8),h.Nc(12,vi,2,1,"li",9),h.Nc(13,Ci,2,1,"li",9),h.Sb(),h.Sb(),h.Sb(),h.Tb(14,"div",10),h.Tb(15,"button",11),h.Tb(16,"mat-icon",12),h.Pc(17,"more_vert"),h.Sb(),h.Sb(),h.Tb(18,"mat-menu",13,14),h.Tb(20,"button",15),h.Pc(21,"Go To The Work"),h.Sb(),h.Tb(22,"button",16),h.bc("click",(function(){h.Cc(a);var e=h.fc();return e.openConfirmRemoveWork(e.theWork)})),h.Pc(23,"Remove Work From Campaign"),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.zc(19),r=h.fc();h.Cb(2),h.mc("ngIf",r.theWork.displayOrder&&0!==r.theWork.displayOrder),h.Cb(5),h.mc("ngIf",r.theWork.thumbImage),h.Cb(2),h.Qc(r.theWork.campaignName),h.Cb(3),h.mc("ngIf",r.theWork.advertiserClientName),h.Cb(1),h.mc("ngIf",r.theWork.primaryAgencyName),h.Cb(2),h.mc("matMenuTriggerFor",i),h.Cb(5),h.oc("routerLink","../",r.theWork.campaignID,"")}}var ki=function(){function e(e){this.dialog=e,this.removeWork=new h.o,this.openDialog=new h.o}return e.prototype.ngOnInit=function(){},e.prototype.openConfirmRemoveWork=function(e){var t=this;this.dialog.open(S.a,{minWidth:"300px",width:"450px",data:{title:"Remove Work?",content:"Confirm you wish to remove <strong>"+e.campaignName+"</strong>? <br> from the Campaign",confirm:"Yes, Remove Work"}}).afterClosed().subscribe((function(a){a?t.remove(e.campaignID):Object(g.a)(void 0)}))},e.prototype.remove=function(e){this.removeWork.emit(e)},e.\u0275fac=function(t){return new(t||e)(h.Nb(O.b))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-work-row"]],inputs:{theWork:"theWork"},outputs:{removeWork:"removeWork",openDialog:"openDialog"},decls:1,vars:1,consts:[["class","mat-elevation-z0","fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","start center",1,"mat-elevation-z0"],[1,"g-centered"],["class","order--index",4,"ngIf"],["aria-hidden","true",1,"order--icon","text-al-40"],["fxFlex","grow"],["mat-card-avatar",""],["class","g-img-bg g-resp-img","height","100","alt","","loading","lazy",3,"src",4,"ngIf"],[1,"blank-list"],["class","mat-caption truncate",4,"ngIf"],["fxFlex","",1,"text-right"],["mat-icon-button","",1,"text-al-40",3,"matMenuTriggerFor"],["aria-hidden","true"],["yPosition","above"],["theWorkMenu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",1,"text-warn",3,"click"],[1,"order--index"],["height","100","alt","","loading","lazy",1,"g-img-bg","g-resp-img",3,"src"],[1,"mat-caption","truncate"]],template:function(e,t){1&e&&h.Nc(0,Si,24,7,"mat-card",0),2&e&&h.mc("ngIf",t.theWork)},directives:[n.n,Y.a,R.e,R.f,R.d,Y.d,E.a,Y.e,R.b,Y.c,Y.i,Y.h,U.b,gi.c,gi.d,gi.a,c.d],styles:["app-work-row{display:block;cursor:-webkit-grab;cursor:grab}app-work-row .mat-card{padding-top:8px;padding-bottom:8px}app-work-row .mat-card:hover{background-color:#e8e8e8}app-work-row .mat-card-content{margin-bottom:0;text-align:center;width:34px}app-work-row .mat-card .order--index{display:block;margin:0}app-work-row .mat-card .order--icon,app-work-row .mat-card:hover .order--index{display:none}app-work-row .mat-card:hover .order--icon{display:block}app-work-row .mat-card-avatar{width:170px;height:100px;border-radius:0}app-work-row .mat-card-title{margin-top:8px}app-work-row .mat-slide-toggle{margin-bottom:8px}app-work-row .is-disabled.mat-card:hover{background-color:#fff}app-work-row .is-disabled.mat-card:hover .order--index{display:block}app-work-row .is-disabled.mat-card:hover .order--icon{display:none}app-work-row .is-disabled .mat-card-content,app-work-row .is-disabled .mat-card-header{opacity:.4}"],encapsulation:2}),e}(),Ii=a("snIk");function wi(e,t){if(1&e&&h.Ob(0,"mat-spinner",7),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function Ti(e,t){if(1&e){var a=h.Ub();h.Tb(0,"form",23),h.Tb(1,"mat-form-field"),h.Ob(2,"input",24),h.Tb(3,"button",25),h.bc("click",(function(){return h.Cc(a),h.fc(3).onSubmit()})),h.Tb(4,"mat-icon",3),h.Pc(5,"check"),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(3);h.mc("formGroup",i.campaignFormGroup),h.Cb(2),h.nc("value",i.theWork.campaignName),h.mc("errorStateMatcher",i.matcher)}}function xi(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",26),h.Tb(1,"h2",27),h.Pc(2),h.Sb(),h.Tb(3,"button",28),h.bc("click",(function(){return h.Cc(a),h.fc(3).toggleEditCampaignTitle()})),h.Tb(4,"mat-icon",3),h.Pc(5,"edit"),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(3);h.Cb(2),h.Rc(" ",i.theWork.campaignName," ")}}function Di(e,t){1&e&&(h.Tb(0,"span"),h.Pc(1,"s"),h.Sb())}function Pi(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",31),h.Tb(1,"app-work-row",32),h.bc("removeWork",(function(e){return h.Cc(a),h.fc(4).removeWork(e)})),h.Sb(),h.Sb()}if(2&e){var i=t.$implicit;h.Cb(1),h.mc("theWork",i)}}function _i(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",29),h.bc("cdkDropListDropped",(function(e){return h.Cc(a),h.fc(3).drop(e)})),h.Nc(1,Pi,2,1,"div",30),h.Sb()}if(2&e){var i=h.fc(3);h.Cb(1),h.mc("ngForOf",i.aItems)}}var Fi=function(e){return{theWork:e}},Ni=function(e){return{data:e}};function Oi(e,t){if(1&e&&(h.Tb(0,"div",33),h.Tb(1,"div",34),h.Tb(2,"h2",35),h.Pc(3,"No Work associated with campaign"),h.Sb(),h.Tb(4,"button",18),h.Tb(5,"mat-icon",3),h.Pc(6,"add"),h.Sb(),h.Tb(7,"span"),h.Pc(8," Add Work"),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(4),h.mc("state",h.sc(3,Ni,h.sc(1,Fi,a.theWork)))}}function Ai(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Tb(1,"section",9),h.Tb(2,"div",10),h.Nc(3,Ti,6,3,"form",11),h.Nc(4,xi,6,1,"div",12),h.Tb(5,"ul",13),h.Tb(6,"li",14),h.Pc(7," Created "),h.Tb(8,"strong",15),h.gc(9,"date"),h.Pc(10),h.gc(11,"fromNow"),h.Sb(),h.Sb(),h.Tb(12,"li",14),h.Pc(13," By "),h.Tb(14,"strong"),h.Pc(15),h.Sb(),h.Sb(),h.Tb(16,"li",16),h.Tb(17,"strong"),h.Pc(18),h.Sb(),h.Pc(19," Work Item"),h.Nc(20,Di,2,0,"span",8),h.Sb(),h.Sb(),h.Tb(21,"div",17),h.Tb(22,"a",18),h.Tb(23,"mat-icon",3),h.Pc(24,"add"),h.Sb(),h.Tb(25,"span"),h.Pc(26," Add Work"),h.Sb(),h.Sb(),h.Tb(27,"a",19),h.bc("click",(function(){h.Cc(a);var e=h.fc(2);return e.openConfirmDeleteCampaign(e.theWork)})),h.Tb(28,"mat-icon",3),h.Pc(29,"delete"),h.Sb(),h.Tb(30,"span"),h.Pc(31," Delete"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(32,"div",20),h.Nc(33,_i,2,1,"div",21),h.Nc(34,Oi,9,5,"div",22),h.Sb(),h.Sb(),h.Qb()}if(2&e){var i=h.fc(2);h.Cb(3),h.mc("ngIf",i.bShowEditTitle),h.Cb(1),h.mc("ngIf",!i.bShowEditTitle),h.Cb(4),h.mc("matTooltip",h.ic(9,10,i.theWork.createdAt,"EEEE, MMMM d, yyyy")),h.Cb(2),h.Qc(h.hc(11,13,i.theWork.createdAt)),h.Cb(5),h.Qc(i.theWork.ownerFullName),h.Cb(3),h.Qc(i.theWork.campaignAssetCount),h.Cb(2),h.mc("ngIf",1!==i.campaignAssetCount),h.Cb(2),h.mc("state",h.sc(17,Ni,h.sc(15,Fi,i.theWork))),h.Cb(11),h.mc("ngIf",0!==i.aItems.length),h.Cb(1),h.mc("ngIf",0===i.aItems.length)}}function Wi(e,t){if(1&e&&(h.Rb(0),h.Nc(1,Ai,35,19,"ng-container",8),h.Qb()),2&e){var a=h.fc();h.Cb(1),h.mc("ngIf",a.theWork)}}var Li=function(){function e(){}return e.prototype.isErrorState=function(e,t){return!!(e&&e.invalid&&(e.dirty||t&&t.submitted))},e}(),Ri=function(){function e(e,t,a,i,r,n){this.theworkService=e,this.fb=t,this.userAlertService=a,this.title=i,this.dialog=r,this.router=n,this.bLoaded=!1,this.bShowEditTitle=!1,this.matcher=new Li,i.setTitle("Edit Campaign -  Adspur")}return Object.defineProperty(e.prototype,"campaignid",{set:function(e){this.campaignID=e},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){this.bLoaded=!1,this.campaignFormGroup=this.fb.group({campaignTitleFormControl:new o.g("",[o.x.required])}),this.loadData(this.campaignID).subscribe()},e.prototype.loadData=function(e){var t=this;return this.theworkService.getWork(e).map((function(e){return t.theWork=e,e})).switchMap((function(){return t.theworkService.getWorkItems(e)})).map((function(e){return t.aItems=e,t.bLoaded=!0,e}))},e.prototype.toggleEditCampaignTitle=function(){this.bShowEditTitle=!this.bShowEditTitle},e.prototype.openConfirmDeleteCampaign=function(e){var t=this;this.dialog.open(S.a,{minWidth:"300px",width:"450px",data:{title:"Delete Campaign?",content:"Please confirm permanently deleting <strong>"+e.campaignName+"</strong><br>This will not delete the work items within.",confirm:"Yes, Delete Campaign"}}).afterClosed().subscribe((function(e){e?t.deleteCampaign():Object(g.a)(void 0)}))},e.prototype.deleteCampaign=function(){var e=this;this.theworkService.removeWork(this.campaignID).switchMap((function(){return e.deleteLocalCampaign()})).switchMap((function(t){return e.userAlertService.alertUser("Campaign deleted",_.c,_.b)})).subscribe((function(){e.router.navigate(["/work"])}))},e.prototype.removeWork=function(e){var t=this;this.theworkService.removeCampaignItems(this.campaignID,e).switchMap((function(){return t.deleteLocalCampaign()})).switchMap((function(e){return t.loadData(t.campaignID)})).switchMap((function(e){return t.userAlertService.alertUser("Campaign item removed",_.c,_.b)})).subscribe()},e.prototype.deleteLocalCampaign=function(){return this.theworkService.removeLocalWork(this.campaignID)},e.prototype.onSubmit=function(){var e=this;Object(g.a)(this.campaignFormGroup.get("campaignTitleFormControl").value).switchMap((function(t){return e.theworkService.saveCampaign(e.campaignID,t)})).switchMap((function(t){return e.theworkService.removeLocalWork(e.campaignID)})).switchMap((function(t){return e.loadData(e.campaignID)})).switchMap((function(t){return e.userAlertService.alertUser("Campaign Name Updated",_.c,_.b)})).map((function(t){return e.toggleEditCampaignTitle(),t})).subscribe()},e.prototype.drop=function(e){var t=this,a=this.aItems[e.previousIndex].campaignID,i=e.currentIndex+1;Object(r.e)(this.aItems,e.previousIndex,e.currentIndex),this.theworkService.reorderItem(this.campaignID,a,i).flatMap((function(e){return e?t.theworkService.removeLocalWork(t.campaignID):Object(g.a)(!0)})).switchMap((function(e){return t.loadData(t.campaignID)})).switchMap((function(e){return t.userAlertService.alertUser("Campaign Items Updated",_.c,_.b)})).subscribe()},e.\u0275fac=function(t){return new(t||e)(h.Nb(P.b),h.Nb(o.f),h.Nb(_.a),h.Nb(N.e),h.Nb(O.b),h.Nb(c.c))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-shared-edit-campaign"]],inputs:{campaignid:"campaignid"},decls:10,vars:2,consts:[[1,"fullscreen_header","text-center"],[1,"g-page-width"],["mat-icon-button","","routerLink","../","aria-label","Back","matTooltip","Back",1,"edit-campaign_back"],["aria-hidden","true"],[1,"mat-display-0","mat-type"],["loading",""],[4,"ngIf","ngIfElse"],[3,"color","strokeWidth","diameter"],[4,"ngIf"],["fxLayout","row","fxLayoutGap","24px",1,"edit-campaign_section","g-page-width"],["fxFlex","300px",1,"edit-campaign_sidebar"],["class","work_campaign-header_title dark-theme",3,"formGroup",4,"ngIf"],["fxLayout","","fxLayoutAlign","start center","class","edit-campaign_sidebar_title",4,"ngIf"],[1,"blank-list","edit-campaign_sidebar_details"],[1,"mat-caption","truncate"],[3,"matTooltip"],[1,"mat-caption"],["fxLayout","","fxLayoutGap","16px","fxLayoutAlign","space-between center"],["mat-flat-button","","color","accent","routerLink","../item-manager",3,"state"],["mat-button","",3,"click"],["fxFlex","100"],["cdkDropList","","class","mat-card joined-card-list edit-campaign_list",3,"cdkDropListDropped",4,"ngIf"],["class","joined-card-list","fxFlex","100",4,"ngIf"],[1,"work_campaign-header_title","dark-theme",3,"formGroup"],["matInput","","formControlName","campaignTitleFormControl","placeholder","Edit Campaign Name","autocomplete","off",3,"errorStateMatcher","value"],["type","submit","mat-icon-button","","matSuffix","","aria-label","Save","matTooltip","Save",3,"click"],["fxLayout","","fxLayoutAlign","start center",1,"edit-campaign_sidebar_title"],["fxFlex","",1,"mat-title","strong","truncate"],["mat-icon-button","","aria-label","Edit",3,"click"],["cdkDropList","",1,"mat-card","joined-card-list","edit-campaign_list",3,"cdkDropListDropped"],["class","edit-campaign_item","cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"edit-campaign_item"],[3,"theWork","removeWork"],["fxFlex","100",1,"joined-card-list"],[1,"text-center"],[1,"mat-display-1"]],template:function(e,t){if(1&e&&(h.Tb(0,"header",0),h.Tb(1,"div",1),h.Tb(2,"button",2),h.Tb(3,"mat-icon",3),h.Pc(4,"arrow_back"),h.Sb(),h.Sb(),h.Tb(5,"h1",4),h.Pc(6,"Edit Campaign"),h.Sb(),h.Sb(),h.Sb(),h.Nc(7,wi,1,3,"ng-template",null,5,h.Oc),h.Nc(9,Wi,2,1,"ng-container",6)),2&e){var a=h.zc(8);h.Cb(9),h.mc("ngIf",t.bLoaded)("ngIfElse",a)}},directives:[U.b,c.d,Ct.b,E.a,n.n,W.c,R.e,R.f,R.b,R.d,U.a,c.f,o.y,o.r,o.j,St.c,kt.b,o.c,o.q,o.i,St.i,r.c,n.m,r.a,ki],pipes:[n.e,Ii.a],styles:["app-shared-edit-campaign{display:block;min-height:100%;position:relative;background-color:#37474f;color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;padding-top:56px;padding-bottom:112px}app-shared-edit-campaign .fullscreen_header{background-color:#37474f}app-shared-edit-campaign .fullscreen_header .g-page-width{-webkit-box-sizing:border-box;box-sizing:border-box}app-shared-edit-campaign .fullscreen_header .g-page-width .edit-campaign_back{position:absolute;left:4px;top:0}app-shared-edit-campaign .edit-campaign_section{margin-top:24px}app-shared-edit-campaign .edit-campaign_sidebar .mat-form-field{width:calc(100% - 6px);height:72px}app-shared-edit-campaign .edit-campaign_sidebar .mat-form-field-infix{width:100%}app-shared-edit-campaign .edit-campaign_sidebar .mat-form-field-suffix .mat-icon-button{width:40px;height:40px}app-shared-edit-campaign .edit-campaign_sidebar .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:150%}app-shared-edit-campaign .edit-campaign_sidebar_title{-webkit-box-sizing:border-box;box-sizing:border-box;height:64px;margin-right:6px;margin-bottom:8px}app-shared-edit-campaign .edit-campaign_sidebar_title .mat-title{margin-bottom:0}app-shared-edit-campaign .edit-campaign_sidebar_details{margin-bottom:24px}app-shared-edit-campaign .edit-campaign_list.mat-card{padding:0}app-shared-edit-campaign .edit-campaign_item{border-bottom:1px solid #e8e8e8}app-shared-edit-campaign .cdk-drag-preview,app-shared-edit-campaign .edit-campaign_item:last-child{border-bottom:none}app-shared-edit-campaign .cdk-drag-preview .mat-card .order--index{display:none}"],encapsulation:2}),e}(),Ui=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),Ei=function(e){function t(t,a,i){var r=e.call(this,t)||this;return r.fullpageService=t,r.route=a,r.router=i,r}return Ui(t,e),t.prototype.onKeydownHandler=function(e){this.router.navigate(["../"],{relativeTo:this.route})},t.prototype.ngOnInit=function(){var e=this;this.route.params.pipe(Object(xa.a)((function(t){return e.getUrlSlugs()}))).subscribe((function(t){e.params=t||void 0}))},t.prototype.getUrlSlugs=function(){return Object(g.a)(this.route.params).map((function(e){var t={campaignID:void 0};return t.campaignID=parseInt(e.value.campaignID),t}))},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a),h.Nb(c.a),h.Nb(c.c))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-edit-campaign"]],hostBindings:function(e,t){1&e&&h.bc("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,h.Bc)},features:[h.zb],decls:1,vars:1,consts:[[3,"campaignid"]],template:function(e,t){1&e&&h.Ob(0,"app-shared-edit-campaign",0),2&e&&h.mc("campaignid",t.params.campaignID)},directives:[Ri],styles:["app-edit-campaign{display:block;height:inherit}"],encapsulation:2}),t}(ht.a);function Mi(e,t){if(1&e&&h.Ob(0,"mat-spinner",7),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function ji(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",10),h.Tb(1,"button",11),h.bc("click",(function(){h.Cc(a);var e=t.$implicit;return h.fc(2).saveThumbnail(e)})),h.Ob(2,"img",12),h.Sb(),h.Sb()}if(2&e){var i=t.$implicit;h.Cb(2),h.oc("src","",i.url,"?auto=format&h=130&w=240&fit=crop&bg=ffffff",h.Fc)}}function Gi(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"section",8),h.Nc(2,ji,3,1,"div",9),h.Sb(),h.Qb()),2&e){var a=h.fc();h.Cb(2),h.mc("ngForOf",a.thumbnails)}}var zi=function(){function e(e,t,a,i){this.userAlertService=e,this.fileService=t,this.dialogRef=a,this.data=i,this.bLoaded=!0,this.thumbnails=[]}return e.prototype.ngOnInit=function(){this.bLoaded=!1,this.loadData()},e.prototype.loadData=function(){var e=this;this.fileService.getThumbnails(this.data.assetUploadID,this.data.campaignID).subscribe((function(t){e.thumbnails=t,e.bLoaded=!0}),(function(t){e.bLoaded=!0}))},e.prototype.saveThumbnail=function(e){var t=this;this.bLoaded=!1,this.fileService.setThumbnail(this.data.assetUploadID,this.data.campaignID,e.file).subscribe((function(e){t.dialogRef.close(!0)}),(function(e){t.bLoaded=!0}))},e.\u0275fac=function(t){return new(t||e)(h.Nb(_.a),h.Nb(T.a),h.Nb(O.g),h.Nb(O.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-video-thumbnail-dialog"]],decls:11,vars:3,consts:[["mat-dialog-title","",1,"text-center","mat-display-1"],["aria-hidden","true",1,"text-warn",2,"vertical-align","text-bottom"],["mat-dialog-content",""],["loading",""],[4,"ngIf","ngIfElse"],["mat-dialog-actions","","fxLayout","","fxLayoutAlign","space-between"],["mat-button","",3,"mat-dialog-close"],[3,"color","strokeWidth","diameter"],["fxLayout","row wrap","fxLayoutAlign","start stretch","fxLayoutGap","8px grid","fxLayoutGap.gt-xs","16px grid"],["fxFlex","50","fxFlex.sm","33.33","fxFlex.md","25","fxFlex.gt-md","20",4,"ngFor","ngForOf"],["fxFlex","50","fxFlex.sm","33.33","fxFlex.md","25","fxFlex.gt-md","20"],["mat-button","",1,"blank-button",3,"click"],["alt","",1,"g-img-bg","g-resp-img",3,"src"]],template:function(e,t){if(1&e&&(h.Tb(0,"h1",0),h.Tb(1,"mat-icon",1),h.Pc(2,"wallpaper"),h.Sb(),h.Pc(3," Select a Thumbnail\n"),h.Sb(),h.Tb(4,"div",2),h.Nc(5,Mi,1,3,"ng-template",null,3,h.Oc),h.Nc(7,Gi,3,1,"ng-container",4),h.Sb(),h.Tb(8,"div",5),h.Tb(9,"button",6),h.Pc(10,"Cancel"),h.Sb(),h.Sb()),2&e){var a=h.zc(6);h.Cb(7),h.mc("ngIf",t.bLoaded)("ngIfElse",a),h.Cb(2),h.mc("mat-dialog-close",!1)}},directives:[O.h,E.a,O.e,n.n,O.c,R.e,R.d,U.b,O.d,W.c,R.f,n.m,R.b],styles:["app-video-thumbnail-dialog .blank-button.mat-button{border:3px solid transparent;border-radius:4px;-webkit-transition:all .15s cubic-bezier(.33,.66,.66,1);transition:all .15s cubic-bezier(.33,.66,.66,1)}app-video-thumbnail-dialog .blank-button.mat-button:hover{border-color:#ff3d00}"],encapsulation:2}),e}(),Qi=a("kTnV"),Bi=a("LrOS");function $i(e,t){if(1&e&&h.Ob(0,"mat-spinner",2),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function Vi(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",29),h.bc("click",(function(){return h.Cc(a),h.fc(3).openChangeThumbnail()})),h.Pc(1,"Change Thumbnail"),h.Sb()}}function Hi(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",30),h.bc("click",(function(){return h.Cc(a),h.fc(3).activateFile()})),h.Pc(1,"Add"),h.Sb()}}function qi(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",29),h.bc("click",(function(){return h.Cc(a),h.fc(3).openConfirmRemove()})),h.Pc(1,"Remove"),h.Sb()}}function Ki(e,t){if(1&e&&(h.Tb(0,"div",31),h.Ob(1,"mat-spinner",2),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("color",a.accent)("strokeWidth",2)("diameter",20)}}function Yi(e,t){if(1&e&&(h.Rb(0),h.Ob(1,"img",32),h.Qb()),2&e){var a=h.fc(3);h.Cb(1),h.oc("src","",a.file.thumbImage,"&h=70&w=120&fit=crop&bg=ffffff",h.Fc)}}function Ji(e,t){if(1&e&&(h.Tb(0,"li",20),h.Pc(1),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.Rc(" ",a.file.media_file_type," ")}}function Xi(e,t){if(1&e&&(h.Tb(0,"li",33),h.Pc(1),h.gc(2,"readableFileDuration"),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.Rc(" ",h.hc(2,1,a.file.media_duration)," ")}}function Zi(e,t){if(1&e&&(h.Tb(0,"li",20),h.Pc(1),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.Sc(" ",a.file.media_width," x ",a.file.media_height," ")}}function er(e,t){if(1&e&&(h.Tb(0,"li",20),h.Pc(1),h.gc(2,"readableFileSize"),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.Rc(" ",h.hc(2,1,a.file.media_file_size)," ")}}function tr(e,t){if(1&e&&(h.Tb(0,"li",20),h.Tb(1,"span",21),h.Pc(2),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(2),h.Qc(a.file.fileTypeLabel)}}function ar(e,t){if(1&e&&(h.Tb(0,"section",34),h.Tb(1,"div",35),h.Tb(2,"p",36),h.Pc(3),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(3),h.Qc(a.file.description)}}function ir(e,t){if(1&e&&(h.Tb(0,"h4",54),h.Pc(1),h.Ob(2,"br"),h.Tb(3,"span",55),h.Pc(4),h.Sb(),h.Sb()),2&e){var a=h.fc(3).$implicit,i=h.fc().$implicit;h.Cb(1),h.Rc(" ",i.keyObject.eventParentName,""),h.Cb(3),h.Qc(a.eventName)}}function rr(e,t){if(1&e&&(h.Tb(0,"a",50),h.Tb(1,"div",51),h.Tb(2,"div"),h.Ob(3,"img",52),h.Sb(),h.Nc(4,ir,5,2,"h4",53),h.Sb(),h.Sb()),2&e){var a=h.fc(2).$implicit,i=h.fc().$implicit;h.pc("routerLink","/awards/p/",i.keyObject.urlSlug,"/e/",a.eventName,"/overview"),h.Cb(3),h.oc("src","",i.keyObject.imageFile,"&w=100&h=100",h.Fc),h.Cb(1),h.mc("ngIf",i.keyObject&&i.keyObject.eventParentName)}}function nr(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-entry-row",57),h.bc("toggleEntryFileOut",(function(e){return h.Cc(a),h.fc(9).toggleEntryFile(e)}))("deleteEntryOut",(function(e){return h.Cc(a),h.fc(9).deleteEntry(e)})),h.Sb()}if(2&e){var i=t.$implicit;h.mc("bExpansionPanel",!1)("bIncludeClient",!1)("bIncludeThumbnail",!1)("bIncludeLeagueTableTitle",!1)("bIncludeWorkType",!1)("bIncludeGoToLink",!1)("bIncludeMenu",!1)("bIncludeEntryFile",!0)("bIncludeAncestorAlt",!0)("bIncludeAncestor",!0)("bIncludeFee",!1)("view","entriesInFile")("data",i)}}function or(e,t){if(1&e&&(h.Rb(0),h.Nc(1,nr,1,13,"app-entry-row",56),h.gc(2,"limitTo"),h.Qb()),2&e){var a=h.fc(2).$implicit;h.Cb(1),h.mc("ngForOf",h.ic(2,1,a.aEntry,5))}}function cr(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-entry-row",57),h.bc("toggleEntryFileOut",(function(e){return h.Cc(a),h.fc(9).toggleEntryFile(e)}))("deleteEntryOut",(function(e){return h.Cc(a),h.fc(9).deleteEntry(e)})),h.Sb()}if(2&e){var i=t.$implicit;h.mc("bExpansionPanel",!1)("bIncludeClient",!1)("bIncludeThumbnail",!1)("bIncludeLeagueTableTitle",!1)("bIncludeWorkType",!1)("bIncludeGoToLink",!1)("bIncludeMenu",!1)("bIncludeEntryFile",!0)("bIncludeAncestorAlt",!0)("bIncludeAncestor",!0)("bIncludeFee",!1)("view","entriesInFile")("data",i)}}function pr(e,t){if(1&e&&h.Nc(0,cr,1,13,"app-entry-row",56),2&e){var a=h.fc(2).$implicit;h.mc("ngForOf",a.aEntry)}}function lr(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",58),h.bc("click",(function(){h.Cc(a);var e=h.fc(3).$implicit;return e.bShowMore=!e.bShowMore})),h.Tb(1,"div",59),h.Tb(2,"button",60),h.Tb(3,"mat-icon",61),h.Pc(4,"expand_more"),h.Sb(),h.Sb(),h.Sb(),h.Tb(5,"div",62),h.Tb(6,"h5",63),h.Tb(7,"strong",64),h.Pc(8),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(2).$implicit;h.Cb(8),h.Rc("Show ",i.aEntry.length-5," more")}}function sr(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",58),h.bc("click",(function(){h.Cc(a);var e=h.fc(3).$implicit;return e.bShowMore=!e.bShowMore})),h.Tb(1,"div",59),h.Tb(2,"button",60),h.Tb(3,"mat-icon",61),h.Pc(4,"expand_less"),h.Sb(),h.Sb(),h.Sb(),h.Tb(5,"div",62),h.Tb(6,"h5",63),h.Tb(7,"strong",64),h.Pc(8),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(2).$implicit;h.Cb(8),h.Rc("Hide ",i.aEntry.length-5,"")}}function mr(e,t){if(1&e&&(h.Tb(0,"div",45),h.Nc(1,rr,5,4,"a",46),h.Nc(2,or,3,4,"ng-container",1),h.Nc(3,pr,1,1,"ng-template",null,47,h.Oc),h.Tb(5,"div",48),h.Nc(6,lr,9,1,"a",49),h.Nc(7,sr,9,1,"a",49),h.Sb(),h.Sb()),2&e){var a=h.zc(4),i=h.fc().$implicit,r=h.fc().$implicit;h.Cb(1),h.mc("ngIf",r.keyObject&&r.keyObject.eventParentName),h.Cb(1),h.mc("ngIf",i.aEntry.length>5&&!r.bShowMore)("ngIfElse",a),h.Cb(3),h.mc("hidden",!(i.aEntry.length>5)),h.Cb(1),h.mc("ngIf",!r.bShowMore),h.Cb(1),h.mc("ngIf",r.bShowMore)}}function dr(e,t){if(1&e&&(h.Rb(0),h.Nc(1,mr,8,6,"div",44),h.Qb()),2&e){var a=t.$implicit;h.Cb(1),h.mc("ngIf",a.aEntry&&a.aEntry.length)}}function ur(e,t){if(1&e&&(h.Rb(0),h.Nc(1,dr,2,1,"ng-container",43),h.Qb()),2&e){var a=t.$implicit;h.Cb(1),h.mc("ngForOf",a.keyObject.aEventObj)}}var br=function(){return{"margin-left":"-16px","margin-right":"-16px"}};function fr(e,t){if(1&e&&(h.Tb(0,"div",39),h.Tb(1,"h3",40),h.Pc(2,"Entries "),h.Tb(3,"span",41),h.Pc(4),h.Sb(),h.Sb(),h.Tb(5,"div",42),h.Nc(6,ur,2,1,"ng-container",43),h.Sb(),h.Sb()),2&e){var a=h.fc(4);h.Cb(4),h.Qc(a.aEntry[a.aEntry.length-1].nEventParentCount?a.aEntry[a.aEntry.length-1].nEventParentCount:"0"),h.Cb(1),h.mc("ngStyle.lt-md",h.rc(3,br)),h.Cb(1),h.mc("ngForOf",a.aEntry)}}function gr(e,t){if(1&e&&(h.Tb(0,"section",37),h.Nc(1,fr,7,4,"div",38),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("ngIf",a.aEntry&&a.aEntry.length)}}function hr(e,t){if(1&e&&h.Ob(0,"mat-spinner",2),2&e){var a=h.fc(3);h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function yr(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"section"),h.Tb(2,"div",4),h.Tb(3,"mat-card"),h.Ob(4,"app-shared-file",5),h.Sb(),h.Sb(),h.Sb(),h.Tb(5,"section",6),h.Tb(6,"div",7),h.Tb(7,"div",8),h.Tb(8,"a",9),h.Tb(9,"mat-icon",10),h.Pc(10,"arrow_back"),h.Sb(),h.Sb(),h.Ob(11,"span",11),h.Nc(12,Vi,2,0,"button",12),h.Nc(13,Hi,2,0,"button",13),h.Nc(14,qi,2,0,"ng-template",null,14,h.Oc),h.Sb(),h.Tb(16,"mat-card",15),h.Tb(17,"div",16),h.Nc(18,Ki,2,3,"ng-template",null,17,h.Oc),h.Nc(20,Yi,2,1,"ng-container",1),h.Sb(),h.Tb(21,"mat-card-header",18),h.Tb(22,"mat-card-title"),h.Pc(23),h.Sb(),h.Tb(24,"mat-card-subtitle"),h.Tb(25,"ul",19),h.Tb(26,"li",20),h.Tb(27,"span",21),h.Pc(28),h.gc(29,"date"),h.Sb(),h.Sb(),h.Sb(),h.Tb(30,"ul",19),h.Nc(31,Ji,2,1,"li",22),h.Nc(32,Xi,3,3,"li",23),h.Nc(33,Zi,2,2,"li",22),h.Nc(34,er,3,3,"li",22),h.Nc(35,tr,3,1,"li",22),h.Sb(),h.Sb(),h.Sb(),h.Tb(36,"div",24),h.Tb(37,"a",25),h.Tb(38,"mat-icon",10),h.Pc(39,"save_alt"),h.Sb(),h.Ob(40,"br"),h.Tb(41,"strong"),h.Pc(42,"Download"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Nc(43,ar,4,1,"section",26),h.Nc(44,gr,2,1,"section",27),h.Nc(45,hr,1,3,"ng-template",null,28,h.Oc),h.Qb()),2&e){var a=h.zc(15),i=h.zc(19),r=h.zc(46),n=h.fc(2);h.Cb(1),h.Eb("file_header file_item--type-",n.file.media_file_type,""),h.Cb(3),h.mc("file",n.file),h.Cb(8),h.mc("ngIf","video"==n.file.media_file_type),h.Cb(1),h.mc("ngIf",n.file.removedAt)("ngIfElse",a),h.Cb(7),h.mc("ngIf",n.bShowThumbnail)("ngIfElse",i),h.Cb(3),h.Qc(n.file.originalFileName),h.Cb(5),h.Tc("Uploaded by ",n.file.userFirstName," ",n.file.userLastName,", ",h.ic(29,22,n.file.createdAt,"EEE, MMM d, yyyy, HH:mm:ss"),""),h.Cb(3),h.mc("ngIf",n.file.media_file_type),h.Cb(1),h.mc("ngIf",n.file.media_duration),h.Cb(1),h.mc("ngIf",n.file.media_width&&n.file.media_height),h.Cb(1),h.mc("ngIf",n.file.media_file_size),h.Cb(1),h.mc("ngIf",n.file.fileTypeID),h.Cb(2),h.mc("href",n.file.originalFileSignedAsAttachment,h.Fc),h.Cb(6),h.mc("ngIf",n.file.description),h.Cb(1),h.mc("ngIf",n.bShowEntry)("ngIfElse",r)}}function vr(e,t){if(1&e&&(h.Rb(0),h.Nc(1,yr,47,25,"ng-container",3),h.Qb()),2&e){var a=h.fc();h.Cb(1),h.mc("ngIf",a.file)}}var Cr=function(){function e(e,t,a,i,r,n,o,c,p,l){this.entryService=e,this.eventParentService=t,this.fileService=a,this.groupByPipe=i,this.mergeArrayPipe=r,this.route=n,this.router=o,this.theworkService=c,this.dialog=p,this.userAlertService=l,this.bShowEntry=!1,this.bShowPage=!1,this.bShowThumbnail=!1}return e.prototype.ngOnInit=function(){this.loadData().subscribe(),this.loadEntryData().subscribe()},e.prototype.loadData=function(){var e=this;return this.fileService.getFile(this.getParamAssetUploadID()).map((function(t){return e.file=t})).map((function(){e.bShowPage=!0,e.bShowThumbnail=!0}))},e.prototype.loadEntryData=function(){var e=this;return Object(f.a)([this.entryService.getEntryByCampaignID(this.getParamCampaignID()),this.getParamSingleCampaignID()?this.entryService.getEntryByCampaignID(this.getParamSingleCampaignID()):Object(g.a)([])]).switchMap((function(t){var a=t[0],i=t[1];return a&&a.length||i&&i.length?Object(g.a)(e.mergeArrayPipe.transform(a,i)).flatMap((function(t){return Object(f.a)([e.eventParentService.getEventParents(),Object(f.a)(t.map((function(t){return e.entryService.getEntry(t.categoryID,t.campaignID)})))]).map((function(t){var a=t[0],i=e.groupByPipe.transform(t[1],"eventParentID"),r=0;return i&&i.length?i.filter((function(t){return t.keyObject=a.filter((function(e){return parseInt(t.key)===e.eventParentID}))[0],t.keyObject.aEventObj.filter((function(a){return a.aEntry=t.value.filter((function(e){return e.eventID===a.eventID})).filter((function(t){return t&&t.isSingle?t.aFiles.filter((function(t){return t.assetUploadID===e.getParamAssetUploadID()})).filter((function(e){return t.fileRemovedAt=e.removedAt,!0})):t.aItems.filter((function(a){return a.aFiles.filter((function(t){return t.assetUploadID===e.getParamAssetUploadID()})).filter((function(e){return t.fileRemovedAt=e.removedAt,!0})),!0}))})),r+=a.aEntry.length,!!a.aEntry.length})),t.bShowMore=!1,t.nEventParentCount=r,t.nEventParentCount>0})):Object(g.a)([])})).map((function(t){return e.aEntry=t}))})):Object(g.a)({})})).map((function(){e.bShowEntry=!0}))},e.prototype.getParamCampaignID=function(){return parseInt(this.route.snapshot.paramMap.get("campaignID"))},e.prototype.getParamSingleCampaignID=function(){return this.route.snapshot.paramMap.get("singleCampaignID")?parseInt(this.route.snapshot.paramMap.get("singleCampaignID")):void 0},e.prototype.getParamAssetUploadID=function(){return parseInt(this.route.snapshot.paramMap.get("assetUploadID"))},e.prototype.toggleEntryFile=function(e){var t=this;Object(g.a)(e).switchMap((function(e){return e.isSingle?e.aFiles.find((function(e){return e.assetUploadID===t.file.assetUploadID}))?e.fileRemovedAt?t.entryService.removeFileToEntry(e.campaignID,0,e.categoryID,t.file.assetUploadID):t.entryService.addFileToEntry(e.campaignID,0,e.categoryID,t.file.assetUploadID):Object(g.a)(!1):e.aItems&&e.aItems.length?e.aItems.filter((function(e){return e.aFiles.filter((function(e){return e.assetUploadID===t.file.assetUploadID})).length})).length&&!e.fileRemovedAt?t.entryService.addFileToEntry(e.campaignID,e.aItems.filter((function(e){return e.aFiles.filter((function(e){return e.assetUploadID===t.file.assetUploadID})).length}))[0].campaignID,e.categoryID,t.file.assetUploadID):t.entryService.removeFileToEntry(e.campaignID,e.aItems.filter((function(e){return e.aFiles.filter((function(e){return e.assetUploadID===t.file.assetUploadID})).length}))[0].campaignID,e.categoryID,t.file.assetUploadID):Object(g.a)(!1)})).switchMap((function(a){return"boolean"==typeof a?a?t.userAlertService.alertUser("File added to entry",_.c,_.b):t.userAlertService.alertUser("A problem occurred. Please try again.",_.c,_.b).map((function(){return t.aEntry.find((function(t){return t.keyObject.eventParentID===e.eventParentID})).keyObject.aEventObj.find((function(t){return t.eventID===e.eventID})).aEntry.filter((function(t){return t.campaignID===e.campaignID&&t.categoryID===e.categoryID}))[0].fileRemovedAt=e.fileRemovedAt?"":new Date})):t.userAlertService.alertUser("File removed from entry",_.c,_.b)})).switchMap((function(){return t.entryService.deleteLocalEntry(e)})).subscribe()},e.prototype.openConfirmRemove=function(){var e=this;this.dialog.open(S.a,{minWidth:"300px",width:"450px",data:{title:"Remove File?",icon:!0,content:"Please confirm removal of file",confirm:"Yes, Remove File"}}).afterClosed().switchMap((function(t){return!0===t?e.fileService.deactivateFile(e.file.assetUploadID).flatMap((function(){return Object(f.a)([e.fileService.removeLocalFile(e.file.assetUploadID),e.theworkService.removeLocalWork(e.getParamCampaignID()),e.getParamSingleCampaignID()?e.theworkService.removeLocalWork(e.getParamSingleCampaignID()):Object(g.a)(void 0)])})).switchMap((function(t){return e.userAlertService.alertUser("Work File Removed",_.c,_.b)})).map((function(){e.router.navigate(["../../file-manager"],{relativeTo:e.route})})):Object(g.a)(!1)})).subscribe()},e.prototype.openChangeThumbnail=function(){var e=this;this.dialog.open(zi,{minWidth:"320px",width:"960px",data:{assetUploadID:this.file.assetUploadID,campaignID:this.getParamSingleCampaignID()?this.getParamSingleCampaignID():this.getParamCampaignID()}}).afterClosed().switchMap((function(t){return!0===t?Object(g.a)(e.bShowThumbnail).map((function(e){return!1})).switchMap((function(){return e.deleteLocalWorkAndAssociatedObjetcs()})).switchMap((function(){return e.loadData()})).switchMap((function(){return e.userAlertService.alertUser("Thumbnail Changed",_.c,_.b)})):Object(g.a)(!1)})).subscribe()},e.prototype.activateFile=function(){var e=this;this.fileService.activateFile(this.file.assetUploadID).switchMap((function(t){return t?e.deleteLocalWorkAndAssociatedObjetcs().switchMap((function(){return e.loadData()})).switchMap((function(){return e.userAlertService.alertUser("File added to work",_.c,_.b)})):y.a})).subscribe()},e.prototype.deleteLocalWorkAndAssociatedObjetcs=function(){return Object(f.a)([this.fileService.removeLocalFile(this.file.assetUploadID),this.theworkService.deleteLocalWorkAndAssociatedData(this.getParamCampaignID(),this.getParamSingleCampaignID())])},e.prototype.deleteEntry=function(e){var t=this;this.deleteLocalWorkAndAssociatedObjetcs().switchMap((function(){return t.loadData()})).switchMap((function(){return t.userAlertService.alertUser("File added to entry",_.c,_.b)})).subscribe()},e.\u0275fac=function(t){return new(t||e)(h.Nb(k.a),h.Nb(w.a),h.Nb(T.a),h.Nb(x.a),h.Nb(D.a),h.Nb(c.a),h.Nb(c.c),h.Nb(P.b),h.Nb(O.b),h.Nb(_.a))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-file"]],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"color","strokeWidth","diameter"],[4,"ngIf"],[1,"file_item-file"],[3,"file"],[1,"file_details"],["id","details",1,"g-page-width","g-section"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["mat-icon-button","","routerLink","../../","aria-label","Back"],["aria-hidden","true"],["fxFlex",""],["mat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","",3,"click",4,"ngIf","ngIfElse"],["removefile",""],["fxLayout","row","fxLayoutGap","16px","fxLayoutAlign","start start",1,"g-clear"],["fxFlex","120px",1,"file_details-thumbnail","g-img-bg",2,"height","70px"],["loadingThumb",""],["fxFlex","grow"],[1,"text-label-row"],[1,"text-label"],[1,"text-nonecase"],["class","text-label",4,"ngIf"],["class","text-label text-nonecase",4,"ngIf"],["fxFlex","",1,"text-right"],["mat-button","","color","accent","download","","target","_blank",3,"href"],["class","file_description",4,"ngIf"],["class","file_entries",4,"ngIf","ngIfElse"],["loadentry",""],["mat-button","","color","warn",3,"click"],["mat-button","",3,"click"],[1,"g-flexbox-centering",2,"height","70px"],["height","70","alt","",3,"src"],[1,"text-label","text-nonecase"],[1,"file_description"],[1,"g-page-width","g-section"],[1,"max-line-length","text-center","mat-body-1"],[1,"file_entries"],["class","g-page-width g-section","id","entries",4,"ngIf"],["id","entries",1,"g-page-width","g-section"],[1,"g-section_title","mat-title","g-fl-l"],[1,"text-teal","number"],[1,"g-clear",3,"ngStyle.lt-md"],[4,"ngFor","ngForOf"],["class","joined-card-list file_entry_award-group",4,"ngIf"],[1,"joined-card-list","file_entry_award-group"],["mat-button","","class","file_entry_award-group-header",3,"routerLink",4,"ngIf"],["showMore",""],[3,"hidden"],["mat-list-item","","class","mat-elevation-z2 mat-list-item_load-more","fxLayout","",3,"click",4,"ngIf"],["mat-button","",1,"file_entry_award-group-header",3,"routerLink"],["fxLayout","",1,"g-clearfix","text-left"],["alt","","loading","lazy","width","50","height","50",1,"mat-elevation-z2","g-img-bg",3,"src"],["class","mat-subheading-1",4,"ngIf"],[1,"mat-subheading-1"],[1,"text-al-40"],[3,"bExpansionPanel","bIncludeClient","bIncludeThumbnail","bIncludeLeagueTableTitle","bIncludeWorkType","bIncludeGoToLink","bIncludeMenu","bIncludeEntryFile","bIncludeAncestorAlt","bIncludeAncestor","bIncludeFee","view","data","toggleEntryFileOut","deleteEntryOut",4,"ngFor","ngForOf"],[3,"bExpansionPanel","bIncludeClient","bIncludeThumbnail","bIncludeLeagueTableTitle","bIncludeWorkType","bIncludeGoToLink","bIncludeMenu","bIncludeEntryFile","bIncludeAncestorAlt","bIncludeAncestor","bIncludeFee","view","data","toggleEntryFileOut","deleteEntryOut"],["mat-list-item","","fxLayout","",1,"mat-elevation-z2","mat-list-item_load-more",3,"click"],["fxFlex","75px",1,"load-more_image"],["mat-icon-button",""],["aria-label","Show more winners"],["fxFlex","1 1",1,"winner-row_details"],[1,"mat-caption","truncate"],[1,"winner-row_title"]],template:function(e,t){if(1&e&&(h.Nc(0,$i,1,3,"ng-template",null,0,h.Oc),h.Nc(2,vr,2,1,"ng-container",1)),2&e){var a=h.zc(1);h.Cb(2),h.mc("ngIf",t.bShowPage)("ngIfElse",a)}},directives:[n.n,W.c,Y.a,J.a,R.e,R.d,R.f,U.a,c.f,E.a,R.b,Y.e,Y.i,Y.h,U.b,L.c,n.m,X.a,K.c],pipes:[n.e,Qi.a,Bi.a,ee.a],styles:["app-file{display:block;padding-bottom:112px}app-file .file_comments,app-file .file_description,app-file .file_details,app-file .file_entries,app-file .file_files{padding:0 16px}app-file .file_comments .g-section,app-file .file_description .g-section,app-file .file_details .g-section,app-file .file_entries .g-section,app-file .file_files .g-section{-webkit-box-sizing:border-box;box-sizing:border-box}app-file .file_comments .g-section_title,app-file .file_description .g-section_title,app-file .file_details .g-section_title,app-file .file_entries .g-section_title,app-file .file_files .g-section_title{padding-left:0}app-file .file_header{padding:0 16px;background:#ddd}app-file .file_item-file{margin:0 auto}app-file .file_item-file .mat-card{margin:0 auto 8px;padding:0;overflow:hidden;border-radius:0}app-file .file_item--type-video{background-color:#000}app-file .file_item--type-video .file_item-file{max-width:1064px}app-file .file_item--type-video .file_item-file .mat-card{background:transparent;-webkit-box-shadow:none;box-shadow:none}app-file .file_item--type-document .mat-card,app-file .file_item--type-pdf .mat-card{-webkit-box-shadow:none;box-shadow:none;background-color:transparent}app-file .file_item--type-document .fullscreen-pdf,app-file .file_item--type-pdf .fullscreen-pdf{background-color:transparent}app-file .file_item--type-audio .file_item-file{max-width:1064px}app-file .file_item--type-document .file_item-file,app-file .file_item--type-image .file_item-file,app-file .file_item--type-pdf .file_item-file,app-file .file_item--type-url .file_item-file{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:1064px}app-file .file_details .g-section{margin-top:0;padding-top:8px}app-file .file_details .mat-card{margin-top:8px}app-file .file_details .mat-card-header-text{margin-left:0}app-file .file_details .mat-card-title{word-break:break-all}app-file .file_details .mat-card-subtitle{margin-bottom:0}app-file .file_details .mat-card-subtitle .text-label-row{margin:3px 0 0 -3px}app-file .file_details .mat-card-subtitle p{margin-top:12px}app-file .file_description .g-section{margin-top:0}app-file .file_entry_award-group{margin-bottom:32px}app-file .file_entry_award-group-header{line-height:normal;padding:0;margin-bottom:8px}app-file .file_entry_award-group-header .mat-button-wrapper{display:block}app-file .file_entry_award-group-header img{border-radius:4px}app-file .file_entry_award-group-header .mat-subheading-1{padding:2px 16px;margin-bottom:0}app-file .mat-list-item_load-more{background:#fff;display:block;position:relative;height:auto;clear:both;margin-top:-2px;border-bottom-left-radius:4px;border-bottom-right-radius:4px}app-file .mat-list-item_load-more .load-more_image{text-align:center;margin-right:12px}app-file .mat-list-item_load-more .mat-caption{margin:12px 0 8px}"],encapsulation:2}),e}(),Sr=a("RYkU"),kr=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),Ir=function(e){return{theWork:e}},wr=function(e){return{data:e}};function Tr(e,t){if(1&e&&(h.Tb(0,"a",9),h.Tb(1,"mat-icon",10),h.Pc(2,"arrow_back"),h.Sb(),h.Sb()),2&e){var a=h.fc();h.mc("state",h.sc(3,wr,h.sc(1,Ir,a.parentTheWork)))}}function xr(e,t){1&e&&(h.Tb(0,"a",11),h.Tb(1,"mat-icon",10),h.Pc(2,"arrow_back"),h.Sb(),h.Sb())}function Dr(e,t){if(1&e&&(h.Tb(0,"a",15),h.Pc(1,"Next"),h.Sb()),2&e){var a=h.fc(2);h.mc("routerLink","../success")("state",h.sc(4,wr,h.sc(2,Ir,a.parentTheWork)))}}function Pr(e,t){1&e&&(h.Tb(0,"a",16),h.Pc(1,"Next"),h.Sb()),2&e&&h.mc("routerLink","../success")}function _r(e,t){if(1&e&&(h.Tb(0,"div",12),h.Nc(1,Dr,2,6,"a",13),h.Nc(2,Pr,2,1,"a",14),h.Sb()),2&e){var a=h.fc();h.Cb(1),h.mc("ngIf",a.parentTheWork),h.Cb(1),h.mc("ngIf",!a.parentTheWork)}}var Fr=function(e){function t(t,a,i,r){var n=e.call(this,t)||this;return n.fullpageService=t,n.route=a,n.router=i,n.location=r,n}return kr(t,e),t.prototype.ngOnInit=function(){var e=this;history.state.data&&history.state.data.theWork&&(this.parentTheWork=history.state.data.theWork),this.getUrlSlugs().subscribe((function(t){e.params=t}))},t.prototype.getUrlSlugs=function(){return Object(g.a)(this.route.params).map((function(e){return{campaignID:parseInt(e.value.campaignID),singleCampaignID:parseInt(e.value.singleCampaignID)}}))},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a),h.Nb(c.a),h.Nb(c.c),h.Nb(n.i))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-file-manager-fullscreen"]],features:[h.zb],decls:12,vars:5,consts:[[1,"fullscreen_header","g-page-width","text-center"],[1,"mat-display-0","mat-type"],["mat-icon-button","","routerLink","../","aria-label","Back","MatTooltip","Back",3,"state",4,"ngIf"],["mat-icon-button","","routerLink","../","aria-label","Back","MatTooltip","Back",4,"ngIf"],[1,"g-page-width"],[1,"mat-display-0","mat-type","text-center"],[1,"mat-display-0","mat-type","text-center","text-highlight"],[3,"campaignid","singlecampaignid"],["fxLayout","row-reverse","fxLayoutGap","8px",4,"ngIf"],["mat-icon-button","","routerLink","../","aria-label","Back","MatTooltip","Back",3,"state"],["aria-hidden","true"],["mat-icon-button","","routerLink","../","aria-label","Back","MatTooltip","Back"],["fxLayout","row-reverse","fxLayoutGap","8px"],["mat-flat-button","","color","accent",3,"routerLink","state",4,"ngIf"],["mat-flat-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-flat-button","","color","accent",3,"routerLink","state"],["mat-flat-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(h.Tb(0,"header",0),h.Tb(1,"h1",1),h.Pc(2,"Manage Files"),h.Sb(),h.Nc(3,Tr,3,5,"a",2),h.Nc(4,xr,3,0,"a",3),h.Sb(),h.Tb(5,"div",4),h.Tb(6,"h3",5),h.Pc(7,"Drag To Re-Order Or Remove Files"),h.Sb(),h.Tb(8,"h5",6),h.Pc(9,"Tip: Best To Set The Case Film First For Judging"),h.Sb(),h.Ob(10,"app-shared-file-manager",7),h.Nc(11,_r,3,2,"div",8),h.Sb()),2&e&&(h.Cb(3),h.mc("ngIf",t.parentTheWork),h.Cb(1),h.mc("ngIf",!t.parentTheWork),h.Cb(6),h.mc("campaignid",t.params.campaignID)("singlecampaignid",t.params.singleCampaignID),h.Cb(1),h.mc("ngIf",-1!==t.router.url.indexOf("create")))},directives:[n.n,Sr.a,U.a,c.f,E.a,R.e,R.f],styles:["app-file-manager-fullscreen{display:block;padding-top:56px;padding-bottom:112px}app-file-manager-fullscreen header{position:relative}app-file-manager-fullscreen header .mat-icon-button{position:absolute;left:0;top:6px}app-file-manager-fullscreen .mat-display-0.text-center{font-size:24px}"],encapsulation:2}),t}(ht.a),Nr=a("7pIB"),Or=a("bv9b"),Ar=a("/t3+");function Wr(e,t){if(1&e&&(h.Tb(0,"section"),h.Tb(1,"button",1),h.Tb(2,"mat-icon",2),h.Pc(3,"cloud_upload"),h.Sb(),h.Ob(4,"br"),h.Tb(5,"span",3),h.Pc(6,"Click to Browse"),h.Sb(),h.Ob(7,"br"),h.Ob(8,"input",4),h.Sb(),h.Sb()),2&e){var a=h.fc(2);h.mc("@slide-in-out",void 0),h.Cb(8),h.mc("uploader",a.uploader)}}function Lr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"image"),h.Sb())}function Rr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"image"),h.Sb())}function Ur(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"image"),h.Sb())}function Er(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"image"),h.Sb())}function Mr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"videocam"),h.Sb())}function jr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"videocam"),h.Sb())}function Gr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"videocam"),h.Sb())}function zr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"videocam"),h.Sb())}function Qr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"videocam"),h.Sb())}function Br(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"videocam"),h.Sb())}function $r(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"insert_drive_file"),h.Sb())}function Vr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"insert_drive_file"),h.Sb())}function Hr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"insert_drive_file"),h.Sb())}function qr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"volume_up"),h.Sb())}function Kr(e,t){1&e&&(h.Tb(0,"mat-icon",24),h.Pc(1,"volume_up"),h.Sb())}function Yr(e,t){1&e&&(h.Tb(0,"mat-icon",25),h.Pc(1,"check_circle"),h.Sb())}function Jr(e,t){1&e&&(h.Tb(0,"mat-icon",26),h.Pc(1,"cancel"),h.Sb())}function Xr(e,t){1&e&&(h.Tb(0,"mat-icon",27),h.Pc(1,"error"),h.Sb())}function Zr(e,t){if(1&e&&(h.Tb(0,"span"),h.Pc(1),h.Sb()),2&e){var a=h.fc().$implicit;h.Cb(1),h.Rc("",a.progress," %")}}function en(e,t){1&e&&(h.Tb(0,"span"),h.Pc(1,"Upload Complete"),h.Sb())}function tn(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"tr",12),h.Tb(2,"th",13),h.Nc(3,Lr,2,0,"mat-icon",14),h.Nc(4,Rr,2,0,"mat-icon",14),h.Nc(5,Ur,2,0,"mat-icon",14),h.Nc(6,Er,2,0,"mat-icon",14),h.Nc(7,Mr,2,0,"mat-icon",14),h.Nc(8,jr,2,0,"mat-icon",14),h.Nc(9,Gr,2,0,"mat-icon",14),h.Nc(10,zr,2,0,"mat-icon",14),h.Nc(11,Qr,2,0,"mat-icon",14),h.Nc(12,Br,2,0,"mat-icon",14),h.Nc(13,$r,2,0,"mat-icon",14),h.Nc(14,Vr,2,0,"mat-icon",14),h.Nc(15,Hr,2,0,"mat-icon",14),h.Nc(16,qr,2,0,"mat-icon",14),h.Nc(17,Kr,2,0,"mat-icon",14),h.Tb(18,"strong"),h.Pc(19),h.Sb(),h.Sb(),h.Tb(20,"td",15),h.Nc(21,Yr,2,0,"mat-icon",16),h.Nc(22,Jr,2,0,"mat-icon",17),h.Nc(23,Xr,2,0,"mat-icon",18),h.Sb(),h.Tb(24,"td",19),h.Tb(25,"button",20),h.bc("click",(function(){return t.$implicit.remove()})),h.Tb(26,"mat-icon",21),h.Pc(27,"close"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(28,"tr",22),h.Ob(29,"mat-progress-bar",23),h.Nc(30,Zr,2,1,"span",0),h.Nc(31,en,2,0,"span",0),h.Sb(),h.Qb()),2&e){var a=t.$implicit;h.Cb(3),h.mc("ngIf","image/jpg"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","image/jpeg"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","image/png"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","image/gif"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","video/mp4"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","video/wmv"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","video/mpg"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","video/m4v"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","video/mpeg"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","video/mov"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","doc/doc"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","doc/docx"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","application/pdf"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","audio/mp3"===(null==a||null==a.file?null:a.file.type)),h.Cb(1),h.mc("ngIf","audio/m4a"===(null==a||null==a.file?null:a.file.type)),h.Cb(2),h.Qc(null==a||null==a.file?null:a.file.name),h.Cb(2),h.mc("ngIf",a.isSuccess),h.Cb(1),h.mc("ngIf",a.isCancel),h.Cb(1),h.mc("ngIf",a.isError),h.Cb(6),h.mc("value",a.progress),h.Cb(1),h.mc("ngIf",a&&a.progress<100),h.Cb(1),h.mc("ngIf",a&&100===a.progress)}}function an(e,t){1&e&&(h.Tb(0,"p",28),h.Pc(1," Loading next step\u2026 "),h.Sb())}function rn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",34),h.bc("click",(function(){return h.Cc(a),h.fc(4).uploader.cancelAll()})),h.Tb(1,"span"),h.Pc(2,"Cancel Upload"),h.Sb(),h.Tb(3,"mat-icon",31),h.Pc(4,"close"),h.Sb(),h.Sb()}}function nn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",35),h.bc("click",(function(){return h.Cc(a),h.fc(4).uploader.clearQueue()})),h.Tb(1,"span"),h.Pc(2,"Remove All"),h.Sb(),h.Tb(3,"mat-icon",31),h.Pc(4,"close"),h.Sb(),h.Sb()}if(2&e){var i=h.fc(4);h.mc("disabled",!i.uploader.queue.length)}}function on(e,t){if(1&e){var a=h.Ub();h.Tb(0,"mat-toolbar",29),h.Tb(1,"button",30),h.bc("click",(function(){return h.Cc(a),h.fc(3).uploader.uploadAll()})),h.Tb(2,"span"),h.Pc(3,"Upload Files"),h.Sb(),h.Tb(4,"mat-icon",31),h.Pc(5,"cloud_upload"),h.Sb(),h.Sb(),h.Nc(6,rn,5,0,"button",32),h.Nc(7,nn,5,1,"button",33),h.Sb()}if(2&e){var i=h.fc(3);h.Cb(1),h.mc("disabled",i.isUploadAllDisabled()),h.Cb(5),h.mc("ngIf",i.uploader.isUploading),h.Cb(1),h.mc("ngIf",!i.uploader.isUploading)}}function cn(e,t){if(1&e&&(h.Tb(0,"section"),h.Tb(1,"table",5),h.Tb(2,"caption",6),h.Pc(3,"File to be uploaded"),h.Sb(),h.Tb(4,"thead",6),h.Tb(5,"tr"),h.Tb(6,"th",7),h.Pc(7,"Name"),h.Sb(),h.Tb(8,"th",8),h.Pc(9,"Status"),h.Sb(),h.Tb(10,"th",8),h.Pc(11,"Actions"),h.Sb(),h.Sb(),h.Sb(),h.Tb(12,"tbody"),h.Nc(13,tn,32,22,"ng-container",9),h.Sb(),h.Sb(),h.Nc(14,an,2,0,"p",10),h.Nc(15,on,8,3,"mat-toolbar",11),h.Sb()),2&e){var a=h.fc(2);h.mc("@slide-in-out",void 0),h.Cb(13),h.mc("ngForOf",a.uploader.queue),h.Cb(1),h.mc("ngIf",null==a.uploader?null:a.uploader.queue[0].isSuccess),h.Cb(1),h.mc("ngIf",a.bShowFooter)}}function pn(e,t){if(1&e&&(h.Rb(0),h.Nc(1,Wr,9,2,"section",0),h.Nc(2,cn,16,4,"section",0),h.Qb()),2&e){var a=h.fc();h.Cb(1),h.mc("ngIf",a.bShowDropZoneButton&&0===(null==a.uploader||null==a.uploader.queue?null:a.uploader.queue.length)),h.Cb(1),h.mc("ngIf",null==a.uploader||null==a.uploader.queue?null:a.uploader.queue.length)}}var ln=function(){function e(){this.hasBaseDropZoneOver=!1,this.bShowFooter=!1,this.bShowDropZoneButton=!0,this.onFileOverBase=new h.o,this.onAfterAddingFile=new h.o,this.onBeforeUploadItem=new h.o,this.onCompleteAll=new h.o,this.onCancelItem=new h.o,this.cancelAll=new h.o}return e.prototype.ngOnInit=function(){var e=this;this.uploader=new Nr.c({additionalParameter:{},parametersBeforeFiles:!0,queueLimit:1}),this.uploader.onProgressItem=function(e,t){return{file:e,progress:t}},this.uploader.onAfterAddingFile=function(t){e.onAfterAddingFile.emit([e.uploader,t])},this.uploader.onBeforeUploadItem=function(t){e.onBeforeUploadItem.emit([e.uploader,t])},this.uploader.onCompleteAll=function(){e.onCompleteAll.emit([e.uploader])},this.uploader.onCancelItem=function(t,a,i,r){e.onCancelItem.emit([e.uploader])},this.uploader.cancelAll=function(){e.cancelAll.emit([e.uploader])}},e.prototype.fileOverBase=function(e){this.hasBaseDropZoneOver=e,this.uploader.queue.length&&this.onFileOverBase.emit(this.uploader)},e.prototype.isUploadAllDisabled=function(){return!(!this.uploader.isUploading&&!this.uploader.queue.filter((function(e){return e.isUploaded})).length)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Hb({type:e,selectors:[["app-shared-file-upload"]],inputs:{queueLimit:"queueLimit",bShowFooter:"bShowFooter",bShowDropZoneButton:"bShowDropZoneButton"},outputs:{onFileOverBase:"onFileOverBase",onAfterAddingFile:"onAfterAddingFile",onBeforeUploadItem:"onBeforeUploadItem",onCompleteAll:"onCompleteAll",onCancelItem:"onCancelItem",cancelAll:"cancelAll"},decls:1,vars:1,consts:[[4,"ngIf"],["mat-flat-button","","color","accent",1,"upload-button","text-center"],["aria-hidden","true",1,"mat-icon--2x"],[1,"mat-display-0","mat-type"],["type","file","ng2FileSelect","",3,"uploader"],[1,"uploader__table","mat-typography"],[1,"cdk-visually-hidden"],["scope","col","width","50%"],["scope","col"],[4,"ngFor","ngForOf"],["class","text-center mat-caption text-op-50",4,"ngIf"],["class","uploader__actions","fxLayout","row-reverse","fxLayoutGap","8px",4,"ngIf"],["scope","row","fxLayout","","fxLayoutGap","8px","fxLayoutAlign","start center"],["fxFlex","1 1",1,"text-left"],["class","text-al-54","aria-hidden","true",4,"ngIf"],["fxFlex","40px",1,"text-center"],["matTooltip","File Uploaded","aria-label","File Uploaded","class","text-success",4,"ngIf"],["matTooltip","Upload Canceled","aria-label","Upload canceled","class","text-issue",4,"ngIf"],["matTooltip","Upload Failed","aria-label","Upload failed","class","text-warn",4,"ngIf"],["nowrap","","fxLayout","row-reverse","fxLayoutGap","8px"],["mat-icon-button","","matTooltip","Cancel",3,"click"],["aria-label","Cancel upload",1,"text-al-40"],["scope","row"],["mode","determinate","color","accent",1,"uploader__progress",3,"value"],["aria-hidden","true",1,"text-al-54"],["matTooltip","File Uploaded","aria-label","File Uploaded",1,"text-success"],["matTooltip","Upload Canceled","aria-label","Upload canceled",1,"text-issue"],["matTooltip","Upload Failed","aria-label","Upload failed",1,"text-warn"],[1,"text-center","mat-caption","text-op-50"],["fxLayout","row-reverse","fxLayoutGap","8px",1,"uploader__actions"],["mat-flat-button","","color","accent",3,"disabled","click"],["aria-hidden","true"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"disabled","click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(e,t){1&e&&h.Nc(0,pn,3,2,"ng-container",0),2&e&&h.mc("ngIf",t.uploader)},directives:[n.n,U.b,E.a,Nr.a,n.m,R.e,R.f,R.d,R.b,Ct.b,Or.a,Ar.a],styles:["app-shared-file-upload{display:block;position:relative;overflow:hidden;margin-top:24px}app-shared-file-upload .upload-button{position:relative;padding:40px 16px;width:100%}app-shared-file-upload .upload-button input{cursor:pointer;position:absolute;z-index:1;top:0;bottom:0;left:0;right:0;width:100%;opacity:0}app-shared-file-upload .uploader__table{width:100%}app-shared-file-upload .uploader__table tr{padding:4px 0 2px}app-shared-file-upload .uploader__table tr:last-child{border-bottom-width:0}app-shared-file-upload .uploader__table tr th{padding-left:0}app-shared-file-upload .uploader__table tr th .mat-icon{padding-right:8px;vertical-align:middle}app-shared-file-upload .uploader__table tr td>.mat-icon{padding-top:6px}app-shared-file-upload .uploader__actions{background-color:inherit;padding:0;margin-bottom:24px}app-shared-file-upload .uploader__actions .mat-icon{margin-left:6px}"],encapsulation:2,data:{animation:[ft.c]}}),e}(),sn=a("QibW");function mn(e,t){1&e&&(h.Rb(0),h.Pc(1,"Upload File"),h.Qb())}function dn(e,t){if(1&e&&(h.Rb(0),h.Pc(1),h.Qb()),2&e){var a=h.fc(2);h.Cb(1),h.Rc("",a.file.media_file_type," Successfully Uploaded")}}function un(e,t){1&e&&(h.Tb(0,"button",6),h.Tb(1,"mat-icon",7),h.Pc(2,"close"),h.Sb(),h.Sb())}var bn=function(e){return{theWork:e}},fn=function(e){return{data:e}};function gn(e,t){if(1&e&&(h.Tb(0,"div",11),h.Tb(1,"a",12),h.Pc(2," Skip "),h.Sb(),h.Sb()),2&e){var a=h.fc(3);h.Cb(1),h.mc("routerLink","../success")("state",h.sc(4,fn,h.sc(2,bn,a.parentTheWork)))}}function hn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"section",8),h.Tb(1,"app-shared-file-upload",9),h.bc("onAfterAddingFile",(function(e){return h.Cc(a),h.fc(2).onAfterAddingFile(e)}))("onBeforeUploadItem",(function(e){return h.Cc(a),h.fc(2).onBeforeUploadItem(e)}))("onCompleteAll",(function(e){return h.Cc(a),h.fc(2).onCompleteAll(e)}))("onCancelItem",(function(e){return h.Cc(a),h.fc(2).onCancelItem(e)}))("cancelAll",(function(e){return h.Cc(a),h.fc(2).cancelAll(e)})),h.Sb(),h.Nc(2,gn,3,6,"div",10),h.Sb()}if(2&e){var i=h.fc(2);h.Cb(2),h.mc("ngIf",-1!==i.router.url.indexOf("create")&&i.bShowNextStep&&i.bShowAfterAction)}}function yn(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"li"),h.Pc(2,"File Name "),h.Tb(3,"strong"),h.Pc(4),h.Sb(),h.Sb(),h.Qb()),2&e){var a=h.fc(3);h.Cb(4),h.Qc(a.file.originalFileName)}}function vn(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"li"),h.Pc(2,"Size "),h.Tb(3,"strong"),h.Pc(4),h.gc(5,"readableFileSize"),h.Sb(),h.Sb(),h.Qb()),2&e){var a=h.fc(3);h.Cb(4),h.Qc(h.hc(5,1,a.file.media_file_size))}}function Cn(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"li"),h.Pc(2,"Dimensions "),h.Tb(3,"strong"),h.Pc(4),h.Sb(),h.Pc(5," x "),h.Tb(6,"strong"),h.Pc(7),h.Sb(),h.Sb(),h.Qb()),2&e){var a=h.fc(3);h.Cb(4),h.Qc(a.file.media_width),h.Cb(3),h.Rc("",a.file.media_height," px")}}function Sn(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"li"),h.Pc(2,"Duration "),h.Tb(3,"strong"),h.Pc(4),h.gc(5,"readableFileDuration"),h.Sb(),h.Sb(),h.Qb()),2&e){var a=h.fc(3);h.Cb(4),h.Qc(h.hc(5,1,a.file.media_duration))}}function kn(e,t){if(1&e&&(h.Tb(0,"mat-radio-button",29),h.Tb(1,"mat-chip"),h.Pc(2),h.Sb(),h.Sb()),2&e){var a=t.$implicit;h.mc("value",a.assetUploadFileTypeLabelID),h.Cb(2),h.Rc(" ",a.label," ")}}function In(e,t){if(1&e){var a=h.Ub();h.Tb(0,"button",30),h.bc("click",(function(){return h.Cc(a),h.fc(3).resetFileType()})),h.Tb(1,"mat-icon",7),h.Pc(2,"close"),h.Sb(),h.Sb()}}function wn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",31),h.bc("click",(function(){return h.Cc(a),h.fc(3).onSubmit(!1)})),h.Pc(1,"Next"),h.Sb()}}function Tn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"a",31),h.bc("click",(function(){return h.Cc(a),h.fc(3).onSubmit(!1)})),h.Pc(1,"Done"),h.Sb()}}function xn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"section",13),h.Tb(1,"div",14),h.Tb(2,"mat-icon",15),h.Pc(3,"check"),h.Sb(),h.Sb(),h.Tb(4,"ul",16),h.Nc(5,yn,5,1,"ng-container",0),h.Nc(6,vn,6,3,"ng-container",0),h.Nc(7,Cn,8,2,"ng-container",0),h.Nc(8,Sn,6,3,"ng-container",0),h.Sb(),h.Tb(9,"p",17),h.Pc(10,"To help identify the file, please tell us a little about it."),h.Sb(),h.Tb(11,"form",18),h.Tb(12,"mat-chip-list",19),h.Ob(13,"mat-chip"),h.Sb(),h.Tb(14,"div",20),h.Tb(15,"mat-label",21),h.Pc(16,"File Type (optional)"),h.Sb(),h.Tb(17,"mat-radio-group",22),h.Nc(18,kn,3,2,"mat-radio-button",23),h.Nc(19,In,3,0,"button",24),h.Sb(),h.Sb(),h.Tb(20,"mat-form-field"),h.Tb(21,"mat-label"),h.Pc(22,"Description (optional)"),h.Sb(),h.Tb(23,"textarea",25),h.Pc(24,"\t\t\t\t\t"),h.Sb(),h.Sb(),h.Tb(25,"div",26),h.Nc(26,wn,2,0,"a",27),h.Nc(27,Tn,2,0,"a",27),h.Tb(28,"a",28),h.bc("click",(function(){return h.Cc(a),h.fc(2).onSubmit(!0)})),h.Pc(29,"Add Another"),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(2);h.mc("@slide-in-out",void 0),h.Cb(5),h.mc("ngIf",i.file.originalFileName),h.Cb(1),h.mc("ngIf",i.file.media_file_size),h.Cb(1),h.mc("ngIf","audio"!==i.file.media_file_type.toLowerCase()),h.Cb(1),h.mc("ngIf","image"!==i.file.media_file_type.toLowerCase()),h.Cb(3),h.mc("formGroup",i.assetUploadFormGroup),h.Cb(7),h.mc("ngForOf",i.aAssetUploadFileTypeLabel),h.Cb(1),h.mc("ngIf",i.assetUploadFormGroup.controls.assetUploadFileTypeLabelID.value),h.Cb(7),h.mc("ngIf",-1!==i.router.url.indexOf("create")&&i.bShowNextStep),h.Cb(1),h.mc("ngIf",-1===i.router.url.indexOf("create")&&i.bShowNextStep)}}function Dn(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"header",1),h.Tb(2,"h1",2),h.Nc(3,mn,2,0,"ng-container",0),h.Nc(4,dn,2,1,"ng-container",0),h.Sb(),h.Sb(),h.Nc(5,un,3,0,"button",3),h.Nc(6,hn,3,1,"section",4),h.Nc(7,xn,30,10,"ng-template",null,5,h.Oc),h.Qb()),2&e){var a=h.zc(8),i=h.fc();h.Cb(3),h.mc("ngIf",!i.file),h.Cb(1),h.mc("ngIf",i.file),h.Cb(1),h.mc("ngIf",-1===i.router.url.indexOf("create")),h.Cb(1),h.mc("ngIf",!i.file)("ngIfElse",a)}}var Pn=function(){function e(e,t,a,i,r,n,o,c){this.entryService=e,this.fb=t,this.fileService=a,this.route=i,this.router=r,this.title=n,this.theworkService=o,this.location=c,this.bShowAfterAction=!0,this.bShowDropzoneButton=!0,this.bShowNextStep=!1,n.setTitle("Upload File - Adspur"),this.initAssetUploadFormGroup()}return e.prototype.onKeydownHandler=function(e){-1===this.router.url.indexOf("create")&&this.router.navigate(["../"],{relativeTo:this.route})},e.prototype.ngOnInit=function(){history&&history.state&&history.state.data&&history.state.data.theWork&&(this.parentTheWork=history.state.data.theWork)},e.prototype.onAfterAddingFile=function(e){var t=this,a=e[0];this.assignAssetUploadData(e[1]).switchMap((function(e){return t.getFileMetaData(e)})).switchMap((function(e){return t.signFile(e)})).subscribe((function(e){return t.bShowDropzoneButton=!1,t.bShowAfterAction=!1,a.uploadAll(),e}))},e.prototype.onBeforeUploadItem=function(e){var t=e[1];return Object.assign(t.options,{additionalParameter:t.assetUploadData.additionalParameter}),t},e.prototype.onCompleteAll=function(e){var t=this;this.processUploadComplete(e[0].queue.filter((function(e){return e.isUploaded&&!e.isError}))).switchMap((function(e){return t.fileService.getFile(e)})).map((function(e){return t.file=e})).switchMap((function(){return t.fileService.getAssetUploadFileTypeLabel()})).subscribe((function(e){t.aAssetUploadFileTypeLabel=e.filter((function(e){return e.media_file_type.toLowerCase()===t.file.media_file_type.toLowerCase()}))}))},e.prototype.cancelAll=function(){this.bShowAfterAction=!0,this.bShowDropzoneButton=!0,this.aAssetUploadFileTypeLabel=void 0,this.assetUploadFormGroup=void 0,this.file=void 0},e.prototype.processUploadComplete=function(e){var t=this;return Object(f.a)([Object(f.a)(e.map((function(e){return t.fileService.saveFileUploads(t.campaignID,t.singleCampaignID,t.assetUploadID,e.assetUploadData.originalFile,e.assetUploadData.originalFileName,e.assetUploadData.fileType,e.assetUploadData.meta_data.media_width,e.assetUploadData.meta_data.media_height,e.assetUploadData.meta_data.media_duration,e.assetUploadData.meta_data.media_file_size,e.assetUploadData.public_file_id)}))),this.theworkService.removeLocalWork(this.singleCampaignID),this.fileService.removeLocalCampaignFiles(this.singleCampaignID?this.singleCampaignID:this.campaignID),this.assetUploadID?this.fileService.removeLocalFile(this.assetUploadID):Object(g.a)(void 0),this.entryService.getEntryByCampaignID(this.singleCampaignID?this.singleCampaignID:this.campaignID).flatMap((function(e){return e&&e.length?Object(f.a)(e.map((function(e){return t.entryService.deleteLocalEntry(e)}))):Object(g.a)([])}))]).map((function(e){return e[0][0].assetUploadID}))},e.prototype.assignAssetUploadData=function(e){return Object(g.a)(e).map((function(e){return e.assetUploadData={additionalParameter:void 0,public_file_id:void 0,meta_data:{media_file_size:e.file.size,media_duration:0,media_height:0,media_width:0},originalFileName:e.file.name,fileType:e.file.type,originalFile:void 0},e}))},e.prototype.getFileMetaData=function(e){return Object(g.a)(e).switchMap((function(e){return e.file.type.includes("video")?Object(g.a)(e).map((function(e){var t=document.createElement("video");return t.preload="metadata",t.onloadedmetadata=function(){window.URL.revokeObjectURL(t.src),Object.assign(e.assetUploadData.meta_data,{media_file_size:e.file.size,media_duration:t.duration,media_height:t.videoHeight,media_width:t.videoWidth})},t.src=URL.createObjectURL(e.file.rawFile),e})):e.file.type.includes("audio")?Object(g.a)(e).map((function(e){var t=document.createElement("audio");return t.preload="metadata",t.onloadedmetadata=function(){window.URL.revokeObjectURL(t.src),Object.assign(e.assetUploadData.meta_data,{media_file_size:e.file.size,media_duration:t.duration,media_height:0,media_width:0})},t.src=URL.createObjectURL(e.file.rawFile),e})):e.file.type.includes("image")?Object(g.a)(e).map((function(e){var t=document.createElement("img");return t.onload=function(){window.URL.revokeObjectURL(t.src),Object.assign(e.assetUploadData.meta_data,{media_file_size:e.file.size,media_duration:0,media_height:t.naturalHeight,media_width:t.naturalWidth})},t.src=URL.createObjectURL(e.file.rawFile),e})):Object(g.a)(e)}))},e.prototype.signFile=function(e){var t=this;return Object(g.a)(e).flatMap((function(e){return Object(f.a)([Object(g.a)(e),t.fileService.s3signFile(e._file.name,t.singleCampaignID?t.singleCampaignID:t.campaignID)])})).map((function(e){for(var t=e[0],a=e[1],i={},r=0,n=a.signed_file;r<n.length;r++){var o=n[r];i[o.key]=o.name}return Object.assign(t,{withCredentials:!1}),Object.assign(t,{url:a.destination}),Object.assign(t.assetUploadData,{additionalParameter:i,public_file_id:a.public_file_id,originalFileName:t.file.name,fileType:t.file.type,originalFile:"video"!==a.fileTypeContentType.toLowerCase()?"https://s3-"+a.region+".amazonaws.com/"+a.bucket_url+"/"+i.key:"s3://"+a.bucket_url+"/"+i.key}),t}))},e.prototype.onSubmit=function(e){var t=this;void 0===e&&(e=!1),Object(g.a)(void 0).switchMap((function(e){return t.assetUploadFormGroup.controls.assetUploadFileTypeLabelID.value.toString().length>0||t.assetUploadFormGroup.controls.assetUploadDescription.value.toString().length>0?t.fileService.setAssetUpload(t.file.assetUploadID,t.assetUploadFormGroup.controls.assetUploadFileTypeLabelID.value?t.assetUploadFormGroup.controls.assetUploadFileTypeLabelID.value:0,t.assetUploadFormGroup.controls.assetUploadDescription.value):Object(g.a)(void 0)})).subscribe((function(a){(void 0===a||a)&&(e?t.resetLocal():t.bShowNextStep&&t.router.navigate(["../file-manager"],t.parentTheWork?{relativeTo:t.route,state:{data:{theWork:t.parentTheWork}}}:{relativeTo:t.route}))}))},e.prototype.resetFileType=function(){this.assetUploadFormGroup.controls.assetUploadFileTypeLabelID.setValue(0)},e.prototype.resetLocal=function(){this.aAssetUploadFileTypeLabel=void 0,this.initAssetUploadFormGroup(),this.bShowAfterAction=!0,this.bShowDropzoneButton=!0,this.file=void 0,this.theWork=void 0,this.uploader=void 0,this.ngOnInit()},e.prototype.initAssetUploadFormGroup=function(){this.assetUploadFormGroup=this.fb.group({assetUploadFileTypeLabelID:new o.g(""),assetUploadDescription:new o.g("")})},e.\u0275fac=function(t){return new(t||e)(h.Nb(k.a),h.Nb(o.f),h.Nb(T.a),h.Nb(c.a),h.Nb(c.c),h.Nb(N.e),h.Nb(P.b),h.Nb(n.i))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-shared-thework-file-upload"]],hostBindings:function(e,t){1&e&&h.bc("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,h.Bc)},inputs:{assetUploadID:"assetUploadID",bShowNextStep:"bShowNextStep",campaignID:"campaignID",singleCampaignID:"singleCampaignID"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"fullscreen_header","text-center","g-page-width"],[1,"mat-display-0","mat-type","text-capitalize"],["mat-icon-button","","routerLink","../","class","fullscreen_close","aria-label","Cancel","matTooltip","Cancel",4,"ngIf"],["class","g-section g-page-width g-page-width--narrow",4,"ngIf","ngIfElse"],["showFile",""],["mat-icon-button","","routerLink","../","aria-label","Cancel","matTooltip","Cancel",1,"fullscreen_close"],["aria-hidden","true"],[1,"g-section","g-page-width","g-page-width--narrow"],[3,"onAfterAddingFile","onBeforeUploadItem","onCompleteAll","onCancelItem","cancelAll"],["fxLayout","row-reverse",4,"ngIf"],["fxLayout","row-reverse"],["mat-button","",3,"routerLink","state"],[1,"file-details","g-section","g-page-width","g-page-width--narrow"],[1,"text-center"],[1,"mat-icon--2x","text-success"],[1,"mat-caption","blank-list"],[1,"mat-body-2","strong"],["fxLayout","column",1,"mat-typography",3,"formGroup"],["hidden",""],["fxLayout","column"],[1,"mat-caption"],["formControlName","assetUploadFileTypeLabelID"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","aria-label","Clear file types","matTooltip","Clear","matTooltipPosition","right",3,"click",4,"ngIf"],["formControlName","assetUploadDescription","matInput","","matTextareaAutosize","","cdkAutosizeMinRows","4","aria-label","Description of the file","autocomplete","off"],["fxLayout","row-reverse","fxLayoutGap","8px"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-button","",3,"click"],[3,"value"],["mat-icon-button","","aria-label","Clear file types","matTooltip","Clear","matTooltipPosition","right",3,"click"],["mat-flat-button","","color","accent",3,"click"]],template:function(e,t){1&e&&h.Nc(0,Dn,9,5,"ng-container",0),2&e&&h.mc("ngIf",t.campaignID)},directives:[n.n,U.b,c.d,Ct.b,E.a,ln,R.e,U.a,c.f,o.y,o.r,o.j,Ht.c,Ht.a,St.g,sn.b,o.q,o.i,n.m,St.c,o.c,kt.b,kt.d,R.f,sn.a],pipes:[Bi.a,Qi.a],styles:["app-shared-thework-file-upload{display:block;padding-top:56px;padding-bottom:112px}app-shared-thework-file-upload .g-page-width{padding-left:16px;padding-right:16px}app-shared-thework-file-upload header{position:relative}app-shared-thework-file-upload header .mat-icon-button{position:absolute;left:0;top:6px}app-shared-thework-file-upload app-shared-file-upload{margin-bottom:24px}app-shared-thework-file-upload .file-details{margin-top:0}app-shared-thework-file-upload .file-details .blank-list{margin-top:16px;margin-bottom:48px}app-shared-thework-file-upload form mat-label.mat-caption{margin:16px 0}app-shared-thework-file-upload form .mat-radio-group{margin-bottom:24px}app-shared-thework-file-upload form .mat-radio-label-content{padding-right:8px;padding-left:0}app-shared-thework-file-upload form .mat-radio-container{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}app-shared-thework-file-upload form .mat-radio-button .mat-chip{font-size:14px}app-shared-thework-file-upload form .mat-radio-button .mat-ripple-element{background-color:hsla(0,0%,100%,.1)}app-shared-thework-file-upload form .mat-radio-checked .mat-chip{background-color:#ff3d00;color:#fff}app-shared-thework-file-upload form .mat-icon-button{width:32px;height:32px;line-height:22px}app-shared-thework-file-upload form textarea{width:100%}"],encapsulation:2,data:{animation:[ft.c]}}),e}(),_n=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),Fn=function(e){function t(t,a,i,r){var n=e.call(this,t)||this;return n.fullpageService=t,n.route=a,n.router=i,n.location=r,n}return _n(t,e),t.prototype.onKeydownHandler=function(e){this.location.back()},t.prototype.ngOnInit=function(){var e=this;this.route.params.switchMap((function(t){return e.getUrlSlugs()})).subscribe((function(t){e.params=t}))},t.prototype.getUrlSlugs=function(){return Object(f.a)([Object(g.a)(this.route.params),Object(g.a)(this.route.parent.params)]).map((function(e){var t={campaignID:0,singleCampaignID:0,assetUploadID:0};return e[0]&&e[0].value&&e[0].value.singleCampaignID?(t.singleCampaignID=parseInt(e[0].value.singleCampaignID),t.campaignID=parseInt(e[1].value.campaignID)):t.campaignID=parseInt(e[0].value.campaignID),t.assetUploadID=e[0]&&e[0].value&&e[0].value.assetUploadID?parseInt(e[0].value.assetUploadID):0,t}))},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a),h.Nb(c.a),h.Nb(c.c),h.Nb(n.i))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-file-upload"]],hostBindings:function(e,t){1&e&&h.bc("keydown.escape",(function(e){return t.onKeydownHandler(e)}),!1,h.Bc)},features:[h.zb],decls:5,vars:3,consts:[[1,"fullscreen_header"],["mat-icon-button","","routerLink","../","aria-label","Cancel","matTooltip","Cancel",1,"fullscreen_close"],["aria-hidden","true"],[3,"campaignID","singleCampaignID","assetUploadID"]],template:function(e,t){1&e&&(h.Ob(0,"div",0),h.Tb(1,"button",1),h.Tb(2,"mat-icon",2),h.Pc(3,"close"),h.Sb(),h.Sb(),h.Ob(4,"app-shared-thework-file-upload",3)),2&e&&(h.Cb(4),h.mc("campaignID",t.params.campaignID)("singleCampaignID",t.params.singleCampaignID)("assetUploadID",t.params.assetUploadID))},directives:[U.b,c.d,Ct.b,E.a,Pn],styles:["app-file-upload{display:block;padding-top:56px;padding-bottom:112px}"],encapsulation:2}),t}(ht.a),Nn=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),On=function(e){function t(t,a,i){var r=e.call(this,t)||this;return r.fullpageService=t,r.route=a,r.router=i,r}return Nn(t,e),t.prototype.ngOnInit=function(){var e=this;this.route.params.switchMap((function(t){return e.getUrlSlugs()})).subscribe((function(t){e.params=t}))},t.prototype.getUrlSlugs=function(){return Object(f.a)([Object(g.a)(this.route.params),Object(g.a)(this.route.parent.params)]).map((function(e){var t={campaignID:0,singleCampaignID:0,assetUploadID:0};return e[0]&&e[0].value&&e[0].value.singleCampaignID?(t.singleCampaignID=parseInt(e[0].value.singleCampaignID),t.campaignID=parseInt(e[0].value.campaignID)):t.campaignID=parseInt(e[0].value.campaignID),t.assetUploadID=e[0]&&e[0].value&&e[0].value.assetUploadID?parseInt(e[0].value.assetUploadID):0,t}))},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a),h.Nb(c.a),h.Nb(c.c))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-file-upload-fullscreen"]],features:[h.zb],decls:1,vars:4,consts:[[3,"campaignID","singleCampaignID","assetUploadID","bShowNextStep"]],template:function(e,t){1&e&&h.Ob(0,"app-shared-thework-file-upload",0),2&e&&h.mc("campaignID",t.params.campaignID)("singleCampaignID",t.params.singleCampaignID)("assetUploadID",t.params.assetUploadID)("bShowNextStep",!0)},directives:[Pn],styles:[""]}),t}(ht.a),An=function(){function e(e){this.title=e,e.setTitle("Work - Adspur")}return e.\u0275fac=function(t){return new(t||e)(h.Nb(N.e))},e.\u0275cmp=h.Hb({type:e,selectors:[["app-work-index"]],decls:1,vars:1,consts:[[3,"bshowdefault"]],template:function(e,t){1&e&&h.Ob(0,"app-thework",0),2&e&&h.mc("bshowdefault",!0)},directives:[yt.a],styles:[""]}),e}(),Wn=a("FtGj"),Ln=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),Rn=["manageCreditPersonSearch"],Un=["manageCreditRoleSearch"];function En(e,t){}function Mn(e,t){1&e&&h.Nc(0,En,0,0,"ng-template")}function jn(e,t){if(1&e&&h.Ob(0,"mat-spinner",12),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function Gn(e,t){}function zn(e,t){1&e&&h.Nc(0,Gn,0,0,"ng-template")}function Qn(e,t){if(1&e&&(h.Rb(0),h.Pc(1),h.Qb()),2&e){var a=t.$implicit;h.Cb(1),h.Rc(", ",a.creditCompanyTypeName,"")}}function Bn(e,t){}function $n(e,t){1&e&&h.Nc(0,Bn,0,0,"ng-template")}function Vn(e,t){if(1&e&&(h.Tb(0,"section",13),h.Tb(1,"div",14),h.Nc(2,zn,1,0,void 0,4),h.Tb(3,"div",15),h.Tb(4,"h2",16),h.Pc(5),h.Tb(6,"span",17),h.Nc(7,Qn,2,1,"ng-container",18),h.Sb(),h.Sb(),h.Tb(8,"div"),h.Tb(9,"a",19),h.Pc(10,"Edit"),h.Sb(),h.Sb(),h.Sb(),h.Nc(11,$n,1,0,void 0,4),h.Tb(12,"div",20),h.Tb(13,"a",21),h.Pc(14," Done "),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&e){var a=h.fc(),i=h.zc(20),r=h.zc(12),n=h.zc(14);h.Cb(2),h.mc("ngTemplateOutlet",i),h.Cb(3),h.Qc(a.credit.creditCompanyName),h.Cb(2),h.mc("ngForOf",a.credit.aCreditCompanyType),h.Cb(2),h.mc("routerLink","../../manage-company/"+a.credit.creditCompanyID),h.Cb(2),h.mc("ngTemplateOutlet",a.credit.aCreditRole&&a.credit.aCreditRole.length>0?r:n),h.Cb(2),h.mc("routerLink","../../")}}function Hn(e,t){1&e&&(h.Tb(0,"mat-icon",36),h.Pc(1,"cancel"),h.Sb())}function qn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"mat-chip",34),h.bc("removed",(function(){h.Cc(a);var e=t.$implicit,i=h.fc().$implicit;return h.fc(2).removeExistingCreditPersonChip(i,e)})),h.Pc(1),h.Nc(2,Hn,2,0,"mat-icon",35),h.Sb()}if(2&e){var i=t.$implicit,r=h.fc(3);h.mc("selectable",r.selectable)("removable",r.removable),h.Cb(1),h.Rc(" ",i.creditPersonName," "),h.Cb(1),h.mc("ngIf",r.removable)}}function Kn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"li",25),h.Tb(1,"div",26),h.Tb(2,"mat-icon",27),h.Pc(3,"drag_handle"),h.Sb(),h.Tb(4,"h5",28),h.Tb(5,"a",29),h.bc("click",(function(){h.Cc(a);var e=t.$implicit;return h.fc(2).editCreditRole(e)})),h.Pc(6),h.Sb(),h.Sb(),h.Tb(7,"div",30),h.Tb(8,"mat-chip-list",31,32),h.bc("cdkDropListDropped",(function(e){h.Cc(a);var i=t.$implicit;return h.fc(2).dropPerson(e,i)})),h.Nc(10,qn,3,4,"mat-chip",33),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=t.$implicit;h.Cb(6),h.Qc(i.creditRoleName),h.Cb(4),h.mc("ngForOf",i.aCreditPerson)}}var Yn=function(){return{"margin-left":"-16px"}},Jn=function(){return{"margin-left":"-48px"}};function Xn(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",22),h.Tb(1,"ol",23),h.bc("cdkDropListDropped",(function(e){return h.Cc(a),h.fc().dropRole(e)})),h.Nc(2,Kn,11,2,"li",24),h.Sb(),h.Sb()}if(2&e){var i=h.fc();h.Jc(h.rc(4,Yn)),h.mc("ngStyle.gt-md",h.rc(5,Jn)),h.Cb(2),h.mc("ngForOf",i.credit.aCreditRole)}}function Zn(e,t){1&e&&(h.Tb(0,"div",37),h.Tb(1,"h4",38),h.Pc(2,"Get Started"),h.Sb(),h.Tb(3,"p",39),h.Pc(4,"Add a Role then Name to create a credit."),h.Sb(),h.Sb())}function eo(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-manage-credits-search",40,41),h.bc("clearSelectedAction",(function(e){return h.Cc(a),h.fc().clearSelectedActionPerson(e)}))("removeSelectedAction",(function(e){return h.Cc(a),h.fc().removeSelectedActionPerson(e)}))("searchAction",(function(e){return h.Cc(a),h.fc().searchActionPerson(e)}))("selectAction",(function(e){return h.Cc(a),h.fc().selectActionPerson(e)})),h.Sb()}if(2&e){var i=h.fc();h.mc("searchTerm",null==i.creditPerson?null:i.creditPerson.creditPersonName)("aFilteredItem",i.aCreditPerson)("aSelectedItem",i.aSelectedCreditPerson)("chipListLabel","Person Selection")("displayFnItem",i.displayFnPersonName)("fieldLabel","Name")("itemNameProperty","creditPersonName")("itemIdProperty","creditPersonID")}}function to(e,t){if(1&e){var a=h.Ub();h.Tb(0,"app-manage-credits-search",40,42),h.bc("clearSelectedAction",(function(e){return h.Cc(a),h.fc().clearSelectedActionRole(e)}))("removeSelectedAction",(function(e){return h.Cc(a),h.fc().removeSelectedActionRole(e)}))("searchAction",(function(e){return h.Cc(a),h.fc().searchActionRole(e)}))("selectAction",(function(e){return h.Cc(a),h.fc().selectActionRole(e)})),h.Sb()}if(2&e){var i=h.fc();h.mc("searchTerm",null==i.creditRole?null:i.creditRole.creditRoleName)("aFilteredItem",i.aCreditRole)("aSelectedItem",i.aSelectedCreditRole)("chipListLabel","Role Selection")("displayFnItem",i.displayFnRoleName)("fieldLabel","Role")("itemNameProperty","creditRoleName")("itemIdProperty","creditRoleID")}}function ao(e,t){1&e&&h.Pb(0)}function io(e,t){1&e&&h.Pb(0)}function ro(e,t){if(1&e){var a=h.Ub();h.Tb(0,"mat-chip",29),h.bc("click",(function(){h.Cc(a);var e=t.$implicit;return h.fc(3).selectCreditRoleSuggestion(e)})),h.Pc(1),h.Tb(2,"mat-icon",52),h.Pc(3,"add"),h.Sb(),h.Sb()}if(2&e){var i=t.$implicit;h.Db("aria-label","Add "+i.creditRoleName),h.Cb(1),h.Rc(" ",i.creditRoleName," ")}}function no(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"mat-chip-list",50),h.Nc(2,ro,4,2,"mat-chip",51),h.Sb(),h.Qb()),2&e){var a=h.fc(2);h.Cb(2),h.mc("ngForOf",a.filterCreditRoleSuggestion())}}function oo(e,t){if(1&e){var a=h.Ub();h.Tb(0,"mat-chip",29),h.bc("click",(function(){h.Cc(a);var e=t.$implicit;return h.fc(3).selectCreditPersonSuggestion(e)})),h.Pc(1),h.Tb(2,"mat-icon",52),h.Pc(3,"add"),h.Sb(),h.Sb()}if(2&e){var i=t.$implicit;h.Db("aria-label","Add "+i.creditPersonName),h.Cb(1),h.Rc(" ",i.creditPersonName," ")}}function co(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"mat-chip-list",53),h.Nc(2,oo,4,2,"mat-chip",51),h.Sb(),h.Qb()),2&e){var a=h.fc(2);h.Cb(2),h.mc("ngForOf",a.filterCreditPersonSuggestion())}}var po=function(e){return{"is-flipped":e}};function lo(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",43),h.Tb(1,"div",44),h.Nc(2,ao,1,0,"ng-container",4),h.Tb(3,"div"),h.Tb(4,"button",45),h.bc("click",(function(){return h.Cc(a),h.fc().swapFormOrder()})),h.Tb(5,"mat-icon",3),h.Pc(6,"swap_horiz"),h.Sb(),h.Sb(),h.Sb(),h.Nc(7,io,1,0,"ng-container",4),h.Sb(),h.Tb(8,"div",46),h.Nc(9,no,3,1,"ng-container",47),h.Nc(10,co,3,1,"ng-container",47),h.Ob(11,"span",48),h.Tb(12,"button",49),h.bc("click",(function(){return h.Cc(a),h.fc().saveCredit()})),h.Pc(13," Save "),h.Sb(),h.Sb(),h.Sb()}if(2&e){var i=h.fc(),r=h.zc(18),n=h.zc(16);h.Cb(2),h.mc("ngTemplateOutlet",i.formOrder?r:n),h.Cb(2),h.mc("ngClass",h.sc(6,po,i.formOrder)),h.Cb(3),h.mc("ngTemplateOutlet",i.formOrder?n:r),h.Cb(2),h.mc("ngIf",i.filterCreditRoleSuggestion()),h.Cb(1),h.mc("ngIf",i.filterCreditPersonSuggestion()),h.Cb(2),h.mc("disabled",i.isSaveDisabled())}}var so=function(e){function t(t,a,i,r,n){var o=e.call(this,a)||this;return o.creditService=t,o.fullpageService=a,o.route=i,o.theworkService=r,o.userAlertService=n,o.aSelectedCreditPerson=[],o.aSelectedCreditRole=[],o.bCreditPersonRemovalProcessing=!1,o.formOrder=!0,o.removable=!0,o.selectable=!0,o.visible=!0,o.separatorKeysCodes=[Wn.g,Wn.c],o}return Ln(t,e),t.prototype.ngOnInit=function(){var e=this;this.loadWork(this.route.snapshot.paramMap.get("singleCampaignID")?parseInt(this.route.snapshot.paramMap.get("singleCampaignID")):parseInt(this.route.snapshot.paramMap.get("campaignID"))).switchMap((function(t){return e.loadCredit(t.assetID,parseInt(e.route.snapshot.paramMap.get("creditCompanyID")))})).subscribe()},t.prototype.loadWork=function(e){var t=this;return this.theworkService.getWork(e).map((function(e){return t.theWork=e,e}))},t.prototype.loadCredit=function(e,t){var a=this;return this.creditService.getcreditbyassetid(e).map((function(e){a.aCredit=e,a.credit=a.aCredit.find((function(e){return e.creditCompanyID===t}))}))},t.prototype.selectCreditPersonSuggestion=function(e){this.selectActionPerson(e)},t.prototype.filterCreditPersonSuggestion=function(){var e=this;return this.creditRole&&this.creditRole.aCreditPerson&&this.creditRole.aCreditPerson.length?this.aSelectedCreditPerson&&this.aSelectedCreditPerson.length?this.creditRole.aCreditPerson.filter((function(t){return!e.aSelectedCreditPerson.find((function(e){return e.creditPersonID===t.creditPersonID}))})):this.creditRole.aCreditPerson:void 0},t.prototype.setCreditPersonVar=function(e){this.creditRole?(this.aSelectedCreditPerson.find((function(t){return t.creditPersonID===e.creditPersonID}))||this.aSelectedCreditPerson.push(e),this.manageCreditPersonSearch.setSearchTerm(""),this.creditPersonName=""):(this.creditPerson=e,this.manageCreditRoleSearch.focusSearchTermInput())},t.prototype.displayFnPersonName=function(e){return e&&"string"==typeof e?e:e&&e.creditPersonName?e.creditPersonName:void 0},t.prototype.dropPerson=function(e,t){var a=this,i=t.aCreditPerson[e.previousIndex].creditPersonID;Object(r.e)(t.aCreditPerson,e.previousIndex,e.currentIndex),this.creditService.reordercreditperson(this.theWork.assetID,this.credit.creditCompanyID,t.creditRoleID,i,e.currentIndex+1).switchMap((function(i){return i?a.userAlertService.alertUser("Names reordered",_.c,_.b).map((function(){t.aCreditPerson.forEach((function(e,t){e.displayOrder=t+1}))})):a.userAlertService.alertUser("Failed to reorder names",_.c,_.b).map((function(){return Object(r.e)(t.aCreditPerson,e.currentIndex,e.previousIndex)}))})).subscribe()},t.prototype.searchActionPerson=function(e){var t=this;!e||!e.length||this.creditPerson&&this.aSelectedCreditPerson.length?this.aCreditPerson=[]:this.creditService.searchcreditperson(e,this.credit.creditCompanyID).map((function(a){if(t.aCreditPerson=a?t.aSelectedCreditPerson.length?a.filter((function(e){return!t.aSelectedCreditPerson.find((function(t){return t.creditPersonID===e.creditPersonID}))})):a:[],t.aCreditPerson.length&&t.creditRole&&t.credit.aCreditRole.length){var i=t.credit.aCreditRole.find((function(e){return e.creditRoleID===t.creditRole.creditRoleID}));i&&t.aCreditPerson.filter((function(e){return e.added=!!i.aCreditPerson.find((function(t){return t.creditPersonID===e.creditPersonID})),!0}))}t.aCreditPerson.find((function(e){return e.creditPersonName===t.creditPersonName}))||t.aSelectedCreditPerson.length&&(!t.aSelectedCreditPerson.length||t.aSelectedCreditPerson.find((function(t){return t.creditPersonName===e.toString().trim()})))||t.aCreditPerson.push({creditPersonName:"Add new person",creditPersonID:0})})).subscribe()},t.prototype.selectActionPerson=function(e){var t=this;0===e.creditPersonID?this.creditService.createcreditperson(e.creditPersonName).switchMap((function(e){return e?t.userAlertService.alertUser("Name created",_.c,_.b).map((function(){t.setCreditPersonVar(e)})):t.userAlertService.alertUser("Failed to create name",_.c,_.b).map((function(){t.manageCreditPersonSearch.clearSearchTerm(),t.manageCreditPersonSearch.focusSearchTermInput()}))})).subscribe():this.setCreditPersonVar(e)},t.prototype.removeSelectedActionPerson=function(e){this.bCreditPersonRemovalProcessing=!0,this.aSelectedCreditPerson.find((function(t){return t.creditPersonID===e.creditPersonID}))&&this.aSelectedCreditPerson.splice(this.aSelectedCreditPerson.findIndex((function(t){return t.creditPersonID===e.creditPersonID})),1),this.creditRole&&this.removeExistingCreditPersonChip(this.creditRole,e)},t.prototype.clearSelectedActionPerson=function(){this.creditPerson&&(this.creditPerson=void 0,this.aSelectedCreditRole=[],this.manageCreditRoleSearch.setSearchTerm(""),this.manageCreditRoleSearch.resetSearchTermInput()),this.aSelectedCreditPerson&&this.aSelectedCreditPerson.length&&(this.aSelectedCreditPerson=[]),this.manageCreditPersonSearch.setSearchTerm(""),this.manageCreditPersonSearch.resetSearchTermInput(),this.manageCreditPersonSearch.focusSearchTermInput()},t.prototype.removeExistingCreditPersonChip=function(e,t){var a=this;this.creditService.removeassetcreditperson(this.theWork.assetID,this.credit.creditCompanyID,e.creditRoleID,t.creditPersonID).switchMap((function(i){return i?a.userAlertService.alertUser("Name removed",_.c,_.b).map((function(){e.aCreditPerson.find((function(e){return e.creditPersonID===t.creditPersonID}))&&(e.aCreditPerson.splice(e.aCreditPerson.findIndex((function(e){return e.creditPersonID===t.creditPersonID})),1),a.editCreditRole(e))})).switchMap((function(){return 0===e.aCreditPerson.length?a.creditService.removeassetcreditrole(a.theWork.assetID,a.credit.creditCompanyID,e.creditRoleID).switchMap((function(e){return a.userAlertService.alertUser(e?"Role removed":"Failed to remove role",_.c,_.b)})):Object(g.a)(void 0)})).switchMap((function(){return a.loadCredit(a.theWork.assetID,a.credit.creditCompanyID)})):a.userAlertService.alertUser("Failed to remove name",_.c,_.b)})).subscribe((function(){a.bCreditPersonRemovalProcessing=!1}))},t.prototype.selectCreditRoleSuggestion=function(e){this.selectActionRole(e)},t.prototype.filterCreditRoleSuggestion=function(){var e=this;return this.creditPerson&&this.creditPerson.aCreditRole&&this.creditPerson.aCreditRole.length?this.aSelectedCreditRole&&this.aSelectedCreditRole.length?this.creditPerson.aCreditRole.filter((function(t){return!e.aSelectedCreditRole.find((function(e){return e.creditRoleID===t.creditRoleID}))})):this.creditPerson.aCreditRole:void 0},t.prototype.setCreditRoleVar=function(e){this.creditPerson?(this.aSelectedCreditRole.find((function(t){return t.creditRoleID===e.creditRoleID}))||this.aSelectedCreditRole.push(e),this.manageCreditRoleSearch.setSearchTerm(""),this.manageCreditRoleSearch.focusSearchTermInput(),this.creditRoleName=""):(this.creditRole=e,this.manageCreditRoleSearch.setSearchTerm(e.creditRoleName),this.manageCreditPersonSearch.focusSearchTermInput())},t.prototype.displayFnRoleName=function(e){return e&&"string"==typeof e?e:e&&e.creditRoleName?e.creditRoleName:void 0},t.prototype.editCreditRole=function(e){var t=this;this.manageCreditPersonSearch.clearSearchTerm(),this.manageCreditRoleSearch.clearSearchTerm(),this.selectActionRole(e),e.aCreditPerson.forEach((function(e){return t.selectActionPerson(e)}))},t.prototype.dropRole=function(e){var t=this,a=this.credit.aCreditRole[e.previousIndex].creditRoleID;Object(r.e)(this.credit.aCreditRole,e.previousIndex,e.currentIndex),this.creditService.reordercreditrole(this.theWork.assetID,this.credit.creditCompanyID,a,e.currentIndex+1).switchMap((function(a){return a?t.userAlertService.alertUser("Roles reordered",_.c,_.b).map((function(){t.credit.aCreditRole.forEach((function(e,t){e.displayOrder=t+1}))})):t.userAlertService.alertUser("Failed to reorder roles",_.c,_.b).map((function(){return Object(r.e)(t.credit.aCreditRole,e.currentIndex,e.previousIndex)}))})).subscribe()},t.prototype.searchActionRole=function(e){var t=this;e&&e.length&&!this.creditRole?this.creditService.searchcreditrole(e,this.credit.creditCompanyID).map((function(e){t.aCreditRole=e?t.aSelectedCreditRole.length?e.filter((function(e){return!t.aSelectedCreditRole.find((function(t){return t.creditRoleID===e.creditRoleID}))})):e:[],t.aCreditRole.find((function(e){return e.creditRoleName===t.creditRoleName}))||t.aCreditRole.push({creditRoleName:"Add new role",creditRoleID:0})})).subscribe():this.aCreditRole=[]},t.prototype.selectActionRole=function(e){var t=this;0===e.creditRoleID?this.creditService.createcreditrole(e.creditRoleName).switchMap((function(e){return e?t.userAlertService.alertUser("Role created",_.c,_.b).map((function(){t.setCreditRoleVar(e)})):t.userAlertService.alertUser("Failed to create role",_.c,_.b).map((function(){t.manageCreditRoleSearch.clearSearchTerm(),t.manageCreditRoleSearch.focusSearchTermInput()}))})).subscribe():this.setCreditRoleVar(e)},t.prototype.removeSelectedActionRole=function(e){this.aSelectedCreditRole.find((function(t){return t.creditRoleID===e.creditRoleID}))&&this.aSelectedCreditRole.splice(this.aSelectedCreditRole.findIndex((function(t){return t.creditRoleID===e.creditRoleID})),1)},t.prototype.clearSelectedActionRole=function(){this.creditRole&&(this.creditRole=void 0,this.aSelectedCreditPerson=[],this.manageCreditPersonSearch.setSearchTerm(""),this.manageCreditPersonSearch.resetSearchTermInput()),this.aSelectedCreditRole&&this.aSelectedCreditRole.length&&(this.aSelectedCreditRole=[]),this.manageCreditRoleSearch.setSearchTerm(""),this.manageCreditRoleSearch.resetSearchTermInput(),this.manageCreditRoleSearch.focusSearchTermInput()},t.prototype.saveCredit=function(){var e=this;this.creditService.createcredit(this.theWork.assetID,this.credit.creditCompanyID,this.creditPerson?[this.creditPerson.creditPersonID]:this.aSelectedCreditPerson.map((function(e){return e.creditPersonID})),this.creditRole?[this.creditRole.creditRoleID]:this.aSelectedCreditRole.map((function(e){return e.creditRoleID}))).switchMap((function(t){return t?e.userAlertService.alertUser("Credit successfully created",_.c,_.b).switchMap((function(){return e.loadCredit(e.theWork.assetID,e.credit.creditCompanyID)})):e.userAlertService.alertUser("Failed to create credit",_.c,_.b)})).map((function(){return e.creditPerson?e.clearSelectedActionPerson():e.clearSelectedActionRole()})).subscribe()},t.prototype.swapFormOrder=function(){this.formOrder=!this.formOrder},t.prototype.isSaveDisabled=function(){var e=this;if(this.creditPerson&&this.aSelectedCreditRole.length)return!1;if(this.creditRole&&this.aSelectedCreditPerson.length){if(!this.credit.aCreditRole.find((function(t){return t.creditRoleID===e.creditRole.creditRoleID})))return!1;if(!this.bCreditPersonRemovalProcessing&&JSON.stringify(this.creditRole.aCreditPerson)!==JSON.stringify(this.aSelectedCreditPerson))return!1}return!0},t.\u0275fac=function(e){return new(e||t)(h.Nb($t.a),h.Nb(gt.a),h.Nb(c.a),h.Nb(P.b),h.Nb(_.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-manage-credits"]],viewQuery:function(e,t){var a;1&e&&(h.Uc(Rn,!0),h.Uc(Un,!0)),2&e&&(h.yc(a=h.cc())&&(t.manageCreditPersonSearch=a.first),h.yc(a=h.cc())&&(t.manageCreditRoleSearch=a.first))},features:[h.zb],decls:21,vars:2,consts:[[1,"fullscreen_header","g-page-width","text-center"],[1,"mat-display-0","mat-type"],["mat-icon-button","","aria-label","Back","MatTooltip","Back",3,"routerLink"],["aria-hidden","true"],[4,"ngTemplateOutlet"],["loading",""],["creditViewAll",""],["viewCredits",""],["noCredits",""],["creditPersonForm",""],["creditRoleForm",""],["creditCompanyRolePerson",""],[3,"color","strokeWidth","diameter"],[1,"g-page-width","g-section"],[1,"credit-block"],["fxLayout","","fxLayoutGap","16px"],[1,"mat-title"],[1,"light"],[4,"ngFor","ngForOf"],["mat-button","",3,"routerLink"],["fxLayout","row","fxLayoutAlign","end start"],["mat-flat-button","","color","accent",3,"routerLink"],[3,"ngStyle.gt-md"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y","class","credit-block_role",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"credit-block_role"],["fxLayout","row wrap","fxLayoutGap","8px","fxLayoutAlign","start center"],["cdkDragHandle","","aria-hidden","true",1,"credit-block_drag-handle","text-al-40",2,"padding-left","16px","padding-top","2px"],["fxFlex","","fxFlex.gt-xs","30","fxFlex.gt-sm","20",1,"credit-block_role-title","mat-type"],[3,"click"],["fxFlex","",1,"credit-block_person-list"],["aria-label","People selected","cdkDropList","","cdkDropListOrientation","horizontal",3,"cdkDropListDropped"],["chipList",""],["cdkDrag","","cdkDragLockAxis","x","color","accent","selected","",3,"selectable","removable","removed",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","x","color","accent","selected","",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"alert","is-issue"],[1,"mat-caption"],[1,"mat-subheading-2"],["fxFlex","",3,"searchTerm","aFilteredItem","aSelectedItem","chipListLabel","displayFnItem","fieldLabel","itemNameProperty","itemIdProperty","clearSelectedAction","removeSelectedAction","searchAction","selectAction"],["manageCreditPersonSearch",""],["manageCreditRoleSearch",""],[1,"manage-credits_form-wrapper"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign","start stretch","fxLayoutAlign.gt-sm","center center","fxLayoutGap","0","fxLayoutGap.gt-sm","16px"],["aria-label","Swap","mat-icon-button","","tabIndex","-1",3,"ngClass","click"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px"],[4,"ngIf"],["fxFlex",""],["mat-flat-button","","color","accent",3,"disabled","click"],["aria-label","Role suggestions"],[3,"click",4,"ngFor","ngForOf"],["matChipRemove","","aria-hidden","true"],["aria-label","Person suggestions"]],template:function(e,t){if(1&e&&(h.Tb(0,"header",0),h.Tb(1,"h1",1),h.Pc(2,"Manage Credits"),h.Sb(),h.Tb(3,"a",2),h.Tb(4,"mat-icon",3),h.Pc(5,"arrow_back"),h.Sb(),h.Sb(),h.Sb(),h.Nc(6,Mn,1,0,void 0,4),h.Nc(7,jn,1,3,"ng-template",null,5,h.Oc),h.Nc(9,Vn,15,6,"ng-template",null,6,h.Oc),h.Nc(11,Xn,3,6,"ng-template",null,7,h.Oc),h.Nc(13,Zn,5,0,"ng-template",null,8,h.Oc),h.Nc(15,eo,2,8,"ng-template",null,9,h.Oc),h.Nc(17,to,2,8,"ng-template",null,10,h.Oc),h.Nc(19,lo,14,8,"ng-template",null,11,h.Oc)),2&e){var a=h.zc(8),i=h.zc(10);h.Cb(3),h.mc("routerLink","../../"),h.Cb(3),h.mc("ngTemplateOutlet",t.credit?i:a)}},directives:[U.a,c.f,E.a,n.s,W.c,R.e,R.f,n.m,R.d,L.c,r.c,r.a,r.b,R.b,Ht.c,Ht.a,n.n,Ht.d,ra,U.b,n.l,L.a],styles:["app-manage-credits{display:block;padding-top:56px;padding-bottom:112px}app-manage-credits header{position:relative}app-manage-credits header .mat-icon-button{position:absolute;left:0;top:6px}app-manage-credits .manage-credits_form-wrapper{background:#f5f5f5;padding:24px 24px 16px;margin-top:-24px;margin-bottom:32px}app-manage-credits .manage-credits_form-wrapper .mat-form-field{width:100%}app-manage-credits .manage-credits_form-wrapper .mat-form-field-infix{min-height:32px}app-manage-credits .manage-credits_form-wrapper .mat-icon-button{margin:auto;display:block;-webkit-transition:all .35s cubic-bezier(.33,.66,.66,1);transition:all .35s cubic-bezier(.33,.66,.66,1)}@media (max-width:959px){app-manage-credits .manage-credits_form-wrapper .mat-icon-button{-webkit-transform:rotate(270deg);transform:rotate(270deg)}}app-manage-credits .manage-credits_form-wrapper .mat-icon-button.is-flipped{-webkit-transform:rotate(180deg);transform:rotate(180deg)}@media (max-width:959px){app-manage-credits .manage-credits_form-wrapper .mat-icon-button.is-flipped{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}app-manage-credits .manage-credits_form-wrapper .mat-chip{cursor:pointer}app-manage-credits .credit-block_person-list .mat-chip{cursor:ew-resize}"],encapsulation:2}),t}(ht.a),mo=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),uo=["creditcompanytypeothertext"];function bo(e,t){1&e&&h.Pb(0)}function fo(e,t){if(1&e&&h.Ob(0,"mat-spinner",5),2&e){var a=h.fc();h.mc("color",a.accent)("strokeWidth",2)("diameter",80)}}function go(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"a",10),h.Tb(2,"mat-icon",11),h.Pc(3,"arrow_back"),h.Sb(),h.Sb(),h.Qb()),2&e){var a=h.fc(2);h.Cb(1),h.mc("routerLink","../../manage/"+a.creditCompany.creditCompanyID)}}function ho(e,t){1&e&&(h.Tb(0,"a",12),h.Tb(1,"mat-icon",11),h.Pc(2,"arrow_back"),h.Sb(),h.Sb())}function yo(e,t){1&e&&h.Pb(0)}function vo(e,t){if(1&e&&(h.Tb(0,"header",6),h.Tb(1,"h1",7),h.Pc(2,"Manage "),h.Tb(3,"strong"),h.Pc(4),h.Sb(),h.Sb(),h.Nc(5,go,4,1,"ng-container",8),h.Nc(6,ho,3,0,"ng-template",null,9,h.Oc),h.Sb(),h.Nc(8,yo,1,0,"ng-container",0)),2&e){var a=h.zc(7),i=h.fc(),r=h.zc(6),n=h.zc(2);h.Cb(4),h.Qc(i.creditCompany.creditCompanyName),h.Cb(1),h.mc("ngIf",i.credit)("ngIfElse",a),h.Cb(3),h.mc("ngTemplateOutlet",i.creditCompanyTypeFormGroup?r:n)}}function Co(e,t){if(1&e&&(h.Tb(0,"div",30),h.Tb(1,"mat-checkbox",31),h.Pc(2),h.Sb(),h.Sb()),2&e){var a=t.$implicit,i=t.index,r=h.fc(3);h.Cb(1),h.mc("formControl",a),h.Cb(1),h.Qc(r.aCreditCompanyType[i].creditCompanyTypeName)}}function So(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",20),h.Nc(1,Co,3,2,"div",21),h.Rb(2,22),h.Tb(3,"div",23),h.Tb(4,"mat-checkbox",24),h.Pc(5,"Other"),h.Sb(),h.Sb(),h.Tb(6,"mat-form-field",25),h.Tb(7,"mat-label"),h.Pc(8,"Custom Company Type"),h.Sb(),h.Tb(9,"input",26,27),h.bc("blur",(function(e){return h.Cc(a),h.fc(2).onBlur(e)}))("keydown.enter",(function(e){return h.Cc(a),h.fc(2).onKeyDown(e)})),h.Sb(),h.Tb(11,"button",28),h.bc("click",(function(){return h.Cc(a),h.fc(2).creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").reset()})),h.Tb(12,"mat-icon",29),h.Pc(13,"close"),h.Sb(),h.Sb(),h.Sb(),h.Qb(),h.Sb()}if(2&e){var i=h.fc(2);h.Cb(1),h.mc("ngForOf",i.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").controls),h.Cb(5),h.Kc("visibility",i.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherCheckFormControl").value?"visible":"hidden")}}function ko(e,t){1&e&&(h.Tb(0,"mat-icon",11),h.Pc(1,"add"),h.Sb())}function Io(e,t){if(1&e){var a=h.Ub();h.Rb(0),h.Ob(1,"span",32),h.Tb(2,"button",33),h.bc("click",(function(){h.Cc(a);var e=h.fc(2);return e.openConfirmDeleteCreditCompany(e.creditCompany)})),h.Tb(3,"mat-icon",11),h.Pc(4,"delete"),h.Sb(),h.Tb(5,"span"),h.Pc(6," Delete Company"),h.Sb(),h.Sb(),h.Qb()}if(2&e){var i=h.fc(2);h.Cb(2),h.mc("disabled",!i.credit)}}function wo(e,t){if(1&e){var a=h.Ub();h.Tb(0,"form",13),h.Tb(1,"label",14),h.Pc(2,"Set Company Type"),h.Sb(),h.Nc(3,So,14,3,"div",15),h.Tb(4,"div",16),h.Tb(5,"button",17),h.bc("click",(function(){return h.Cc(a),h.fc().saveCompany()})),h.Nc(6,ko,2,0,"mat-icon",18),h.Tb(7,"span"),h.Pc(8),h.Sb(),h.Sb(),h.Nc(9,Io,7,1,"ng-container",19),h.Sb(),h.Sb()}if(2&e){var i=h.fc();h.mc("formGroup",i.creditCompanyTypeFormGroup),h.Cb(3),h.mc("ngIf",i.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl")),h.Cb(2),h.mc("disabled",!i.isCreditCompanyTypeFormValid()),h.Cb(1),h.mc("ngIf",!i.credit),h.Cb(2),h.Rc(" ",i.credit?"Save":"Add"," Company"),h.Cb(1),h.mc("ngIf",i.credit)}}function To(e,t){1&e&&(h.Rb(0),h.Pc(1,", "),h.Qb())}function xo(e,t){if(1&e&&(h.Tb(0,"strong"),h.Nc(1,To,2,0,"ng-container",19),h.Pc(2),h.Sb()),2&e){var a=t.$implicit,i=t.index;h.Cb(1),h.mc("ngIf",i>0),h.Cb(1),h.Qc(a.creditCompanyTypeName)}}function Do(e,t){1&e&&h.Pb(0)}function Po(e,t){if(1&e){var a=h.Ub();h.Tb(0,"div",34),h.Tb(1,"h2",14),h.Nc(2,xo,3,2,"strong",35),h.Sb(),h.Tb(3,"button",28),h.bc("click",(function(){return h.Cc(a),h.fc().clearCreditCompanyType()})),h.Tb(4,"mat-icon",29),h.Pc(5,"close"),h.Sb(),h.Sb(),h.Sb(),h.Nc(6,Do,1,0,"ng-container",0)}if(2&e){var i=h.fc();h.Cb(2),h.mc("ngForOf",i.aSelectCreditCompanyType),h.Cb(4),h.mc("ngTemplateOutlet",i.creditCompanyRolePerson)}}var _o=function(e){function t(t,a,i,r,n,o,c,p){var l=e.call(this,r)||this;return l.creditService=t,l.dialog=a,l.fb=i,l.fullpageService=r,l.route=n,l.router=o,l.theworkService=c,l.userAlertService=p,l}return mo(t,e),t.prototype.ngOnInit=function(){var e=this;Object(f.a)([this.loadCreditCompany(parseInt(this.route.snapshot.paramMap.get("creditCompanyID"))),this.loadWork(parseInt(this.route.snapshot.paramMap.get("singleCampaignID"))?parseInt(this.route.snapshot.paramMap.get("singleCampaignID")):parseInt(this.route.snapshot.paramMap.get("campaignID"))).flatMap((function(t){return Object(f.a)([e.loadCredit(t.assetID,parseInt(e.route.snapshot.paramMap.get("creditCompanyID"))),e.creditService.indexcreditcompanytype()]).map((function(t){e.aCreditCompanyType=e.credit?t[1].concat(e.credit.aCreditCompanyType.filter((function(e){return!t[1].find((function(t){return t.creditCompanyTypeID===e.creditCompanyTypeID}))}))):t[1],e.createCreditCompanyTypeForm(e.aCreditCompanyType,e.credit?e.credit.aCreditCompanyType.map((function(e){return e.creditCompanyTypeID})):[])}))}))]).subscribe()},t.prototype.loadWork=function(e){var t=this;return this.theworkService.getWork(e).map((function(e){return t.theWork=e,e}))},t.prototype.loadCredit=function(e,t){var a=this;return this.creditService.getcreditbyassetid(e).map((function(e){return a.aCredit=e,a.credit=a.aCredit.find((function(e){return e.creditCompanyID===t})),a.credit}))},t.prototype.loadCreditCompany=function(e){var t=this;return this.creditService.viewcreditcompany(e).map((function(e){t.creditCompany=e}))},t.prototype.createCreditCompanyTypeForm=function(e,t){var a=this;this.creditCompanyTypeFormGroup=this.fb.group({creditCompanyTypeOtherFormGroup:this.fb.group({creditCompanyTypeOtherCheckFormControl:new o.g(!1),creditCompanyTypeOtherTextFormControl:new o.g("")})}),this.creditCompanyTypeFormGroup.addControl("creditCompanyTypeIDFormControl",this.buildCreditCompanyType(e,t)),this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").valueChanges.switchMap((function(){return a.validateForm()})).subscribe(),this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherCheckFormControl").valueChanges.switchMap((function(){return a.validateForm()})).subscribe(),this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").valueChanges.debounceTime(300).switchMap((function(){return a.validateForm()})).subscribe()},t.prototype.setValidatorOther=function(){return this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").validator||(this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").setValidators([o.x.required]),this.focusCreditCompanyTypeOtherText()),Object(g.a)(!0)},t.prototype.clearValidatorOther=function(){return this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").validator&&(this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").clearValidators(),this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").reset()),Object(g.a)(!0)},t.prototype.setValidatorTypeID=function(){var e;return this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").validator||this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").setValidators([(void 0===e&&(e=1),function(t){var a=0;return Object.keys(t.controls).forEach((function(e){!0===t.controls[e].value&&a++})),a<e?{requireCheckboxToBeChecked:!0}:null})]),Object(g.a)(!0)},t.prototype.clearValidatorTypeID=function(){return this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").validator&&(this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").clearValidators(),this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").reset()),Object(g.a)(!0)},t.prototype.validateForm=function(){var e=[];switch([!!this.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").value.find((function(e){return e})),this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherCheckFormControl").value,!(null===this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").value||!this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").value.length)].join(",")){case"false,false,false":e.push(this.setValidatorTypeID()),e.push(this.setValidatorOther());break;case"true,false,false":case"true,false,true":e.push(this.setValidatorTypeID()),e.push(this.clearValidatorOther());break;case"false,true,false":e.push(this.setValidatorOther()),e.push(this.clearValidatorTypeID());break;case"false,true,true":e.push(this.clearValidatorTypeID());break;case"false,false,true":e.push(this.clearValidatorOther());break;case"true,true,false":e.push(this.setValidatorOther());break;default:e.push(this.setValidatorTypeID()),e.push(this.setValidatorOther())}return Object(f.a)(e)},t.prototype.isCreditCompanyTypeFormValid=function(){return this.creditCompanyTypeFormGroup.dirty&&this.creditCompanyTypeFormGroup.valid},t.prototype.buildCreditCompanyType=function(e,t){var a=this;void 0===t&&(t=[]);var i=e.map((function(e){var i=t.some((function(t){return t===e.creditCompanyTypeID}));return a.fb.control(i)}));return this.fb.array(i)},t.prototype.clearCreditCompanyType=function(){this.creditCompanyTypeID=void 0,this.creditCompanyTypeFormGroup=void 0},t.prototype.saveCompany=function(){var e=this;Object(g.a)([this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherCheckFormControl").value,this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").value]).switchMap((function(t){return t[0]&&t[1].length?e.creditService.createcreditcompanytype(t[1]):Object(g.a)(void 0)})).switchMap((function(t){var a=[];return t&&t.hasOwnProperty("creditCompanyTypeID")?a.push(t.creditCompanyTypeID):Object(g.a)(void 0),e.creditCompanyTypeFormGroup.get("creditCompanyTypeIDFormControl").value.forEach((function(t,i){return t&&e.aCreditCompanyType[i]?a.push(e.aCreditCompanyType[i].creditCompanyTypeID):void 0})),e.creditService.saveassetcreditcompany(e.theWork.assetID,e.creditCompany.creditCompanyID,a).switchMap((function(t){return t.hasOwnProperty("creditCompanyID")?e.userAlertService.alertUser("Company "+(e.credit?"updated":"created"),_.c,_.b).map((function(){e.router.navigate(["../../manage/"+t.creditCompanyID],{relativeTo:e.route})})):e.userAlertService.alertUser("Failed to update company",_.c,_.b)}))})).subscribe()},t.prototype.focusCreditCompanyTypeOtherText=function(){var e=this;this.creditcompanytypeothertext&&setTimeout((function(){e.creditcompanytypeothertext.nativeElement.focus()}),0)},t.prototype.onBlur=function(e){this.creditCompanyTypeFormGroup.get("creditCompanyTypeOtherFormGroup").get("creditCompanyTypeOtherTextFormControl").updateValueAndValidity()},t.prototype.openConfirmDeleteCreditCompany=function(e){var t=this;this.dialog.open(S.a,{minWidth:"300px",width:"450px",data:{title:"Delete Company?",icon:!0,content:"Please confirm permanently deleting <strong>"+e.creditCompanyName+"</strong> and <strong>all credits</strong> associated with it.",confirm:"Yes, Delete Company"}}).afterClosed().subscribe((function(a){a?t.deleteCreditCompany(e):Object(g.a)(void 0)}))},t.prototype.deleteCreditCompany=function(e){var t=this;this.creditService.removeassetcreditcompany(this.theWork.assetID,e.creditCompanyID).switchMap((function(e){return e?t.userAlertService.alertUser("Company removed",_.c,_.b).map((function(){t.router.navigate(["../../"],{relativeTo:t.route})})):t.userAlertService.alertUser("Failed to remove company",_.c,_.b)})).subscribe()},t.prototype.onKeyDown=function(e){this.isCreditCompanyTypeFormValid?this.saveCompany():Object(g.a)(void 0)},t.\u0275fac=function(e){return new(e||t)(h.Nb($t.a),h.Nb(O.b),h.Nb(o.f),h.Nb(gt.a),h.Nb(c.a),h.Nb(c.c),h.Nb(P.b),h.Nb(_.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-manage-credit-company"]],viewQuery:function(e,t){var a;1&e&&h.Uc(uo,!0),2&e&&h.yc(a=h.cc())&&(t.creditcompanytypeothertext=a.first)},features:[h.zb],decls:9,vars:1,consts:[[4,"ngTemplateOutlet"],["loading",""],["creditCompanyView",""],["creditCompanyTypeForm",""],["creditCompanyTypeView",""],[3,"color","strokeWidth","diameter"],[1,"fullscreen_header","g-page-width","text-center"],[1,"mat-display-0","mat-type"],[4,"ngIf","ngIfElse"],["noCredit",""],["mat-icon-button","","aria-label","Back","MatTooltip","Back",3,"routerLink"],["aria-hidden","true"],["mat-icon-button","","routerLink","../../","aria-label","Back","MatTooltip","Back"],["fxLayout","column",1,"g-page-width","g-section","g-page-width--narrow",3,"formGroup"],[1,"mat-title"],["class","checkbox-group","fxLayout","row wrap",4,"ngIf"],["fxLayout","row-reverse","fxLayoutAlign","start start","fxLayoutGap","16px"],["mat-flat-button","","color","accent",3,"disabled","click"],["aria-hidden","true",4,"ngIf"],[4,"ngIf"],["fxLayout","row wrap",1,"checkbox-group"],["class","checkbox","fxFlex","100","fxFlex.gt-xs","50","style","padding-right: 8px;",4,"ngFor","ngForOf"],["formGroupName","creditCompanyTypeOtherFormGroup"],["fxFlex","100",1,"checkbox",2,"padding-right","8px"],["formControlName","creditCompanyTypeOtherCheckFormControl"],["fxFlex","100",2,"padding-left","30px"],["matInput","","tabIndex","0","aria-label","Other Detail","autocomplete","off","formControlName","creditCompanyTypeOtherTextFormControl",3,"blur","keydown.enter"],["creditcompanytypeothertext",""],["mat-icon-button","","matSuffix","",3,"click"],["aria-label","Clear search"],["fxFlex","100","fxFlex.gt-xs","50",1,"checkbox",2,"padding-right","8px"],[3,"formControl"],["fxFlex",""],["mat-button","","color","warn",3,"disabled","click"],[1,"credit-block"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(h.Nc(0,bo,1,0,"ng-container",0),h.Nc(1,fo,1,3,"ng-template",null,1,h.Oc),h.Nc(3,vo,9,4,"ng-template",null,2,h.Oc),h.Nc(5,wo,10,6,"ng-template",null,3,h.Oc),h.Nc(7,Po,7,2,"ng-template",null,4,h.Oc)),2&e){var a=h.zc(2),i=h.zc(4);h.mc("ngTemplateOutlet",t.creditCompany?i:a)}},directives:[n.s,W.c,n.n,U.a,c.f,E.a,o.y,o.r,R.e,o.j,R.d,R.f,U.b,n.m,o.k,R.b,Ua.a,o.q,o.i,St.c,St.g,kt.b,o.c,St.i,o.h],styles:["app-manage-credit-company{display:block;padding-top:56px;padding-bottom:112px}app-manage-credit-company header{position:relative}app-manage-credit-company header .mat-icon-button{position:absolute;left:0;top:6px}app-manage-credit-company .g-section{padding:0 16px}app-manage-credit-company form{margin-top:56px}app-manage-credit-company .checkbox-group{margin-bottom:32px}app-manage-credit-company .mat-checkbox-layout .mat-checkbox-label{padding:6px 16px 6px 6px}"],encapsulation:2}),t}(ht.a),Fo=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}(),No=function(e){function t(t){var a=e.call(this,t)||this;return a.fullpageService=t,a}return Fo(t,e),t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-single"]],features:[h.zb],decls:1,vars:0,template:function(e,t){1&e&&h.Ob(0,"app-shared-thework-edit")},directives:[ui],styles:["app-single{display:block;padding-top:48px}"],encapsulation:2}),t}(ht.a),Oo=function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function i(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(i.prototype=a.prototype,new i)}}();function Ao(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"a",7),h.Pc(2,"View Work"),h.Sb(),h.Tb(3,"a",8),h.Pc(4,"Create Entry"),h.Sb(),h.Qb()),2&e){var a=h.fc();h.Cb(1),h.oc("routerLink","/work/",a.params.campaignID,""),h.Cb(2),h.oc("routerLink","/entries/work/",a.params.campaignID,"/create-entry")}}function Wo(e,t){if(1&e&&(h.Rb(0),h.Tb(1,"a",7),h.Pc(2,"View Campaign"),h.Sb(),h.Tb(3,"a",8),h.Pc(4,"Create Entry"),h.Sb(),h.Qb()),2&e){var a=h.fc(2);h.Cb(1),h.oc("routerLink","/work/",a.params.campaignID,""),h.Cb(2),h.oc("routerLink","/entries/work/",a.params.campaignID,"/create-entry")}}var Lo=function(e){return{theWork:e}},Ro=function(e){return{data:e}},Uo=function(e){return{theWork:e,bSave:!0}};function Eo(e,t){if(1&e&&(h.Tb(0,"a",10),h.Pc(1,"Add More Work To Campaign"),h.Sb(),h.Tb(2,"a",11),h.Pc(3,"View Campaign"),h.Sb()),2&e){var a=h.fc(2);h.mc("state",h.sc(4,Ro,h.sc(2,Lo,a.parentTheWork))),h.Cb(2),h.mc("state",h.sc(8,Ro,h.sc(6,Uo,a.parentTheWork)))}}function Mo(e,t){if(1&e&&(h.Nc(0,Wo,5,2,"ng-container",5),h.Nc(1,Eo,4,10,"ng-template",null,9,h.Oc)),2&e){var a=h.zc(2),i=h.fc();h.mc("ngIf",-1===i.router.url.indexOf("create/single"))("ngIfElse",a)}}var jo=function(e){return{"bg-primary":e}},Go=function(e){function t(t,a,i){var r=e.call(this,t)||this;return r.fullpageService=t,r.router=a,r.route=i,r}return Oo(t,e),t.prototype.ngOnInit=function(){var e=this;history.state.data&&history.state.data.theWork&&(this.parentTheWork=history.state.data.theWork),this.route.params.switchMap((function(t){return e.getUrlSlugs()})).subscribe((function(t){e.params=t||void 0}))},t.prototype.getUrlSlugs=function(){return Object(g.a)(this.route.params).map((function(e){return{campaignID:e.value.campaignID?parseInt(e.value.campaignID):void 0}}))},t.\u0275fac=function(e){return new(e||t)(h.Nb(gt.a),h.Nb(c.c),h.Nb(c.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-success"]],features:[h.zb],decls:10,vars:5,consts:[[3,"ngClass"],[1,"mat-display-0","mat-type","text-center"],[1,"text-center"],[1,"mat-icon--3x","text-success"],["fxLayout","column","fxLayoutGap","16px",1,"create-success__next"],[4,"ngIf","ngIfElse"],["campaignlinks",""],["fxFlex","","mat-flat-button","","color","accent",3,"routerLink"],["fxFlex","","mat-button","",3,"routerLink"],["campaignlinkscreatesingle",""],["fxFlex","","mat-flat-button","","color","accent","routerLink","../../../../",3,"state"],["fxFlex","","mat-button","","routerLink","../../../../",3,"state"]],template:function(e,t){if(1&e&&(h.Tb(0,"section",0),h.Tb(1,"h1",1),h.Pc(2,"Success"),h.Sb(),h.Tb(3,"div",2),h.Tb(4,"mat-icon",3),h.Pc(5,"check"),h.Sb(),h.Sb(),h.Tb(6,"div",4),h.Nc(7,Ao,5,2,"ng-container",5),h.Nc(8,Mo,3,2,"ng-template",null,6,h.Oc),h.Sb(),h.Sb()),2&e){var a=h.zc(9);h.mc("ngClass",h.sc(3,jo,-1!==t.router.url.indexOf("create/campaign")&&-1===t.router.url.indexOf("item-manager/"))),h.Cb(7),h.mc("ngIf",-1===t.router.url.indexOf("create/campaign")&&-1===t.router.url.indexOf("item-manager/"))("ngIfElse",a)}},directives:[n.l,L.a,E.a,R.e,R.f,n.n,U.a,c.f,R.b],styles:["app-success{display:block;height:inherit}app-success section{padding:110px 16px 112px;height:inherit;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:scroll}app-success .mat-title{margin-top:32px}app-success .create-success__next{max-width:300px;margin:64px auto 0}app-success .mat-icon--3x{border:5px solid;padding:8px;border-radius:100px}"],encapsulation:2}),t}(ht.a),zo=[{path:"",component:An,data:{animation:"WorkIndexPage"}},{path:"create",component:Bt,data:{animation:"WorkCreatePage"}},{path:"create/single",component:No,data:{animation:"WorkCreatSinglePage"}},{path:"create/single/:campaignID/file-upload",component:On,data:{animation:"WorkFileUploadPage"}},{path:"create/single/:campaignID/file-manager",component:Fr,data:{animation:"WorkFileManagerPage"}},{path:"create/single/:campaignID/credits",component:Ta,data:{animation:"WorkCreditsPage"}},{path:"create/single/:campaignID/success",component:Go,data:{animation:"WorkSuccessPage"}},{path:"create/campaign",component:zt,data:{animation:"WorkCreateCampaignPage"}},{path:"create/campaign/create/single",component:No,data:{animation:"WorkEditCampaignSinglePage"}},{path:"create/campaign/create/single/:campaignID/file-upload",component:On,data:{animation:"WorkFileUploadPage"}},{path:"create/campaign/create/single/:campaignID/file-manager",component:Fr,data:{animation:"WorkFileManagerPage"}},{path:"create/campaign/create/single/:campaignID/credits",component:Ta,data:{animation:"WorkCreditsPage"}},{path:"create/campaign/create/single/:campaignID/success",component:Go,data:{animation:"WorkSuccessPage"}},{path:"create/campaign/:campaignID/success",component:Go,data:{animation:"WorkSuccessPage"}},{path:":campaignID/edit",component:fi,data:{animation:"WorkEditPage"}},{path:":campaignID/edit-campaign",component:Ei,data:{animation:"WorkEditPage"}},{path:":campaignID/file-manager",component:Fr,data:{animation:"WorkFileManagerPage"}},{path:":campaignID/file-upload",component:On,data:{animation:"WorkFilePage"}},{path:":campaignID/file/:assetUploadID",component:Cr,data:{animation:"WorkFilePage"}},{path:":campaignID/file/:assetUploadID/file-upload",component:Fn,data:{animation:"WorkFileUploadPage"}},{path:":campaignID/credits",component:Ta,data:{animation:"WorkCreditsPage"}},{path:":campaignID/credits/manage",component:so,data:{animation:"WorkCreditsPage"}},{path:":campaignID/credits/manage/:creditCompanyID",component:so,data:{animation:"WorkCreditsPage"}},{path:":campaignID/credits/manage-company/:creditCompanyID",component:_o,data:{animation:"WorkCreditsPage"}},{path:":campaignID/item-manager",component:zt,data:{animation:"WorkEditCampaignPage"}},{path:":campaignID/item-manager/create/single",component:No,data:{animation:"WorkEditCampaignSinglePage"}},{path:":campaignID/item-manager/create/single/:campaignID/file-upload",component:On,data:{animation:"WorkFileUploadPage"}},{path:":campaignID/item-manager/create/single/:campaignID/file-manager",component:Fr,data:{animation:"WorkFileManagerPage"}},{path:":campaignID/item-manager/create/single/:campaignID/credits",component:Ta,data:{animation:"WorkCreditsPage"}},{path:":campaignID/item-manager/create/single/:campaignID/success",component:Go,data:{animation:"WorkSuccessPage"}},{path:":campaignID/item-manager/:campaignID/success",component:Go,data:{animation:"WorkSuccessPage"}},{path:":campaignID",component:bt,data:{animation:"WorkCampaignPage"},children:[{path:":singleCampaignID",component:bt,data:{animation:"WorkCampaignPage"}}]},{path:":campaignID/:singleCampaignID/edit",component:fi,data:{animation:"WorkEditPage"}},{path:":campaignID/:singleCampaignID/file-manager",component:Fr,data:{animation:"WorkFileManagerPage"}},{path:":campaignID/:singleCampaignID/file-upload",component:On,data:{animation:"WorkFilePage"}},{path:":campaignID/:singleCampaignID/credits",component:Ta,data:{animation:"WorkFilePage"}},{path:":campaignID/:singleCampaignID/credits/manage",component:so,data:{animation:"WorkCreditsPage"}},{path:":campaignID/:singleCampaignID/credits/manage/:creditCompanyID",component:so,data:{animation:"WorkCreditsPage"}},{path:":campaignID/:singleCampaignID/credits/manage-company/:creditCompanyID",component:_o,data:{animation:"WorkCreditsPage"}},{path:":campaignID/:singleCampaignID/file/:assetUploadID",component:Cr},{path:":campaignID/:singleCampaignID/file/:assetUploadID/file-upload",component:Fn,data:{animation:"WorkFilePage"}}],Qo=function(){function e(){}return e.\u0275mod=h.Lb({type:e}),e.\u0275inj=h.Kb({factory:function(t){return new(t||e)},imports:[[c.g.forChild(zo)],c.g]}),e}(),Bo=function(){function e(){}return e.\u0275mod=h.Lb({type:e}),e.\u0275inj=h.Kb({factory:function(t){return new(t||e)},imports:[[i.a,p.a,n.c,r.d,l.a,s.a,m.a,d.a,u.a,o.v,c.g,b.a,Qo]]}),e}()},gSmF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("qCKp"),r=a("LM6Q");i.Observable.prototype.startWith=r.startWith}}]);